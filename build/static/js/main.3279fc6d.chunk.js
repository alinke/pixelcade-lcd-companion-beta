(this["webpackJsonppixelcade-companion"]=this["webpackJsonppixelcade-companion"]||[]).push([[0],{111:function(e,t,s){},112:function(e,t,s){},117:function(e,t,s){},144:function(e,t,s){},145:function(e,t,s){},146:function(e,t,s){},147:function(e,t,s){},148:function(e,t,s){},149:function(e,t,s){},150:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(16),o=s.n(r),l=(s(111),s(112),s(31)),c=s(9),i=s(180),d=s(90),u=s.n(d),j=s(3),m=s.n(j),h=s.p+"static/media/pixelcade.698d1ae2.png",b=s(1);var x=()=>{const e=Object(c.m)(),t=Object(c.o)();return Object(b.jsxs)("div",{style:{backgroundColor:""},children:[Object(b.jsx)(j.Toaster,{containerStyle:{top:80}}),Object(b.jsx)("div",{className:"layout-grid logo-container",style:{backgroundColor:"#000"},children:Object(b.jsx)("img",{style:{objectFit:"scale-down",width:"100%",maxHeight:75},src:h,alt:"Pixelcade Companion Logo"})}),"/"!==e.pathname&&Object(b.jsxs)("div",{className:"layout-grid fade-in",style:{gridTemplateColumns:"repeat(auto-fit, minmax(75px, 1fr))",backgroundColor:"#000"},children:[Object(b.jsxs)("div",{className:"grid-item nav-element",onClick:()=>{t("/")},children:[Object(b.jsx)(i.a,{style:{marginRight:8}}),"HOME"]}),Object(b.jsxs)("div",{className:"grid-item nav-element",onClick:()=>{t(-1)},children:[Object(b.jsx)(u.a,{style:{marginRight:8}}),"GO BACK"]})]})]})};s(117);var p=e=>{const{isLoading:t}=e;return Object(b.jsx)(n.a.Fragment,{children:t&&Object(b.jsx)("div",{className:"loading fade-in",children:Object(b.jsx)("img",{className:"pulse",src:h,alt:"Pixelcade Companion Logo"})})})},g=s(8),v=s.n(g);const O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/v2";return`http://${window.location.host}${e}`},f=function(e,t,s){const a=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?"?nofuzzy=1":"",n=`${O("")}/arcade/stream/${e}/${t}${a}`;return v.a.post(n)},y=e=>{const t=`${O()}/utility/marquee/set/${e}`;return v.a.get(t)},S=()=>{const e=`${O()}/check-update`;return v.a.get(e).then((e=>e.data))};var w=()=>{const[e,t]=Object(a.useState)(!1),[s,r]=Object(a.useState)([]),o=Object(c.o)();Object(a.useEffect)((()=>{(async()=>{t(!0),await(()=>{const e=`${O()}/info/consoles`;return v.a.get(e).then((e=>e.data))})().then((e=>{r(e.consoles)})).catch().finally((()=>{t(!1)}))})()}),[]);return Object(b.jsxs)(n.a.Fragment,{children:[Object(b.jsx)(p,{isLoading:e}),Object(b.jsx)("div",{className:"layout-grid layout-grid-consoles",children:s.map(((e,t)=>Object(b.jsxs)("div",{className:"fade-in",style:{backgroundColor:"#456",borderRadius:"4px",padding:".5rem",border:"1px solid #ABABAB",color:"#FFF",cursor:"pointer"},onClick:()=>{o(`/marquees/${e.name}`)},children:[Object(b.jsx)("p",{children:e.descriptiveName}),Object(b.jsxs)("p",{children:[e.numMarquees," Marquees"]})]},t)))})]})},k=s(187),C=s(192);var N=s(91),T=s.n(N),F=s(64),L=s(218),R=s(185),$=s(186),M=s(216),A=s(191);var U=e=>{let{open:t,onClose:s,marquee:n,system:r,onDelete:o}=e;const[l,c]=Object(a.useState)(""),[i,d]=Object(a.useState)(!1),[u,j]=Object(a.useState)(!1),[h,x]=Object(a.useState)(!1),{streamImages:p}=vt(),g=(window.location.hostname,"usb"===n.storageType||"internal"===n.storageType),v=`${r}-${n.filename}.jpg`,y=`${O("")}/lcdmarquees/${v}`,S=()=>{x(!1),s()},w=async()=>{if(!l.trim())return void m.a.error("Please enter an alias name");const e=l.trim().endsWith(".jpg")?l.trim():`${l.trim()}.jpg`;d(!0);try{const t=await fetch(`${O("")}/symlink?original=${encodeURIComponent(v)}&new=${encodeURIComponent(e)}`),s=await t.json();t.ok&&s.success?(m.a.success(`Alias created: ${s.symlink}`),c("")):m.a.error(s.error||"Failed to create alias")}catch(t){m.a.error("Error creating alias"),console.error(t)}finally{d(!1)}};return Object(b.jsxs)(L.a,{open:t,onClose:S,maxWidth:"sm",fullWidth:!0,children:[Object(b.jsxs)(R.a,{style:{backgroundColor:"#6b0078",color:"#fff",position:"relative",paddingRight:"48px"},children:["Marquee Details",Object(b.jsx)("div",{onClick:S,style:{position:"absolute",top:"8px",right:"8px",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:"rgba(0,0,0,.3)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",border:"1px solid rgba(255,255,255,.3)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0,0,0,.6)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0,0,0,.3)",e.currentTarget.style.transform="scale(1)"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"20px",fontWeight:"bold",lineHeight:"1"},children:"\xd7"})})]}),Object(b.jsxs)($.a,{style:{backgroundColor:"#2a2a2a",color:"#fff",paddingTop:"20px"},children:[Object(b.jsx)("div",{style:{marginBottom:"20px",textAlign:"center"},children:Object(b.jsx)("img",{src:y,alt:n.name,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain",borderRadius:"4px"},onError:e=>{e.target.src=`${O()}/thumbnails/${n.apiSystem}/${n.filename}`}})}),Object(b.jsxs)("div",{style:{marginBottom:"20px"},children:[Object(b.jsxs)("p",{style:{margin:"8px 0"},children:[Object(b.jsx)("strong",{children:"Name:"})," ",n.name]}),Object(b.jsxs)("p",{style:{margin:"8px 0"},children:[Object(b.jsx)("strong",{children:"Source File:"})," ",v]}),Object(b.jsxs)("p",{style:{margin:"8px 0"},children:[Object(b.jsx)("strong",{children:"System:"})," ",n.systemName]})]}),Object(b.jsx)("div",{style:{marginBottom:"20px"},children:Object(b.jsx)(k.a,{variant:"contained",onClick:async()=>{try{m.a.loading(`Downloading ${v}...`);const e=await fetch(y);if(!e.ok)throw new Error(`Failed to fetch image: ${e.status}`);const t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=v,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),m.a.dismiss(),m.a.success(`Downloaded ${v}`)}catch(e){m.a.dismiss(),m.a.error("Failed to download image"),console.error(e)}},fullWidth:!0,style:{backgroundColor:"#4c3ba2",color:"#fff",marginBottom:"10px"},children:"Download Full Resolution Image"})}),Object(b.jsxs)("div",{style:{borderTop:"1px solid #444",paddingTop:"20px"},children:[Object(b.jsx)("p",{style:{marginBottom:"10px",fontWeight:600},children:"Create Alias:"}),Object(b.jsx)(M.a,{fullWidth:!0,variant:"outlined",placeholder:"Enter alternate filename (e.g., mame-pacman2.jpg)",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&w()},disabled:i,style:{marginBottom:"10px"},InputProps:{style:{backgroundColor:"#fff"}}}),Object(b.jsx)(k.a,{variant:"contained",onClick:w,fullWidth:!0,disabled:i,style:{backgroundColor:"#6b0078",color:"#fff"},children:i?"Creating...":"Create Alias"})]}),g&&Object(b.jsxs)("div",{style:{borderTop:"1px solid #444",paddingTop:"20px",marginTop:"20px"},children:[Object(b.jsx)("p",{style:{marginBottom:"10px",fontWeight:600,color:"#ef4444"},children:"Danger Zone:"}),h?Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{style:{marginBottom:"10px",color:"#fff"},children:['Are you sure you want to delete "',n.name,'"?']}),Object(b.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[Object(b.jsx)(k.a,{variant:"contained",onClick:async()=>{j(!0);try{const e=await fetch(`${O("")}/v2/artwork/delete?filename=${encodeURIComponent(v)}&storage=${encodeURIComponent(n.storageType||"")}`),t=await e.json();e.ok&&"ok"===t.status?(m.a.success(`Deleted ${n.name}`),o&&o(),S()):m.a.error(t.error||"Failed to delete marquee")}catch(e){m.a.error("Error deleting marquee"),console.error(e)}finally{j(!1),x(!1)}},disabled:u,style:{backgroundColor:"#dc2626",color:"#fff",flex:1},children:u?"Deleting...":"Yes, Delete"}),Object(b.jsx)(k.a,{variant:"outlined",onClick:()=>x(!1),disabled:u,style:{borderColor:"#666",color:"#fff",flex:1},children:"Cancel"})]})]}):Object(b.jsx)(k.a,{variant:"contained",onClick:()=>{g?x(!0):m.a.error("Can only delete user-uploaded marquees")},fullWidth:!0,disabled:u,style:{backgroundColor:"#dc2626",color:"#fff"},children:"Delete Marquee"}),Object(b.jsx)("p",{style:{marginTop:"8px",fontSize:"12px",color:"#888"},children:"This will permanently delete this user-uploaded marquee."})]})]}),Object(b.jsxs)(A.a,{style:{backgroundColor:"#2a2a2a",padding:"16px"},children:[Object(b.jsx)(k.a,{onClick:S,style:{color:"#fff"},children:"Close"}),Object(b.jsx)(k.a,{onClick:()=>{m.a.promise(f(r,n.filename,p),{loading:"Updating Marquee",success:"Successfully Updated Marquee",error:"Couldn't set the marquee"}),S()},variant:"contained",style:{backgroundColor:"#6b0078",color:"#fff"},children:"SET AS CURRENT MARQUEE"})]})]})};const D=e=>{const[t,s]=Object(a.useState)(!1),[r,o]=Object(a.useState)(!1),{marquee:l}=e,{streamImages:c}=vt(),i=()=>{const e="user"===l.apiSystem?l.systemName:l.apiSystem;m.a.promise(f(e,l.filename,c),{loading:"Updating Marquee",success:"Successfully Updated Marquee",error:"Couldn't set the marquee"},{id:"marquee-update"})},{onClick:d=i}=e;return Object(b.jsxs)(n.a.Fragment,{children:["bad"===l.id?Object(b.jsx)("div",{}):Object(b.jsx)(n.a.Fragment,{children:t?Object(b.jsxs)("div",{className:"grid-item fade-in",style:{backgroundColor:"#4c3ba2",flexDirection:"column",justifyContent:"center",cursor:"pointer",userSelect:"none",fontWeight:600,minHeight:60},onClick:()=>d(),children:[Object(b.jsx)("p",{children:Object(F.startCase)(l.name)}),"user"===l.id&&Object(b.jsx)("span",{style:{position:"absolute",bottom:"0px",right:"0px",backgroundColor:"rgba(0,0,0,.65)",padding:"2px 4px",borderRadius:"4px 0 0 0"},children:Object(F.startCase)(l.systemName)})]}):Object(b.jsxs)(T.a,{height:60,style:{position:"relative"},children:[Object(b.jsx)("img",{className:"grid-item fade-in",src:`${O("")}${l.thumbnailPath||`/thumbnail/${l.filename}`}`,alt:l.filename,onError:()=>s(!0),style:{backgroundColor:"rgba(255, 255, 255, .05)",cursor:"pointer",position:"relative",minHeight:40},onClick:()=>d()}),l.hasVideo&&Object(b.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",backgroundColor:"rgba(220, 38, 38, 0.9)",borderRadius:"4px",padding:"2px 6px",display:"flex",alignItems:"center",gap:"3px",border:"1px solid rgba(255,255,255,.3)"},title:"Video marquee available",children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"10px",fontWeight:"bold"},children:"\u25b6 Video"})}),("usb"===l.storageType||"internal"===l.storageType)&&Object(b.jsx)("div",{style:{position:"absolute",bottom:"4px",left:"4px",backgroundColor:"rgba(59, 130, 246, 0.9)",borderRadius:"4px",padding:"2px 6px",border:"1px solid rgba(255,255,255,.3)"},title:`User uploaded (${l.storageType})`,children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"10px",fontWeight:"bold"},children:"User"})}),Object(b.jsx)("div",{style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"rgba(0,0,0,.7)",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"1px solid rgba(255,255,255,.3)",transition:"all 0.2s ease"},onClick:e=>{e.stopPropagation(),o(!0)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(107,0,120,1)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0,0,0,.7)",e.currentTarget.style.transform="scale(1)"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold",fontStyle:"italic"},children:"i"})}),"user"===l.id&&Object(b.jsx)("span",{style:{fontWeight:600,position:"absolute",bottom:"0px",right:"0px",backgroundColor:"rgba(0,0,0,.65)",padding:"1px px",borderRadius:"4px 0 0 0"},children:Object(F.startCase)(l.systemName)})]})}),Object(b.jsx)(U,{open:r,onClose:()=>o(!1),marquee:l,system:e.system,onDelete:e.onDelete})]})};var B=n.a.memo(D);var I=()=>{const[e,t]=Object(a.useState)(!1),[s,r]=Object(a.useState)([]),{system:o}=Object(c.q)(),[l,i]=Object(a.useState)(""),d=function(e,t){const[s,n]=Object(a.useState)(e);return Object(a.useEffect)((()=>{const s=setTimeout((()=>{n(e)}),t);return()=>clearTimeout(s)}),[e,t]),s}(l,350),{streamImages:u,setStreamImages:j}=vt(),m=Object(c.o)();Object(a.useEffect)((()=>{o&&(t(!0),(e=>{const t=`${O()}/filesystem/${e}`;return fetch(t).then((e=>e.json()))})(o).then((e=>{const t=e.marquees||[];r(t)})).catch((e=>{console.error("Error fetching marquees:",e),r([])})).finally((()=>{t(!1)})))}),[o]);return Object(b.jsxs)(n.a.Fragment,{children:[Object(b.jsx)(p,{isLoading:e}),!e&&Object(b.jsx)("div",{className:"layout-grid fade-in",children:Object(b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"stretch"},children:[Object(b.jsx)("input",{value:l,onChange:e=>{i(e.target.value)},placeholder:"Search...",type:"text",id:"fname",name:"fname",style:{minHeight:54,border:"none",borderRadius:4,backgroundColor:"antiquewhite",padding:"0 1rem",fontSize:"1.2rem",flex:1,boxSizing:"border-box"}}),Object(b.jsx)(k.a,{variant:"contained",onClick:()=>m(`/upload-artwork?system=${o}`),style:{backgroundColor:"#7c3aed",color:"#fff",minWidth:"auto",padding:"0 1rem"},title:"Upload artwork for this system",children:Object(b.jsx)(C.a,{})})]})}),Object(b.jsx)("div",{className:"layout-grid fade-in",children:(()=>{let e=null===s||void 0===s?void 0:s.filter((e=>RegExp(`${d}`,"i").test(e.name.toLowerCase().trim())));for(e||(e=[]);e.length<10;)e.push({id:"bad",name:"",filename:"",apiSystem:"",systemName:"",hasVideo:!1,numGIFs:0,systemManufacturer:"",year:0});return e})().map(((e,t)=>Object(b.jsx)(B,{system:o,marquee:e,onDelete:()=>{return t=e.filename,void r((e=>e.filter((e=>e.filename!==t))));var t}},e.filename||t)))})]})},P=s(92),E=s(69),W=s.n(E),z=s(95),q=s.n(z),V=s(94),H=s.n(V),G=s(193),Y=s(194),K=s(195),J=s(196),X=s(197),Z=s(198);s(144);var _=()=>{const e=Object(c.o)(),[t,s]=Object(a.useState)(!1),[n,r]=Object(a.useState)(!0),[o,l]=Object(a.useState)(!1);return Object(a.useEffect)((()=>{S().then((e=>{s((null===e||void 0===e?void 0:e.updateAvailable)||!1),l(!1)})).catch((()=>{s(!1),l(!0)})).finally((()=>{r(!1)}))}),[]),Object(b.jsx)("div",{className:"fade-in main-menu",children:Object(b.jsxs)("div",{className:"menu-grid",children:[Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/consoles"),children:[Object(b.jsx)(G.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Browse Marquees"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/widgets"),children:[Object(b.jsx)(Y.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Widgets"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/default-marquee"),children:[Object(b.jsx)(K.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Default Marquee"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/upload-artwork"),children:[Object(b.jsx)(C.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Upload Artwork"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/text"),children:[Object(b.jsx)(J.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Text"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/settings"),children:[Object(b.jsx)(X.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Settings"})]}),Object(b.jsxs)("div",{className:"menu-card",onClick:()=>e("/log"),children:[Object(b.jsx)(Z.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"Log"})]}),Object(b.jsxs)("div",{className:"menu-card "+(t?"update-available":n||o?"":"up-to-date"),onClick:()=>e("/update"),children:[Object(b.jsx)(H.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:n?"Checking...":t?"Update Available!":o?"Updates":"Up to Date"}),t&&Object(b.jsx)("span",{className:"update-badge-dot"}),!n&&!t&&!o&&Object(b.jsx)("span",{className:"up-to-date-check",children:"\u2713"})]}),Object(b.jsxs)("div",{className:"menu-card system-card",onClick:e=>{const t=e.currentTarget.querySelector(".system-submenu");t&&t.classList.toggle("visible")},children:[Object(b.jsx)(W.a,{className:"menu-icon"}),Object(b.jsx)("span",{className:"menu-label",children:"System"}),Object(b.jsxs)("div",{className:"system-submenu",children:[Object(b.jsxs)("button",{className:"submenu-btn",onClick:e=>{e.stopPropagation(),m.a.promise((()=>{const e=`${O("")}/shutdown`;return v.a.post(e).then((e=>e.data))})(),{loading:"Attempting Shutdown",success:"Shutdown Succeeded",error:"Shutdown Failed"})},children:[Object(b.jsx)(W.a,{style:{fontSize:18,marginRight:6}}),"Shutdown"]}),Object(b.jsxs)("button",{className:"submenu-btn",onClick:e=>{e.stopPropagation(),m.a.promise((()=>{const e=`${O("")}/reboot`;return v.a.post(e).then((e=>e.data))})(),{loading:"Attempting to Reboot",success:"Reboot Succeeded",error:"Reboot Failed"})},children:[Object(b.jsx)(q.a,{style:{fontSize:18,marginRight:6}}),"Reboot"]})]})]})]})})},Q=s.p+"static/media/default-01.b07219d2.png",ee=s.p+"static/media/default-02.f12529b3.png",te=s.p+"static/media/default-03.64d2bd2a.png";const se=e=>{let{x:t,y:s,onDelete:n,onClose:r}=e;return Object(a.useEffect)((()=>{const e=()=>r();return document.addEventListener("click",e),()=>document.removeEventListener("click",e)}),[r]),Object(b.jsx)("div",{className:"fixed bg-white shadow-lg rounded-lg py-1 w-24 z-50",style:{left:t+10,top:s,backgroundColor:"rgb(255, 0, 0)",border:"1px solid rgb(55, 65, 81)",position:"fixed"},onClick:e=>e.stopPropagation(),children:Object(b.jsx)("div",{className:"px-4 py-2 text-sm text-gray-200 hover:bg-gray-700 cursor-pointer",onClick:n,children:"Delete"})})};var ae=()=>{const[e,t]=Object(a.useState)(!1),[s,r]=Object(a.useState)([]),[o,l]=Object(a.useState)({width:1920,height:360}),[c,i]=Object(a.useState)("1"),{streamImages:d}=vt(),u=Object(a.useRef)(null),[j,h]=Object(a.useState)(null),x=async()=>{t(!0);try{const e=await(e=>{const t=`${O()}/marquees/${e}`;return v.a.get(t).then((e=>e.data))})("user"),t=((null===e||void 0===e?void 0:e.marquees)||[]).filter((e=>e.filename&&e.systemName&&!e.systemName.startsWith("._")));r(t)}catch(e){console.error("Error loading marquees:",e),m.a.error("Failed to load marquees")}t(!1)};async function g(e){const t=window.location.hostname;try{console.log("Attempting to delete:",e);const s=e.replace(".jpg",""),a=c===s,n=await fetch(`http://${t}:8080/v2/marquees/user?filename=${encodeURIComponent(e)}`,{method:"DELETE",headers:{Accept:"application/json"}});console.log("Delete response status:",n.status);const r=await n.text();if(console.log("Delete response:",r),!n.ok)throw new Error(`Delete failed: ${r}`);m.a.success("Marquee deleted successfully"),await x(),a&&(console.log("Deleted marquee was the default, falling back to default #1"),await S(1))}catch(s){console.error("Delete error:",s),m.a.error("Failed to delete marquee")}h(null)}const S=async e=>{if("number"===typeof e)await m.a.promise(y(e),{loading:"Setting default marquee",success:"Default Marquee Set",error:"Couldn't set the default marquee"}),i(String(e)),await f("user",`default${e}`,d,!0);else{const t=`${e.systemName}-${e.filename}`;console.log("Setting default to:",t),await m.a.promise(y(t),{loading:"Setting default marquee",success:"Default Marquee Set",error:"Couldn't set the default marquee"}),i(t),await f("user",t,d,!0)}};return Object(a.useEffect)((()=>{(async()=>{try{const e=window.location.hostname,t=await fetch(`http://${e}:8080/v2/info`);if(!t.ok)throw new Error("Failed to fetch device info");const s=await t.json();if(s.resolution){const e=1280===s.resolution.width?390:360;l({width:s.resolution.width,height:e})}}catch(e){console.error("Error fetching device info:",e),l({width:1920,height:360})}})(),x(),(async()=>{try{const e=window.location.hostname,t=await fetch(`http://${e}:8080/v2/utility/marquee/default`);if(t.ok){const e=await t.json();console.log("Fetched current default:",e.defaultMarquee),i(e.defaultMarquee||"1")}}catch(e){console.error("Error fetching current default:",e)}})()}),[]),Object(b.jsxs)(n.a.Fragment,{children:[Object(b.jsxs)("div",{style:{marginLeft:"30px",marginBottom:"10px"},children:[Object(b.jsx)("button",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},style:{padding:"8px 16px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Upload Marquee"}),Object(b.jsx)("input",{ref:u,type:"file",accept:".jpg,.jpeg",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!s)return;if(!s.type.includes("jpeg")&&!s.type.includes("jpg"))return void m.a.error("Please upload a JPG file");if(a=s.name,!/^[a-zA-Z0-9]+-[a-zA-Z0-9]+\.jpg$/i.test(a))return void m.a.error("Filename must be in format x-y.jpg (e.g., default-sega.jpg)");var a;const n=await(e=>new Promise((t=>{const s=new Image;s.onload=()=>t(s.width===o.width&&s.height===o.height),s.onerror=()=>t(!1),s.src=URL.createObjectURL(e)})))(s);if(!n)return void m.a.error(`Image must be exactly ${o.width}x${o.height} pixels`);const r=new FormData;r.append("file",s);try{if(!(await fetch("/v2/marquees/user",{method:"POST",body:r})).ok)throw new Error("Upload failed");await f("user",s.name.replace(".jpg",""),d),await x(),m.a.success("Marquee uploaded successfully"),e.target.value=""}catch(l){console.error("Upload error:",l),m.a.error("Failed to upload marquee")}},style:{display:"none"}})]}),Object(b.jsx)("div",{style:{marginLeft:"30px",marginBottom:"20px"},children:Object(b.jsxs)("p",{style:{color:"#d1d5db",fontSize:"14px"},children:["Note: Custom marquee files must follow the naming convention: ",Object(b.jsx)("span",{style:{background:"rgba(0,0,0,0.3)",padding:"4px 8px",borderRadius:"4px",fontFamily:"monospace"},children:"default-yourfilename.jpg"})]})}),Object(b.jsx)("div",{style:{marginLeft:"30px",marginBottom:"20px"},children:Object(b.jsx)("p",{style:{color:"#d1d5db",fontSize:"14px"},children:"Select desired marquee and it will appear by default on startup"})}),Object(b.jsx)(p,{isLoading:e}),Object(b.jsxs)("div",{className:"layout-grid fade-in",children:[Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("img",{onClick:()=>S(1),style:{backgroundColor:"rgba(255, 255, 255, .05)",cursor:"pointer",position:"relative",minHeight:40,border:"1"===c?"3px solid #4CAF50":"none",borderRadius:"4px"},src:Q,alt:"marquee 1",className:"grid-item fade-in"}),"1"===c&&Object(b.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",backgroundColor:"#4CAF50",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold"},children:"\u2713"})})]}),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("img",{onClick:()=>S(2),style:{backgroundColor:"rgba(255, 255, 255, .05)",cursor:"pointer",position:"relative",minHeight:40,border:"2"===c?"3px solid #4CAF50":"none",borderRadius:"4px"},src:ee,alt:"marquee 2",className:"grid-item fade-in"}),"2"===c&&Object(b.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",backgroundColor:"#4CAF50",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold"},children:"\u2713"})})]}),Object(b.jsxs)("div",{style:{position:"relative"},children:[Object(b.jsx)("img",{onClick:()=>S(3),style:{backgroundColor:"rgba(255, 255, 255, .05)",cursor:"pointer",position:"relative",minHeight:40,border:"3"===c?"3px solid #4CAF50":"none",borderRadius:"4px"},src:te,alt:"marquee 3",className:"grid-item fade-in"}),"3"===c&&Object(b.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",backgroundColor:"#4CAF50",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold"},children:"\u2713"})})]}),s.map((e=>{const t=`${e.systemName}-${e.filename}`,s=c===t;return console.log(`Comparing: currentDefault="${c}" vs fullFilename="${t}" => isDefault=${s}`),Object(b.jsxs)("div",{style:{position:"relative",border:s?"3px solid #4CAF50":"none",borderRadius:"4px"},onContextMenu:t=>{const s=`${e.systemName}-${e.filename}.jpg`;console.log("Full MarqueeInfo item:",e),console.log("Constructed filename for delete:",s),((e,t)=>{e.preventDefault();const s=e.currentTarget.getBoundingClientRect(),a=window.innerWidth;let n=s.right+10;s.right+100>a&&(n=s.left-110),h({x:n,y:s.top,filename:t})})(t,s)},children:[Object(b.jsx)(B,{system:"user",marquee:e,onClick:()=>S(e)}),s&&Object(b.jsx)("div",{style:{position:"absolute",top:"4px",left:"4px",backgroundColor:"#4CAF50",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold"},children:"\u2713"})}),Object(b.jsx)("div",{style:{position:"absolute",top:"4px",right:"4px",backgroundColor:"rgba(200, 0, 0, 0.8)",borderRadius:"50%",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,border:"1px solid rgba(255,255,255,.3)",transition:"all 0.2s ease"},onClick:t=>{t.stopPropagation();const s=`${e.systemName}-${e.filename}.jpg`;window.confirm(`Delete "${s}"?`)&&g(s)},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 0, 0, 1)",e.currentTarget.style.transform="scale(1.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(200, 0, 0, 0.8)",e.currentTarget.style.transform="scale(1)"},children:Object(b.jsx)("span",{style:{color:"#fff",fontSize:"14px",fontWeight:"bold"},children:"\u2715"})})]},e.filename)}))]}),j&&Object(b.jsx)(se,{x:j.x,y:j.y,onDelete:()=>g(j.filename),onClose:()=>h(null)})]})},ne=s(199),re=s(200);const oe=["LiberationSans-Bold","LiberationSans-Regular","Orbitron-SemiBold","Arial Narrow 7","Benegraphic","Casio FX-702P","Decoder","dotty","DPComic","Ghastly Panic","Gnuolane","Grinched","Handwriting","Harry P","Haunting Attraction","Minimal4","Morris Roman","MostlyMono","Neon 80s","Nintendo DS BIOS","Not So Stout Deco","Pixelated","Pixeled","RetroBoundmini","Samba Is Dead","Shlop","Space Patrol NF","Star Jedi Hollow","Star Jedi","Still Time","Tall Films Fine","techno overload (BRK)","TR2N","TRON","Vectroid","Videophreak"],le=()=>{const e=`${O("")}/settings?key=getSettings`;return v.a.get(e).then((e=>e.data))};var ce=s(7);s(84);var ie=()=>{const[e,t]=Object(a.useState)(""),[s,n]=Object(a.useState)(),[r,o]=Object(a.useState)(),[l,c]=Object(a.useState)(null),[i,d]=Object(a.useState)([]),[u,j]=Object(a.useState)(!1),[h,x]=Object(a.useState)(!1),[p,g]=Object(a.useState)(""),[f,y]=Object(a.useState)(""),[S,w]=Object(a.useState)(!1),[C,N]=Object(a.useState)(!1),[T,F]=Object(a.useState)(null),[L,R]=Object(a.useState)(!1),$=window.location.hostname,M=async()=>{try{const e=await fetch(`http://${$}:8080/v2/wifi/status`);if(e.ok){const t=await e.json();c(t)}}catch(e){console.error("Error fetching WiFi status:",e)}},A=async()=>{j(!0);try{const e=await fetch(`http://${$}:8080/v2/wifi/scan`);if(e.ok){const t=await e.json();d(t.networks||[])}}catch(e){console.error("Error scanning WiFi networks:",e)}finally{j(!1)}},U=async()=>{try{const e=await fetch(`http://${$}:8080/v2/usb/status`);if(e.ok){const t=await e.json();F(t)}}catch(e){console.error("Error fetching USB status:",e)}},D=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]};Object(a.useEffect)((()=>{(()=>{const e=`${O()}/info`;return v.a.get(e).then((e=>e.data))})().then((e=>{t(e.name),o(e)})),le().then((e=>{n(e)})).catch(),M(),U()}),[]);const B=e=>Object(b.jsx)("div",{children:Object(b.jsx)("p",{children:e})}),I=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=ImageMarqueesOnly&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(!s.ImageMarqueesOnly),{loading:"Updating video marquees settings",success:()=>(n({...s,ImageMarqueesOnly:!s.ImageMarqueesOnly}),B("Video marquees settings updated")),error:"Setting failed"},{duration:4e3})},P=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=SubDisplayScrollingOnly&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(!s.SubDisplayScrollingOnly),{loading:"Updating Text scrolling settings",success:()=>(n({...s,SubDisplayScrollingOnly:!s.SubDisplayScrollingOnly}),B("Text scrolling settings updated")),error:"Setting failed"},{duration:4e3})},E=()=>{m.a.promise((e=>{const t=`${O("")}/settings?key=DisplayName&value=${e}`;return v.a.get(t).then((e=>e.data))})(e),{loading:"Updating Device Name",success:()=>B("Device Name updated"),error:"Setting failed"},{duration:4e3})},W=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=font&value=${e}`;return v.a.get(t).then((e=>e.data))})(s.font),{loading:"Updating Device Font",success:"Font updated",error:"Setting failed"},{duration:4e3})},z=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=PixelcadeDotType&value=${e}`;return v.a.get(t).then((e=>e.data))})(s.PixelcadeDotType),{loading:"Updating Pixelcade Sub-Display Type",success:"Sub-Display Type updated",error:"Sub-Display Type Updated Failed"},{duration:4e3})},q=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=PixelcadeMiniDisplayType&value=${e}`;return v.a.get(t).then((e=>e.data))})(s.PixelcadeMiniDisplayType),{loading:"Updating Pixelcade Mini Display Type",success:"Pixelcade Mini Display Type Updated",error:"Pixelcade Mini Display Updated Failed"},{duration:4e3})},V=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=PixelcadeOLEDMode&value=${e}`;return v.a.get(t).then((e=>e.data))})(s.PixelcadeOLEDMode),{loading:"Updating Pixelcade Mini OLED Mode",success:"Pixelcade Mini OLED Mode Updated",error:"Pixelcade Mini OLED Mode Update Failed"},{duration:4e3})},H=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=marqueeOverlays&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(!s.marqueeOverlays),{loading:"Updating Marquee Overlay settings",success:()=>(n({...s,marqueeOverlays:!s.marqueeOverlays}),B("Marquee Overlay settings updated")),error:"Setting failed"},{duration:4e3})},G=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=videoLoopMode&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(!s.videoLoopMode),{loading:"Updating Video Loop Mode",success:()=>(n({...s,videoLoopMode:!s.videoLoopMode}),B("Video Loop Mode "+(s.videoLoopMode?"disabled":"enabled"))),error:"Setting failed"},{duration:4e3})},Y=()=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=fuzzyMatch&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(!s.fuzzyMatch),{loading:"Updating Fuzzy Matching settings",success:()=>(n({...s,fuzzyMatch:!s.fuzzyMatch}),B("Fuzzy Matching settings updated")),error:"Setting failed"},{duration:4e3})},K=e=>{s&&m.a.promise((e=>{const t=`${O("")}/settings?key=fuzzyMatchDistance&value=${e}`;return v.a.get(t).then((e=>e.data))})(e),{loading:"Updating Fuzzy Match Distance",success:()=>(n({...s,fuzzyMatchDistance:e}),`Fuzzy Match Distance set to ${e}`),error:"Setting failed"},{duration:4e3})},J=e=>e>=70?"\u25cf\u25cf\u25cf\u25cf":e>=50?"\u25cf\u25cf\u25cf\u25cb":e>=30?"\u25cf\u25cf\u25cb\u25cb":"\u25cf\u25cb\u25cb\u25cb";return Object(b.jsx)("div",{className:"fade-in",children:s&&Object(b.jsxs)("div",{className:"layout-grid",style:{marginTop:"0.5rem",gap:"2rem"},children:[Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("label",{style:{margin:"1rem 0 .5rem 0"},children:"Device Name"}),Object(b.jsx)("input",{style:{height:36,fontSize:"1.2rem",padding:"0 0.4rem"},type:"text",id:"fname",name:"fname",value:e,onChange:e=>{t(e.target.value)}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>E(),children:"Update"})]})]}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("label",{style:{margin:"1rem 0 .5rem 0",fontWeight:"bold"},children:"Device Info"}),r&&Object(b.jsxs)("div",{style:{fontSize:"1rem",lineHeight:"1.6"},children:[Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Name:"})," ",Object(b.jsx)("span",{style:{color:"#666",fontWeight:"normal"},children:r.name})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Hostname:"})," ",Object(b.jsx)("span",{style:{color:"#666",fontWeight:"normal"},children:r.hostname})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Firmware:"})," ",Object(b.jsxs)("span",{style:{color:"#666",fontWeight:"normal"},children:["v",r.firmwareVersion]})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Artwork Version:"})," ",Object(b.jsx)("span",{style:{color:"#666",fontWeight:"normal"},children:r.artworkVersion})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Resolution:"})," ",Object(b.jsxs)("span",{style:{color:"#666",fontWeight:"normal"},children:[r.resolution.width,"x",r.resolution.height]})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Generation:"})," ",Object(b.jsx)("span",{style:{color:"#666",fontWeight:"normal"},children:r.pixelcadeGen})]}),Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Connected Sub-Displays:"})}),Object(b.jsxs)("ul",{style:{marginLeft:"1.5rem",marginTop:"0.5rem",color:"#666",fontWeight:"normal"},children:[r.oled&&Object(b.jsx)("li",{children:"OLED Display"}),r.miniLCD&&Object(b.jsx)("li",{children:"Mini LCD"}),r.dotMatrix&&Object(b.jsx)("li",{children:"Dot Matrix"}),r.sevenSegment&&Object(b.jsx)("li",{children:"Seven Segment"})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Network Status:"})," ",Object(b.jsx)("span",{style:{color:r.hasJoinedNetwork?"green":"red",fontWeight:"normal"},children:r.hasJoinedNetwork?"Connected":"Not Connected"})]}),Object(b.jsxs)("p",{children:[Object(b.jsx)("strong",{children:"Pairing Status:"})," ",Object(b.jsx)("span",{style:{color:r.isPaired?"green":"red",fontWeight:"normal"},children:r.isPaired?"Paired":"Not Paired"})]})]})]}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("label",{style:{margin:"1rem 0 .5rem 0",fontWeight:"bold"},children:"WiFi Setup"}),Object(b.jsx)("p",{style:{marginBottom:"1rem"},children:"Connect to your home WiFi to enable widgets, updates, and other features that require internet access."}),l&&Object(b.jsxs)("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:l.connected?l.hasInternet?"#e8f5e9":"#fff3e0":"#ffebee",borderRadius:"4px",border:"1px solid "+(l.connected?l.hasInternet?"#4caf50":"#ff9800":"#f44336")},children:[Object(b.jsx)("p",{style:{margin:0,fontWeight:"bold",color:l.connected?l.hasInternet?"#2e7d32":"#e65100":"#c62828"},children:l.connected?l.hasInternet?"\u2713 Connected with Internet":"\u26a0 Connected (No Internet)":"\u2717 Not Connected"}),l.connected&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Network:"})," ",l.ssid]}),Object(b.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"IP Address:"})," ",l.ipAddress]}),Object(b.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Signal:"})," ",J(l.signalStrength)," (",l.signalStrength,"%)"]})]})]}),l&&Object(b.jsxs)("p",{style:{margin:"0 0 1rem 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"MAC Address:"})," ",Object(b.jsx)("span",{style:{fontFamily:"monospace",color:"#666"},children:l.macAddress||"Unknown"})]}),C?Object(b.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[Object(b.jsx)("label",{style:{fontWeight:"bold"},children:"Available Networks"}),Object(b.jsxs)("div",{children:[Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:A,disabled:u,style:{marginRight:"0.5rem"},children:u?"Scanning...":"Refresh"}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:()=>{N(!1),g(""),y("")},children:"Cancel"})]})]}),Object(b.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto",border:"1px solid #ddd",borderRadius:"4px",marginBottom:"1rem"},children:u?Object(b.jsx)("p",{style:{padding:"1rem",textAlign:"center",color:"#666"},children:"Scanning for networks..."}):0===i.length?Object(b.jsx)("p",{style:{padding:"1rem",textAlign:"center",color:"#666"},children:"No networks found"}):i.map(((e,t)=>Object(b.jsxs)("div",{onClick:()=>g(e.ssid),style:{padding:"0.75rem",cursor:"pointer",background:p===e.ssid?"#e3f2fd":t%2===0?"#fafafa":"#fff",borderBottom:t<i.length-1?"1px solid #eee":"none",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(b.jsxs)("span",{children:[e.inUse&&Object(b.jsx)("span",{style:{color:"#4caf50",marginRight:"0.5rem"},children:"\u25cf"}),e.ssid]}),Object(b.jsxs)("span",{style:{color:"#666",fontSize:"0.85rem"},children:[J(e.signal)," ",""!==e.security&&"\ud83d\udd12"]})]},`${e.ssid}-${t}`)))}),p&&Object(b.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#666"},children:['Password for "',p,'"']}),Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(b.jsx)("input",{style:{height:36,fontSize:"1rem",padding:"0 0.6rem",width:"100%",maxWidth:"250px"},type:S?"text":"password",placeholder:"Enter WiFi password",value:f,onChange:e=>y(e.target.value)}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:()=>w(!S),style:{minWidth:"80px"},children:S?"Hide":"Show"})]})]}),p&&Object(b.jsx)(k.a,{variant:"contained",color:"primary",onClick:async()=>{if(p){x(!0);try{const e=await fetch(`http://${$}:8080/v2/wifi/connect`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ssid:p,password:f})}),t=await e.json();t.success?(m.a.success(t.message),N(!1),g(""),y(""),setTimeout(M,2e3)):m.a.error(t.message||"Connection failed")}catch(e){m.a.error("Failed to connect to network")}finally{x(!1)}}else m.a.error("Please select a network")},disabled:h,children:h?"Connecting...":`Connect to ${p}`})]}):Object(b.jsx)(k.a,{variant:"contained",color:"primary",onClick:()=>{N(!0),A()},style:{marginBottom:"1rem"},children:null!==l&&void 0!==l&&l.connected?"Change WiFi Network":"Connect to WiFi"}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:M,style:{marginTop:C?"0":"0.5rem"},children:"Refresh Status"})]}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("label",{style:{margin:"1rem 0 .5rem 0",fontWeight:"bold"},children:"USB Storage"}),Object(b.jsx)("p",{style:{marginBottom:"1rem"},children:"Plug in a USB drive to expand your marquee storage. USB storage takes priority over internal storage."}),T?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{style:{marginBottom:"1rem",padding:"0.75rem",background:T.readyForUse?"#e8f5e9":T.usbDetected?"#fff3e0":"#f5f5f5",borderRadius:"4px",border:"1px solid "+(T.readyForUse?"#4caf50":T.usbDetected?"#ff9800":"#ddd")},children:T.readyForUse?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#2e7d32"},children:"\u2713 USB Storage Ready"}),Object(b.jsxs)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Label:"})," ",T.usbLabel||"PixelUSB"]}),Object(b.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Free Space:"})," ",D(T.usbFreeBytes)," / ",D(T.usbTotalBytes)]}),Object(b.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Mount Point:"})," ",Object(b.jsx)("span",{style:{fontFamily:"monospace"},children:T.usbMountPoint})]})]}):T.usbMounted?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#e65100"},children:"\u26a0 USB Mounted (Missing Folders)"}),Object(b.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:"The USB drive is mounted but missing required folders."}),Object(b.jsxs)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",color:"#666"},children:[!T.hasLCDFolder&&"\u2022 Missing lcdmarquees folder",!T.hasLCDFolder&&!T.hasMP4Folder&&Object(b.jsx)("br",{}),!T.hasMP4Folder&&"\u2022 Missing mp4marquees folder"]})]}):T.usbDetected?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{style:{margin:0,fontWeight:"bold",color:"#e65100"},children:"\u26a0 USB Detected (Not Mounted)"}),Object(b.jsxs)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem"},children:[Object(b.jsx)("strong",{children:"Device:"})," ",Object(b.jsx)("span",{style:{fontFamily:"monospace"},children:T.usbDevice})]}),Object(b.jsx)("p",{style:{margin:"0.25rem 0 0 0",fontSize:"0.9rem",color:"#666"},children:"This USB drive can be formatted for Pixelcade use."})]}):Object(b.jsx)("p",{style:{margin:0,color:"#666"},children:"No USB drive detected. Plug in a USB drive to use external storage."})}),T.canFormat&&Object(b.jsx)(k.a,{variant:"contained",color:"secondary",onClick:async()=>{if(null!==T&&void 0!==T&&T.usbDevice){if(window.confirm("This will ERASE ALL DATA on the USB drive and format it for Pixelcade use. Continue?")){R(!0);try{const e=await fetch(`http://${$}:8080/v2/usb/format`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({device:T.usbDevice,label:"PixelUSB"})}),t=await e.json();t.success?(m.a.success(t.message),setTimeout(U,2e3)):m.a.error(t.message||"Format failed")}catch(e){m.a.error("Failed to format USB drive")}finally{R(!1)}}}else m.a.error("No USB device detected")},disabled:L,style:{marginBottom:"1rem"},children:L?"Formatting...":"Format USB for Pixelcade"}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:U,children:"Refresh Status"})]}):Object(b.jsx)("p",{style:{color:"#666"},children:"Loading USB status..."})]}),Object(b.jsxs)("div",{className:"settings",children:[Object(b.jsx)("p",{children:"When disabled, Pixelcade will not show video marquees and will show static marquees only."}),Object(b.jsx)(ne.a,{style:{marginTop:"1.2rem"},control:Object(b.jsx)(re.a,{checked:!s.ImageMarqueesOnly,onChange:()=>I(),color:"primary"}),label:"Show Video Marquees"})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("p",{children:"When enabled, video marquees will continue to loop indefinitely and no longer land on the static marquee."}),Object(b.jsx)(ne.a,{style:{marginTop:"1.2rem"},control:Object(b.jsx)(re.a,{checked:s.videoLoopMode,onChange:()=>G(),color:"primary"}),label:"Loop Video Marquees Indefinitely"})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsxs)("p",{children:["Disabling splash screens means Pixelcade will not display now playing splash screens, high scores, or marquee overlays. ",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Only a Pixelcade LED marquee (if connected) or a Pixelcade Dot sub-display (if connected) will display scrolling text for now playing game launches and high scores."]}),Object(b.jsx)(ne.a,{style:{marginTop:"1.2rem"},control:Object(b.jsx)(re.a,{checked:s.SubDisplayScrollingOnly,onChange:()=>P(),color:"primary"}),label:"Disable Splash Screens"})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0"},children:"Font"}),Object(b.jsx)(ce.c,{selectedValue:s.font,name:"font",options:oe.map((e=>({value:e,text:e}))),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;n({...s,font:t})}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>W(),children:"Update"})]})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("p",{children:"When disabled, Pixelcade will not show overlays such as high scores in a small bar on the bottom of game marquees."}),Object(b.jsx)(ne.a,{style:{marginTop:"1.2rem"},control:Object(b.jsx)(re.a,{checked:s.marqueeOverlays,onChange:()=>H(),color:"primary"}),label:"Show Marquee Overlays"})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("p",{children:"When enabled, will attempt to match artwork when there is not an exact file match. Ex. mame-game.jpg will match with mame-gamex(USA).jpg"}),Object(b.jsx)(ne.a,{style:{marginTop:"1.2rem"},control:Object(b.jsx)(re.a,{checked:s.fuzzyMatch,onChange:()=>Y(),color:"primary"}),label:"Fuzzy Matching"}),s.fuzzyMatch&&Object(b.jsxs)("div",{style:{marginTop:"1.5rem",paddingLeft:"1rem"},children:[Object(b.jsxs)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#666"},children:["Fuzzy Match Distance (0-10): ",s.fuzzyMatchDistance]}),Object(b.jsx)("input",{type:"range",min:"0",max:"10",value:s.fuzzyMatchDistance,onChange:e=>K(Number(e.target.value)),style:{width:"100%",maxWidth:"300px"}}),Object(b.jsx)("p",{style:{fontSize:"0.9rem",color:"#666",marginTop:"0.5rem"},children:"Lower values require closer matches. Higher values allow more variation."})]})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0"},children:"Pixelcade Dot Sub-Display Type"}),Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0",display:"block",color:"#666"},children:"Please Select Manually"}),Object(b.jsx)(ce.c,{selectedValue:s.PixelcadeDotType,name:"PixelcadeDotType",options:[{text:"Matrix",value:"matrix"},{text:"7 Segment",value:"7segment"},{text:"None",value:"none"}],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;n({...s,PixelcadeDotType:t})}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>z(),children:"Update"})]})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0"},children:"Pixelcade Mini Dot Sub-Display Type"}),Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0",display:"block",color:"#666"},children:"Auto Detected"}),Object(b.jsx)(ce.c,{selectedValue:s.PixelcadeMiniDisplayType,name:"PixelcadeMiniDisplayType",options:[{text:"Mini OLED",value:"oled"},{text:"Mini LCD 4 Lines",value:"lcd4line"},{text:"Mini LCD 2 Lines",value:"lcd2line"},{text:"None",value:"none"}],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;n({...s,PixelcadeMiniDisplayType:t})}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>q(),children:"Update"})]})]}),Object(b.jsxs)("div",{className:"settings",style:{marginTop:"2rem"},children:[Object(b.jsx)("label",{style:{margin:".5rem 0 .5rem 0"},children:"Pixelcade Mini OLED Mode"}),Object(b.jsx)(ce.c,{selectedValue:s.PixelcadeOLEDMode,name:"PixelcadeOLEDMode",options:[{text:"Marquee Mode",value:"marquee"},{text:"Metadata Mode",value:"metadata"}],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;n({...s,PixelcadeOLEDMode:t})}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>V(),children:"Update"})]})]})]})})};var de=()=>{const[e,t]=Object(a.useState)("");return Object(b.jsx)("div",{className:"layout-grid fade-in",style:{marginTop:"0.5rem"},children:Object(b.jsxs)("div",{className:"settings",style:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)("label",{style:{margin:"1rem 0 .5rem 0"},children:"Scrolling Text"}),Object(b.jsx)("input",{style:{height:36,fontSize:"1.2rem",padding:"0 0.4rem"},type:"text",id:"fname",name:"fname",value:e,onChange:e=>{t(e.target.value)}}),Object(b.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gridGap:"1rem"},children:[Object(b.jsx)("div",{}),Object(b.jsx)(k.a,{style:{marginTop:"1.2rem"},variant:"contained",color:"primary",onClick:()=>{m.a.promise((e=>{const t=`${O("")}/text?t=${e}`;return v.a.get(t)})(e),{loading:"Sending message to marquee",success:"Message sent",error:"Failed"},{duration:4e3})},children:"Send Text"})]})]})})},ue=s(202),je=s(201),me=s(203),he=s(204),be=s(205),xe=s(206),pe=s(207),ge=s(208);const ve=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const n=t.length>0?t.join(","):"",r=`${O("")}/sports/start?league=${encodeURIComponent(e)}&teams=${encodeURIComponent(n)}&refresh=${s}&speed=${a}`;return v.a.get(r).then((e=>e.data))},Oe=()=>{const e=`${O("")}/sports/stop`;return v.a.get(e).then((e=>e.data))},fe=()=>{const e=`${O("")}/sports/status`;return v.a.get(e).then((e=>e.data))},ye=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const a=`${O("")}/sports/start-favorites?favorites=${encodeURIComponent(e)}&refresh=${t}&speed=${s}`;return v.a.get(a).then((e=>e.data))},Se="tickerStarted",we=e=>{window.dispatchEvent(new CustomEvent(Se,{detail:{tickerType:e}}))},ke=e=>{const t=t=>{e(t.detail.tickerType)};return window.addEventListener(Se,t),()=>window.removeEventListener(Se,t)};s(145);var Ce=()=>{const e=Object(c.o)(),[t,s]=Object(a.useState)({sports:!1,stocks:!1,weather:!1,news:!1,clock:!1}),[n,r]=Object(a.useState)({sports:!1,stocks:!1,weather:!1,news:!1,clock:!1}),[o,i]=Object(a.useState)(null),[d,u]=Object(a.useState)(!0);Object(a.useEffect)((()=>{(async()=>{try{var e,t,a,n;const r=await(()=>{const e=`${O()}/wifi/status`;return v.a.get(e).then((e=>{var t;return{hasInternet:(null===(t=e.data)||void 0===t?void 0:t.hasInternet)||!1}})).catch((()=>({hasInternet:!1})))})();u(r.hasInternet);const o=await le();i(o);const l=await fe(),c=await v.a.get(`${O("")}/stocks/status`),d=await v.a.get(`${O("")}/weather/status`),j=await v.a.get(`${O("")}/news/status`),m=await v.a.get(`${O("")}/clock/status`);s({sports:(null===l||void 0===l?void 0:l.running)||!1,stocks:(null===(e=c.data)||void 0===e?void 0:e.running)||!1,weather:(null===(t=d.data)||void 0===t?void 0:t.running)||!1,news:(null===(a=j.data)||void 0===a?void 0:a.running)||!1,clock:(null===(n=m.data)||void 0===n?void 0:n.running)||!1})}catch(r){console.error("Error fetching ticker statuses:",r)}})();const e=ke((e=>{s({sports:"sports"===e,stocks:"stocks"===e,weather:"weather"===e,news:"news"===e,clock:"clock"===e})}));return()=>e()}),[]);const j=e=>!d&&!t[e];return Object(b.jsxs)("div",{className:"widgets-menu fade-in",children:[!d&&Object(b.jsxs)("div",{className:"offline-banner",children:[Object(b.jsx)(je.a,{style:{marginRight:"0.5rem"}}),Object(b.jsxs)("span",{children:["No internet connection. Some widgets require internet."," ",Object(b.jsx)(l.b,{to:"/settings",className:"offline-link",children:"Configure WiFi in Settings"})]})]}),Object(b.jsxs)("div",{className:"widgets-grid",children:[Object(b.jsxs)(k.a,{variant:"contained",className:`widget-button ${t.sports?"active":""} ${j("sports")?"no-internet":""}`,onClick:async()=>{if(t.sports)try{await Oe(),s((e=>({...e,sports:!1}))),m.a.success("Sports Ticker Stopped")}catch(e){m.a.error("Failed to stop Sports Ticker")}else{r((e=>({...e,sports:!0})));try{const e=(null===o||void 0===o?void 0:o.sportTickerMode)||"league",t=((null===o||void 0===o?void 0:o.sportTickerRefresh)||60)/60,a=(null===o||void 0===o?void 0:o.sportScrollSpeed)||5;if("favorites"===e&&null!==o&&void 0!==o&&o.sportFavoriteTeams)await ye(o.sportFavoriteTeams,t,a);else{if(null===o||void 0===o||!o.sportLeagues)return m.a.error("Please configure Sports settings first"),void r((e=>({...e,sports:!1})));{const e=null!==o&&void 0!==o&&o.sportTeamCodes?o.sportTeamCodes.split(","):[];await ve(o.sportLeagues,e,t,a)}}s({sports:!0,stocks:!1,weather:!1,news:!1,clock:!1}),we("sports"),m.a.success("Sports Ticker Started!")}catch(e){m.a.error("Failed to start Sports Ticker")}finally{r((e=>({...e,sports:!1})))}}},disabled:n.sports||j("sports"),title:j("sports")?"Requires internet connection":"",children:[n.sports?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff"}}):t.sports?Object(b.jsx)(me.a,{className:"widget-icon"}):Object(b.jsx)(he.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:t.sports?"Stop Sports":"Sports Scoreboard"}),j("sports")&&Object(b.jsx)("span",{className:"requires-internet",children:"Requires Internet"})]}),Object(b.jsxs)(k.a,{variant:"contained",className:`widget-button ${t.stocks?"active":""} ${j("stocks")?"no-internet":""}`,onClick:async()=>{if(t.stocks)try{await v.a.get(`${O("")}/stocks/stop`),s((e=>({...e,stocks:!1}))),m.a.success("Stocks Ticker Stopped")}catch(e){m.a.error("Failed to stop Stocks Ticker")}else{r((e=>({...e,stocks:!0})));try{const e=(null===o||void 0===o?void 0:o.stockSymbols)||"MSFT,GOOG,AMZN",t=(null===o||void 0===o?void 0:o.stockTickerRefresh)||5,a=(null===o||void 0===o?void 0:o.stockScrollSpeed)||5,n=(null===o||void 0===o?void 0:o.stockFont)||"LiberationSans-Bold";await v.a.get(`${O("")}/stocks/start?symbols=${encodeURIComponent(e)}&refresh=${t}&speed=${a}&font=${encodeURIComponent(n)}`),s({sports:!1,stocks:!0,weather:!1,news:!1,clock:!1}),we("stocks"),m.a.success("Stocks Ticker Started!")}catch(e){m.a.error("Failed to start Stocks Ticker")}finally{r((e=>({...e,stocks:!1})))}}},disabled:n.stocks||j("stocks"),title:j("stocks")?"Requires internet connection":"",children:[n.stocks?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff"}}):t.stocks?Object(b.jsx)(me.a,{className:"widget-icon"}):Object(b.jsx)(be.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:t.stocks?"Stop Stocks":"Stocks & Crypto"}),j("stocks")&&Object(b.jsx)("span",{className:"requires-internet",children:"Requires Internet"})]}),Object(b.jsxs)(k.a,{variant:"contained",className:`widget-button ${t.weather?"active":""} ${j("weather")?"no-internet":""}`,onClick:async()=>{if(t.weather)try{await v.a.get(`${O("")}/weather/stop`),s((e=>({...e,weather:!1}))),m.a.success("Weather Widget Stopped")}catch(e){m.a.error("Failed to stop Weather Widget")}else{r((e=>({...e,weather:!0})));try{const e=(null===o||void 0===o?void 0:o.weatherLocation)||"95050",t=(null===o||void 0===o?void 0:o.weatherUnits)||"fahrenheit",a=(null===o||void 0===o?void 0:o.weatherForecast)||"1day";await v.a.get(`${O("")}/weather/start?location=${encodeURIComponent(e)}&units=${t}&forecast=${a}`),s({sports:!1,stocks:!1,weather:!0,news:!1,clock:!1}),we("weather"),m.a.success("Weather Widget Started!")}catch(e){m.a.error("Failed to start Weather Widget")}finally{r((e=>({...e,weather:!1})))}}},disabled:n.weather||j("weather"),title:j("weather")?"Requires internet connection":"",children:[n.weather?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff"}}):t.weather?Object(b.jsx)(me.a,{className:"widget-icon"}):Object(b.jsx)(xe.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:t.weather?"Stop Weather":"Weather"}),j("weather")&&Object(b.jsx)("span",{className:"requires-internet",children:"Requires Internet"})]}),Object(b.jsxs)(k.a,{variant:"contained",className:`widget-button ${t.news?"active":""} ${j("news")?"no-internet":""}`,onClick:async()=>{if(t.news)try{await v.a.get(`${O("")}/news/stop`),s((e=>({...e,news:!1}))),m.a.success("News Ticker Stopped")}catch(e){m.a.error("Failed to stop News Ticker")}else{r((e=>({...e,news:!0})));try{const e=(null===o||void 0===o?void 0:o.newsSources)||"bbc",t=(null===o||void 0===o?void 0:o.newsTickerRefresh)||5,a=(null===o||void 0===o?void 0:o.newsScrollSpeed)||5;await v.a.get(`${O("")}/news/start?sources=${encodeURIComponent(e)}&refresh=${t}&speed=${a}`),s({sports:!1,stocks:!1,weather:!1,news:!0,clock:!1}),we("news"),m.a.success("News Ticker Started!")}catch(e){m.a.error("Failed to start News Ticker")}finally{r((e=>({...e,news:!1})))}}},disabled:n.news||j("news"),title:j("news")?"Requires internet connection":"",children:[n.news?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff"}}):t.news?Object(b.jsx)(me.a,{className:"widget-icon"}):Object(b.jsx)(pe.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:t.news?"Stop News":"News"}),j("news")&&Object(b.jsx)("span",{className:"requires-internet",children:"Requires Internet"})]}),Object(b.jsxs)(k.a,{variant:"contained",className:"widget-button "+(t.clock?"active":""),onClick:async()=>{if(t.clock)try{await v.a.get(`${O("")}/clock/stop`),s((e=>({...e,clock:!1}))),m.a.success("Clock Widget Stopped")}catch(e){m.a.error("Failed to stop Clock Widget")}else{r((e=>({...e,clock:!0})));try{const e=(null===o||void 0===o?void 0:o.clockFace)||"cyberpunk",t="yes"===(null===o||void 0===o?void 0:o.clockUse12Hour),a="yes"===(null===o||void 0===o?void 0:o.clockShowSeconds);await v.a.get(`${O("")}/clock/start?face=${e}&use12Hour=${t}&showSeconds=${a}`),s({sports:!1,stocks:!1,weather:!1,news:!1,clock:!0}),we("clock"),m.a.success("Clock Widget Started!")}catch(e){m.a.error("Failed to start Clock Widget")}finally{r((e=>({...e,clock:!1})))}}},disabled:n.clock,children:[n.clock?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff"}}):t.clock?Object(b.jsx)(me.a,{className:"widget-icon"}):Object(b.jsx)(ge.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:t.clock?"Stop Clock":"Clock"})]}),Object(b.jsxs)(k.a,{variant:"contained",className:"widget-button settings-button",onClick:()=>e("/widget-settings"),children:[Object(b.jsx)(X.a,{className:"widget-icon"}),Object(b.jsx)("span",{className:"widget-label",children:"Widget Settings"})]})]})]})},Ne=s(209);const Te=[{text:"NFL",value:"nfl",sport:"football"},{text:"NBA",value:"nba",sport:"basketball"},{text:"MLB",value:"mlb",sport:"baseball"},{text:"NHL",value:"nhl",sport:"hockey"},{text:"NCAAF (College Football)",value:"college-football",sport:"football"},{text:"NCAAB (College Basketball)",value:"mens-college-basketball",sport:"basketball"},{text:"NCAAW (Women's Basketball)",value:"womens-college-basketball",sport:"basketball"},{text:"WNBA",value:"wnba",sport:"basketball"},{text:"MLS",value:"usa.1",sport:"soccer"},{text:"EPL (Premier League)",value:"eng.1",sport:"soccer"},{text:"La Liga (Spain)",value:"esp.1",sport:"soccer"},{text:"Bundesliga (Germany)",value:"ger.1",sport:"soccer"},{text:"Serie A (Italy)",value:"ita.1",sport:"soccer"},{text:"Ligue 1 (France)",value:"fra.1",sport:"soccer"}],Fe={nfl:[{text:"Arizona Cardinals",value:"ARI"},{text:"Atlanta Falcons",value:"ATL"},{text:"Baltimore Ravens",value:"BAL"},{text:"Buffalo Bills",value:"BUF"},{text:"Carolina Panthers",value:"CAR"},{text:"Chicago Bears",value:"CHI"},{text:"Cincinnati Bengals",value:"CIN"},{text:"Cleveland Browns",value:"CLE"},{text:"Dallas Cowboys",value:"DAL"},{text:"Denver Broncos",value:"DEN"},{text:"Detroit Lions",value:"DET"},{text:"Green Bay Packers",value:"GB"},{text:"Houston Texans",value:"HOU"},{text:"Indianapolis Colts",value:"IND"},{text:"Jacksonville Jaguars",value:"JAX"},{text:"Kansas City Chiefs",value:"KC"},{text:"Las Vegas Raiders",value:"LV"},{text:"Los Angeles Chargers",value:"LAC"},{text:"Los Angeles Rams",value:"LAR"},{text:"Miami Dolphins",value:"MIA"},{text:"Minnesota Vikings",value:"MIN"},{text:"New England Patriots",value:"NE"},{text:"New Orleans Saints",value:"NO"},{text:"New York Giants",value:"NYG"},{text:"New York Jets",value:"NYJ"},{text:"Philadelphia Eagles",value:"PHI"},{text:"Pittsburgh Steelers",value:"PIT"},{text:"San Francisco 49ers",value:"SF"},{text:"Seattle Seahawks",value:"SEA"},{text:"Tampa Bay Buccaneers",value:"TB"},{text:"Tennessee Titans",value:"TEN"},{text:"Washington Commanders",value:"WAS"}],nba:[{text:"Atlanta Hawks",value:"ATL"},{text:"Boston Celtics",value:"BOS"},{text:"Brooklyn Nets",value:"BKN"},{text:"Charlotte Hornets",value:"CHA"},{text:"Chicago Bulls",value:"CHI"},{text:"Cleveland Cavaliers",value:"CLE"},{text:"Dallas Mavericks",value:"DAL"},{text:"Denver Nuggets",value:"DEN"},{text:"Detroit Pistons",value:"DET"},{text:"Golden State Warriors",value:"GS"},{text:"Houston Rockets",value:"HOU"},{text:"Indiana Pacers",value:"IND"},{text:"Los Angeles Clippers",value:"LAC"},{text:"Los Angeles Lakers",value:"LAL"},{text:"Memphis Grizzlies",value:"MEM"},{text:"Miami Heat",value:"MIA"},{text:"Milwaukee Bucks",value:"MIL"},{text:"Minnesota Timberwolves",value:"MIN"},{text:"New Orleans Pelicans",value:"NO"},{text:"New York Knicks",value:"NYK"},{text:"Oklahoma City Thunder",value:"OKC"},{text:"Orlando Magic",value:"ORL"},{text:"Philadelphia 76ers",value:"PHI"},{text:"Phoenix Suns",value:"PHX"},{text:"Portland Trail Blazers",value:"POR"},{text:"Sacramento Kings",value:"SAC"},{text:"San Antonio Spurs",value:"SAS"},{text:"Toronto Raptors",value:"TOR"},{text:"Utah Jazz",value:"UTA"},{text:"Washington Wizards",value:"WAS"}],mlb:[{text:"Arizona Diamondbacks",value:"ARI"},{text:"Atlanta Braves",value:"ATL"},{text:"Baltimore Orioles",value:"BAL"},{text:"Boston Red Sox",value:"BOS"},{text:"Chicago Cubs",value:"CHC"},{text:"Chicago White Sox",value:"CHW"},{text:"Cincinnati Reds",value:"CIN"},{text:"Cleveland Guardians",value:"CLE"},{text:"Colorado Rockies",value:"COL"},{text:"Detroit Tigers",value:"DET"},{text:"Houston Astros",value:"HOU"},{text:"Kansas City Royals",value:"KC"},{text:"Los Angeles Angels",value:"LAA"},{text:"Los Angeles Dodgers",value:"LAD"},{text:"Miami Marlins",value:"MIA"},{text:"Milwaukee Brewers",value:"MIL"},{text:"Minnesota Twins",value:"MIN"},{text:"New York Mets",value:"NYM"},{text:"New York Yankees",value:"NYY"},{text:"Oakland Athletics",value:"OAK"},{text:"Philadelphia Phillies",value:"PHI"},{text:"Pittsburgh Pirates",value:"PIT"},{text:"San Diego Padres",value:"SD"},{text:"San Francisco Giants",value:"SF"},{text:"Seattle Mariners",value:"SEA"},{text:"St. Louis Cardinals",value:"STL"},{text:"Tampa Bay Rays",value:"TB"},{text:"Texas Rangers",value:"TEX"},{text:"Toronto Blue Jays",value:"TOR"},{text:"Washington Nationals",value:"WAS"}],nhl:[{text:"Anaheim Ducks",value:"ANA"},{text:"Utah Hockey Club",value:"UTA"},{text:"Boston Bruins",value:"BOS"},{text:"Buffalo Sabres",value:"BUF"},{text:"Calgary Flames",value:"CGY"},{text:"Carolina Hurricanes",value:"CAR"},{text:"Chicago Blackhawks",value:"CHI"},{text:"Colorado Avalanche",value:"COL"},{text:"Columbus Blue Jackets",value:"CBJ"},{text:"Dallas Stars",value:"DAL"},{text:"Detroit Red Wings",value:"DET"},{text:"Edmonton Oilers",value:"EDM"},{text:"Florida Panthers",value:"FLA"},{text:"Los Angeles Kings",value:"LA"},{text:"Minnesota Wild",value:"MIN"},{text:"Montreal Canadiens",value:"MTL"},{text:"Nashville Predators",value:"NSH"},{text:"New Jersey Devils",value:"NJ"},{text:"New York Islanders",value:"NYI"},{text:"New York Rangers",value:"NYR"},{text:"Ottawa Senators",value:"OTT"},{text:"Philadelphia Flyers",value:"PHI"},{text:"Pittsburgh Penguins",value:"PIT"},{text:"San Jose Sharks",value:"SJ"},{text:"Seattle Kraken",value:"SEA"},{text:"St. Louis Blues",value:"STL"},{text:"Tampa Bay Lightning",value:"TB"},{text:"Toronto Maple Leafs",value:"TOR"},{text:"Vancouver Canucks",value:"VAN"},{text:"Vegas Golden Knights",value:"VGK"},{text:"Washington Capitals",value:"WSH"},{text:"Winnipeg Jets",value:"WPG"}],wnba:[{text:"Atlanta Dream",value:"ATL"},{text:"Chicago Sky",value:"CHI"},{text:"Connecticut Sun",value:"CONN"},{text:"Dallas Wings",value:"DAL"},{text:"Golden State Valkyries",value:"GS"},{text:"Indiana Fever",value:"IND"},{text:"Las Vegas Aces",value:"LV"},{text:"Los Angeles Sparks",value:"LA"},{text:"Minnesota Lynx",value:"MIN"},{text:"New York Liberty",value:"NY"},{text:"Phoenix Mercury",value:"PHX"},{text:"Seattle Storm",value:"SEA"},{text:"Washington Mystics",value:"WAS"}],"usa.1":[{text:"Atlanta United",value:"ATL"},{text:"Austin FC",value:"ATX"},{text:"Charlotte FC",value:"CLT"},{text:"Chicago Fire",value:"CHI"},{text:"FC Cincinnati",value:"CIN"},{text:"Colorado Rapids",value:"COL"},{text:"Columbus Crew",value:"CLB"},{text:"D.C. United",value:"DC"},{text:"FC Dallas",value:"DAL"},{text:"Houston Dynamo",value:"HOU"},{text:"Inter Miami",value:"MIA"},{text:"LA Galaxy",value:"LA"},{text:"Los Angeles FC",value:"LAFC"},{text:"Minnesota United",value:"MIN"},{text:"CF Montreal",value:"MTL"},{text:"Nashville SC",value:"NSH"},{text:"New England Revolution",value:"NE"},{text:"New York City FC",value:"NYC"},{text:"New York Red Bulls",value:"RBNY"},{text:"Orlando City",value:"ORL"},{text:"Philadelphia Union",value:"PHI"},{text:"Portland Timbers",value:"POR"},{text:"Real Salt Lake",value:"RSL"},{text:"San Jose Earthquakes",value:"SJ"},{text:"Seattle Sounders",value:"SEA"},{text:"Sporting Kansas City",value:"SKC"},{text:"St. Louis City SC",value:"STL"},{text:"Toronto FC",value:"TOR"},{text:"Vancouver Whitecaps",value:"VAN"}],"eng.1":[{text:"Arsenal",value:"ARS"},{text:"Aston Villa",value:"AVL"},{text:"Bournemouth",value:"BOU"},{text:"Brentford",value:"BRE"},{text:"Brighton",value:"BHA"},{text:"Chelsea",value:"CHE"},{text:"Crystal Palace",value:"CRY"},{text:"Everton",value:"EVE"},{text:"Fulham",value:"FUL"},{text:"Ipswich Town",value:"IPS"},{text:"Leicester City",value:"LEI"},{text:"Liverpool",value:"LIV"},{text:"Manchester City",value:"MCI"},{text:"Manchester United",value:"MUN"},{text:"Newcastle United",value:"NEW"},{text:"Nottingham Forest",value:"NFO"},{text:"Southampton",value:"SOU"},{text:"Tottenham Hotspur",value:"TOT"},{text:"West Ham United",value:"WHU"},{text:"Wolverhampton",value:"WOL"}],"esp.1":[{text:"Athletic Bilbao",value:"ATH"},{text:"Atl\xe9tico Madrid",value:"ATM"},{text:"Barcelona",value:"BAR"},{text:"Celta Vigo",value:"CEL"},{text:"Espanyol",value:"ESP"},{text:"Getafe",value:"GET"},{text:"Girona",value:"GIR"},{text:"Las Palmas",value:"LPA"},{text:"Legan\xe9s",value:"LEG"},{text:"Mallorca",value:"MLL"},{text:"Osasuna",value:"OSA"},{text:"Rayo Vallecano",value:"RAY"},{text:"Real Betis",value:"BET"},{text:"Real Madrid",value:"RMA"},{text:"Real Sociedad",value:"RSO"},{text:"Real Valladolid",value:"VLL"},{text:"Sevilla",value:"SEV"},{text:"Valencia",value:"VAL"},{text:"Villarreal",value:"VIL"}],"ger.1":[{text:"Augsburg",value:"AUG"},{text:"Bayern Munich",value:"BAY"},{text:"Bochum",value:"BOC"},{text:"Borussia Dortmund",value:"DOR"},{text:"Borussia M'gladbach",value:"BMG"},{text:"Eintracht Frankfurt",value:"SGE"},{text:"Freiburg",value:"FRE"},{text:"Heidenheim",value:"HDH"},{text:"Hoffenheim",value:"TSG"},{text:"Holstein Kiel",value:"KIE"},{text:"Mainz 05",value:"MAI"},{text:"RB Leipzig",value:"RBL"},{text:"St. Pauli",value:"STP"},{text:"Stuttgart",value:"VFB"},{text:"Union Berlin",value:"FCU"},{text:"Werder Bremen",value:"WER"},{text:"Wolfsburg",value:"WOB"}],"ita.1":[{text:"AC Milan",value:"MIL"},{text:"Atalanta",value:"ATA"},{text:"Bologna",value:"BOL"},{text:"Cagliari",value:"CAG"},{text:"Como",value:"COM"},{text:"Empoli",value:"EMP"},{text:"Fiorentina",value:"FIO"},{text:"Genoa",value:"GEN"},{text:"Inter Milan",value:"INT"},{text:"Juventus",value:"JUV"},{text:"Lazio",value:"LAZ"},{text:"Lecce",value:"LEC"},{text:"Monza",value:"MON"},{text:"Napoli",value:"NAP"},{text:"Parma",value:"PAR"},{text:"Roma",value:"ROM"},{text:"Torino",value:"TOR"},{text:"Udinese",value:"UDI"},{text:"Venezia",value:"VEN"},{text:"Verona",value:"VER"}],"fra.1":[{text:"Angers",value:"ANG"},{text:"Auxerre",value:"AUX"},{text:"Brest",value:"BRE"},{text:"Le Havre",value:"HAV"},{text:"Lens",value:"LEN"},{text:"Lille",value:"LIL"},{text:"Lyon",value:"LYO"},{text:"Marseille",value:"MAR"},{text:"Monaco",value:"MON"},{text:"Montpellier",value:"MTP"},{text:"Nantes",value:"NAN"},{text:"Nice",value:"NIC"},{text:"Paris Saint-Germain",value:"PSG"},{text:"Reims",value:"REI"},{text:"Rennes",value:"REN"},{text:"Saint-\xc9tienne",value:"STE"},{text:"Strasbourg",value:"STR"},{text:"Toulouse",value:"TOU"}]},Le=[{text:"15 seconds",value:"15"},{text:"30 seconds",value:"30"},{text:"1 minute",value:"60"},{text:"2 minutes",value:"120"},{text:"3 minutes",value:"180"},{text:"4 minutes",value:"240"},{text:"5 minutes",value:"300"},{text:"15 minutes",value:"900"},{text:"30 minutes",value:"1800"},{text:"1 hour",value:"3600"},{text:"2 hours",value:"7200"}],Re=[{text:"Slow",value:"2"},{text:"Normal",value:"5"},{text:"Fast",value:"10"},{text:"Very Fast",value:"15"}];var $e=e=>{let{onTickerStart:t}=e;const[s,n]=Object(a.useState)({sportLeagues:"",sportTeamCodes:"",sportTickerRefresh:60,sportScrollSpeed:5,sportFavoriteTeams:"",sportTickerMode:"league",sportDarkMode:!1}),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(""),[i,d]=Object(a.useState)([]),[u,j]=Object(a.useState)(5),[h,x]=Object(a.useState)([]),[p,g]=Object(a.useState)("league"),[f,y]=Object(a.useState)(""),[S,w]=Object(a.useState)(!1),[C,N]=Object(a.useState)(!1),T=e=>e.map((e=>`${e.league}:${e.team}`)).join(",");Object(a.useEffect)((()=>{le().then((e=>{if(e){const s=e.sportLeagues||"",a=e.sportTeamCodes||"",r=e.sportFavoriteTeams||"",o=e.sportScrollSpeed||5,l=e.sportTickerRefresh||60,i="favorites"===e.sportTickerMode?"favorites":"league",u=!0===e.sportDarkMode;console.log("[SportsTickerWidget] Loaded settings:",{sportLeagues:s,sportTeamCodes:a,sportScrollSpeed:o,sportTickerRefresh:l,sportTickerMode:i,sportFavoriteTeams:r,sportDarkMode:u}),n({sportLeagues:s,sportTeamCodes:a,sportTickerRefresh:l,sportScrollSpeed:o,sportFavoriteTeams:r,sportTickerMode:i,sportDarkMode:u}),c(s),j(o),g(i),a&&d(a.split(",").map((e=>e.trim())).filter((e=>e))),r&&x((t=r)?t.split(",").map((e=>{const[t,s]=e.split(":");return{league:(null===t||void 0===t?void 0:t.toLowerCase())||"",team:(null===s||void 0===s?void 0:s.toUpperCase())||""}})).filter((e=>e.league&&e.team)):[]),N(!0)}var t;return fe()})).then((e=>{e&&o(e.running||!1)})).catch((e=>{console.error("[SportsTickerWidget] Error loading settings:",e),o(!1)}));const e=ke((e=>{"sports"!==e&&o(!1)}));return()=>e()}),[]);const F=async(e,t,s,a)=>{if(e)try{const n=s/60;await ve(e,t,n,null!==a&&void 0!==a?a:u),o(!0),we("sports")}catch(n){console.error("Failed to restart sports ticker",n)}},L=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e4;const t=Math.floor(e/500);for(let a=0;a<t;a++){try{if((await fe()).ready)return!0}catch(s){}await new Promise((e=>setTimeout(e,500)))}return!1},R=(e,t)=>((e,t)=>{const s=`${O("")}/settings?key=${e}&value=${encodeURIComponent(t)}`;return v.a.get(s).then((e=>e.data))})(e,t),$=(e,t)=>{const s=t||l;if(!s)return e;const a=Fe[s];if(!a)return e;const n=a.find((t=>t.value===e));return n?n.text:e},M=e=>{const t=Te.find((t=>t.value===e));return t?t.text:e.toUpperCase()},A="league"===p&&1===i.length;return Object(b.jsxs)("div",{className:"widget-section",children:[Object(b.jsxs)("h3",{className:"section-title",children:[Object(b.jsx)(he.a,{style:{marginRight:8,verticalAlign:"middle"}}),"Live Sports Scores"]}),Object(b.jsx)("div",{className:"setting-row",style:{marginBottom:"1rem"},children:Object(b.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[Object(b.jsx)(k.a,{variant:"league"===p?"contained":"outlined",onClick:()=>{g("league"),n({...s,sportTickerMode:"league"}),R("sportTickerMode","league")},style:{backgroundColor:"league"===p?"#4169E1":"transparent",color:"#fff",borderColor:"#4169E1"},children:"Single League"}),Object(b.jsx)(k.a,{variant:"favorites"===p?"contained":"outlined",onClick:()=>{g("favorites"),n({...s,sportTickerMode:"favorites"}),R("sportTickerMode","favorites")},style:{backgroundColor:"favorites"===p?"#4169E1":"transparent",color:"#fff",borderColor:"#4169E1"},children:"My Favorite Teams"})]})}),"league"===p?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"setting-row",style:{display:"flex",gap:"1rem",flexWrap:"wrap"},children:[Object(b.jsxs)("div",{style:{flex:1,minWidth:"180px"},children:[Object(b.jsx)("label",{className:"setting-label",children:"Select League"}),Object(b.jsx)(ce.c,{name:"league",options:[{text:"Select a League...",value:""},...Te.map((e=>({text:e.text,value:e.value})))],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;c(t),d([]);const a={...s,sportLeagues:t};n(a),R("sportLeagues",t),R("sportTeamCodes",""),r&&"league"===p&&F(t,[],s.sportTickerRefresh)},selectedValue:l},`league-select-${C}-${l}`)]}),l&&Fe[l]&&Object(b.jsxs)("div",{style:{flex:1,minWidth:"180px"},children:[Object(b.jsx)("label",{className:"setting-label",children:"Filter by Team (optional)"}),Object(b.jsx)(ce.c,{name:"team",options:(()=>{if(!l)return[];const e=Fe[l];return e?[{text:"All Teams (Show All Games)",value:""},...e]:[]})(),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;if(!t){d([]);const e={...s,sportTeamCodes:""};return n(e),R("sportTeamCodes",""),void(r&&"league"===p&&F(l,[],s.sportTickerRefresh))}if(i.includes(t))return void m.a.error("Team already selected");const a=[...i,t];d(a);const o=a.join(","),c={...s,sportTeamCodes:o};n(c),R("sportTeamCodes",o),r&&"league"===p&&F(l,a,s.sportTickerRefresh)},selectedValue:""},`team-select-${l}`)]})]}),i.length>0&&Object(b.jsx)("div",{className:"symbol-chips",children:i.map((e=>Object(b.jsxs)("div",{className:"symbol-chip stock",children:[$(e),Object(b.jsx)("span",{onClick:()=>(e=>{const t=i.filter((t=>t!==e));d(t);const a=t.join(","),o={...s,sportTeamCodes:a};n(o),R("sportTeamCodes",a),r&&l&&"league"===p&&F(l,t,s.sportTickerRefresh)})(e),className:"chip-close",style:{marginLeft:8,cursor:"pointer"},children:"\xd7"})]},e)))})]}):Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"setting-row",children:[Object(b.jsx)("label",{className:"setting-label",children:"Add Favorite Teams (across any league)"}),Object(b.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[Object(b.jsx)("div",{style:{flex:1,minWidth:"150px"},children:Object(b.jsx)(ce.c,{name:"favLeague",options:[{text:"Select League...",value:""},...Te.filter((e=>Fe[e.value])).map((e=>({text:e.text,value:e.value})))],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>y(e.value),selectedValue:f})}),f&&Object(b.jsx)("div",{style:{flex:1,minWidth:"150px"},children:Object(b.jsx)(ce.c,{name:"favTeam",options:(()=>{if(!f)return[];const e=Fe[f];return e?[{text:"Select a Team...",value:""},...e]:[]})(),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;if(!t||!f)return;if(h.some((e=>e.league===f&&e.team===t)))return void m.a.error("Team already in favorites");const a=[...h,{league:f,team:t}];x(a);const r=T(a);n({...s,sportFavoriteTeams:r}),R("sportFavoriteTeams",r)},selectedValue:""},`fav-team-select-${f}`)})]})]}),h.length>0&&Object(b.jsx)("div",{className:"symbol-chips",children:h.map(((e,t)=>Object(b.jsxs)("div",{className:"symbol-chip crypto",children:[Object(b.jsxs)("span",{style:{fontSize:"0.7rem",opacity:.7},children:[M(e.league),":"]})," ",$(e.team,e.league),Object(b.jsx)("span",{onClick:()=>(e=>{const t=h.filter((t=>!(t.league===e.league&&t.team===e.team)));x(t);const a=T(t);n({...s,sportFavoriteTeams:a}),R("sportFavoriteTeams",a)})(e),className:"chip-close",style:{marginLeft:8,cursor:"pointer"},children:"\xd7"})]},`${e.league}-${e.team}-${t}`)))}),Object(b.jsx)("p",{style:{fontSize:"0.8rem",color:"#aaa",marginTop:"0.5rem",fontStyle:"italic"},children:"Note: Teams will only appear if they have a game today or an upcoming game"})]}),Object(b.jsxs)("div",{className:"setting-row",style:{display:"flex",gap:"1rem",flexWrap:"wrap",alignItems:"flex-end"},children:[Object(b.jsxs)("div",{style:{flex:1,minWidth:"150px"},children:[Object(b.jsx)("label",{className:"setting-label",children:"Refresh Interval"}),Object(b.jsx)(ce.c,{selectedValue:(D=s.sportTickerRefresh,[15,30,60,120,180,240,300,900,1800,3600,7200].reduce(((e,t)=>Math.abs(t-D)<Math.abs(e-D)?t:e)).toString()),name:"refreshInterval",options:Le,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,sportTickerRefresh:t};if(n(a),R("sportTickerRefresh",t.toString()),r){const e=t/60;if("favorites"===p){const t=T(h);ye(t,e,u)}else l&&F(l,i,e)}}},`refresh-select-${C}-${s.sportTickerRefresh}`)]}),!A&&Object(b.jsxs)("div",{style:{flex:1,minWidth:"150px"},children:[Object(b.jsx)("label",{className:"setting-label",children:"Scroll Speed"}),Object(b.jsx)(ce.c,{selectedValue:(U=u,[2,5,10,15].reduce(((e,t)=>Math.abs(t-U)<Math.abs(e-U)?t:e)).toString()),name:"scrollSpeed",options:Re,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10);j(t);const a={...s,sportScrollSpeed:t};n(a),R("sportScrollSpeed",e.value)}},`scroll-select-${C}-${u}`)]}),Object(b.jsx)("div",{style:{minWidth:"120px"},children:Object(b.jsx)(ne.a,{control:Object(b.jsx)(re.a,{checked:s.sportDarkMode,onChange:e=>{const t=e.target.checked,a={...s,sportDarkMode:t};n(a),R("sportDarkMode",t?"yes":"no")},color:"primary"}),label:"Dark Mode",style:{color:"#fff",marginLeft:0}})})]}),Object(b.jsxs)(k.a,{variant:"contained",onClick:r?()=>{m.a.promise(Oe(),{loading:"Stopping Sports Ticker...",success:()=>(o(!1),"Sports Ticker Stopped"),error:"Failed to stop ticker"})}:async()=>{const e=s.sportTickerRefresh/60;if("favorites"===p){if(0===h.length)return void m.a.error("Please add at least one favorite team");const s=T(h);w(!0);try{await ye(s,e,u),o(!0),we("sports"),null===t||void 0===t||t(),await L(),m.a.success("Sports Ticker Started!")}catch(a){m.a.error("Failed to start ticker")}finally{w(!1)}}else{if(!l)return void m.a.error("Please select a league");w(!0);try{await ve(l,i,e,u),o(!0),we("sports"),null===t||void 0===t||t(),await L(),m.a.success("Sports Ticker Started!")}catch(a){m.a.error("Failed to start ticker")}finally{w(!1)}}},disabled:S||("league"===p?!l:0===h.length),className:"start-button "+(r?"stop":""),children:[S?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff",marginRight:8}}):r?Object(b.jsx)(me.a,{}):Object(b.jsx)(Ne.a,{}),S?"PLEASE WAIT...":r?"STOP SPORTS TICKER":"START SPORTS TICKER"]})]});var U,D},Me=s(210);const Ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"FFFFFF",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"LiberationSans-Bold";const o=e.join(","),l=`${O("")}/stocks/start?symbols=${encodeURIComponent(o)}&speed=${t}&fps=${s}&refresh=${a}&color=${n}&font=${encodeURIComponent(r)}`;return v.a.get(l).then((e=>e.data))},Ue=[{text:"Bitcoin (BTC)",value:"BTC-USD"},{text:"Ethereum (ETH)",value:"ETH-USD"},{text:"Tether (USDT)",value:"USDT-USD"},{text:"Binance Coin (BNB)",value:"BNB-USD"},{text:"Solana (SOL)",value:"SOL-USD"},{text:"Ripple (XRP)",value:"XRP-USD"},{text:"USD Coin (USDC)",value:"USDC-USD"},{text:"Cardano (ADA)",value:"ADA-USD"},{text:"Avalanche (AVAX)",value:"AVAX-USD"},{text:"Dogecoin (DOGE)",value:"DOGE-USD"}],De=Ue.map((e=>e.value)),Be=e=>e.includes("-USD")||De.includes(e.toUpperCase()),Ie=[{text:"Apple (AAPL)",value:"AAPL"},{text:"Microsoft (MSFT)",value:"MSFT"},{text:"Google (GOOG)",value:"GOOG"},{text:"Amazon (AMZN)",value:"AMZN"},{text:"Tesla (TSLA)",value:"TSLA"},{text:"Meta (META)",value:"META"},{text:"NVIDIA (NVDA)",value:"NVDA"},{text:"Netflix (NFLX)",value:"NFLX"},{text:"AMD (AMD)",value:"AMD"},{text:"Intel (INTC)",value:"INTC"}],Pe=[{name:"White",value:"FFFFFF"},{name:"Red",value:"FF0000"},{name:"Green",value:"00FF00"},{name:"Blue",value:"0000FF"},{name:"Yellow",value:"FFFF00"},{name:"Cyan",value:"00FFFF"},{name:"Magenta",value:"FF00FF"},{name:"Orange",value:"FFA500"}],Ee=[{text:"Slow",value:"2"},{text:"Normal",value:"5"},{text:"Fast",value:"10"},{text:"Very Fast",value:"15"}],We=[{text:"1 minute",value:"1"},{text:"5 minutes",value:"5"},{text:"15 minutes",value:"15"},{text:"30 minutes",value:"30"}];var ze=e=>{let{onTickerStart:t}=e;const[s,n]=Object(a.useState)({stockSymbols:"MSFT,GOOG,AMZN,BTC-USD",stockTickerRefresh:5,stockTickerColor:"FFFFFF",stockTickerFont:"LiberationSans-Bold",stockScrollSpeed:5}),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(""),[i,d]=Object(a.useState)([]),[u,j]=Object(a.useState)(!1);Object(a.useEffect)((()=>{le().then((e=>{if(e){const t=e.stockSymbols||"MSFT,GOOG,AMZN,BTC-USD";n({stockSymbols:t,stockTickerRefresh:e.stockTickerRefresh||5,stockTickerColor:e.stockTickerColor||"FFFFFF",stockTickerFont:e.stockTickerFont||"LiberationSans-Bold",stockScrollSpeed:e.stockScrollSpeed||5}),d(t.split(",").map((e=>e.trim())).filter((e=>e))),j(!0)}})).catch(console.error),(()=>{const e=`${O("")}/stocks/status`;return v.a.get(e).then((e=>e.data))})().then((e=>{o(e.running||!1)})).catch((()=>o(!1)));const e=ke((e=>{"stocks"!==e&&o(!1)}));return()=>e()}),[]);const h=async(e,t)=>{const s=t||i;if(0!==s.length)try{await Ae(s,e.stockScrollSpeed,60,e.stockTickerRefresh,e.stockTickerColor,e.stockTickerFont),o(!0),we("stocks")}catch(a){console.error("Failed to restart ticker",a)}},x=()=>{m.a.promise((()=>{const e=`${O("")}/stocks/stop`;return v.a.get(e).then((e=>e.data))})(),{loading:"Stopping Stock Ticker...",success:()=>(o(!1),"Stock Ticker Stopped"),error:"Failed to stop ticker"})},p=(e,t)=>((e,t)=>{const s=`${O("")}/settings?key=${e}&value=${encodeURIComponent(t)}`;return v.a.get(s).then((e=>e.data))})(e,t),g=e=>{if(!e)return;const t=e.trim().toUpperCase();if(i.includes(t))return void m.a.error("Symbol already added");const a=[...i,t];d(a);const o=a.join(",");n({...s,stockSymbols:o}),p("stockSymbols",o),r&&h(s,a)},f=()=>{g(l),c("")};return Object(b.jsxs)("div",{className:"widget-section",children:[Object(b.jsxs)("h3",{className:"section-title",children:[Object(b.jsx)(be.a,{style:{marginRight:8,verticalAlign:"middle"}}),"Stocks & Crypto"]}),Object(b.jsxs)("div",{className:"dropdown-row",children:[Object(b.jsx)("div",{className:"dropdown-item",children:Object(b.jsx)(ce.c,{name:"addCrypto",options:[{text:"Add Popular Crypto",value:""},...Ue],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{e.value&&g(e.value)},selectedValue:""})}),Object(b.jsx)("div",{className:"dropdown-item",children:Object(b.jsx)(ce.c,{name:"addStock",options:[{text:"Add Popular Stock",value:""},...Ie],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{e.value&&g(e.value)},selectedValue:""})})]}),Object(b.jsxs)("div",{className:"input-row",children:[Object(b.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&f()},placeholder:"Enter stock or crypto symbol",className:"symbol-input"}),Object(b.jsx)(k.a,{variant:"contained",onClick:f,className:"add-button",children:"ADD"})]}),Object(b.jsx)("div",{className:"symbol-chips",children:i.map((e=>Object(b.jsxs)("div",{className:"symbol-chip "+(Be(e)?"crypto":"stock"),children:[e,Object(b.jsx)(Me.a,{onClick:()=>(e=>{const t=i.filter((t=>t!==e));d(t);const a=t.join(",");n({...s,stockSymbols:a}),p("stockSymbols",a),r&&t.length>0?h(s,t):0===t.length&&x()})(e),className:"chip-close"})]},e)))}),Object(b.jsxs)("div",{className:"settings-grid",children:[Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Refresh Interval"}),Object(b.jsx)(ce.c,{selectedValue:s.stockTickerRefresh.toString(),name:"refreshInterval",options:We,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,stockTickerRefresh:t};n(a),p("stockTickerRefresh",t.toString()),r&&h(a)}},`stock-refresh-${u}-${s.stockTickerRefresh}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Text Color"}),Object(b.jsx)(ce.c,{selectedValue:s.stockTickerColor,name:"textColor",options:Pe.map((e=>({value:e.value,text:e.name,markup:Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)("div",{style:{width:16,height:16,backgroundColor:`#${e.value}`,marginRight:8,borderRadius:2,border:"FFFFFF"===e.value?"1px solid #666":"none"}}),e.name]})}))),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,stockTickerColor:t};n(a),p("stockTickerColor",t),r&&h(a)}},`stock-color-${u}-${s.stockTickerColor}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Scrolling Speed"}),Object(b.jsx)(ce.c,{selectedValue:s.stockScrollSpeed.toString(),name:"scrollSpeed",options:Ee,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,stockScrollSpeed:t};n(a),p("stockScrollSpeed",t.toString())}},`stock-speed-${u}-${s.stockScrollSpeed}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Font"}),Object(b.jsx)(ce.c,{selectedValue:s.stockTickerFont,name:"tickerFont",options:oe.map((e=>({value:e,text:e}))),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,stockTickerFont:t};n(a),p("stockTickerFont",t),r&&h(a)}},`stock-font-${u}-${s.stockTickerFont}`)]})]}),Object(b.jsxs)(k.a,{variant:"contained",onClick:r?x:()=>{0!==i.length?m.a.promise(Ae(i,s.stockScrollSpeed,60,s.stockTickerRefresh,s.stockTickerColor,s.stockTickerFont),{loading:"Starting Stock Ticker...",success:()=>(o(!0),we("stocks"),null===t||void 0===t||t(),"Stock Ticker Started!"),error:"Failed to start ticker"}):m.a.error("Please add at least one stock symbol")},disabled:0===i.length,className:"start-button "+(r?"stop":""),children:[Object(b.jsx)(Ne.a,{}),r?"STOP STOCKS & CRYPTO":"START STOCKS & CRYPTO"]})]})},qe=s(211);const Ve=function(e){const t=new URLSearchParams({location:e,units:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fahrenheit",showUnits:!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?"yes":"no",forecast:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1day",refresh:(arguments.length>4&&void 0!==arguments[4]?arguments[4]:1800).toString()}),s=`${O("")}/weather/start?${t.toString()}`;return v.a.get(s).then((e=>e.data))},He=(e,t)=>{const s=`${O("")}/settings?key=${e}&value=${encodeURIComponent(t)}`;return v.a.get(s).then((e=>e.data))},Ge=[{text:"5 minutes",value:"300"},{text:"15 minutes",value:"900"},{text:"30 minutes",value:"1800"},{text:"1 hour",value:"3600"},{text:"2 hours",value:"7200"},{text:"8 hours",value:"28800"}],Ye=[{text:"Today (Hourly)",value:"1day"},{text:"3-Day Forecast",value:"3day"}],Ke=[{text:"Fahrenheit (\xb0F)",value:"fahrenheit"},{text:"Celsius (\xb0C)",value:"celsius"}];var Je=e=>{let{onTickerStart:t}=e;const[s,n]=Object(a.useState)({weatherLocation:"",weatherUnits:"fahrenheit",weatherShowUnits:!0,weatherForecast:"1day",weatherRefresh:1800}),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(""),[i,d]=Object(a.useState)(!1),[u,j]=Object(a.useState)(!1);Object(a.useEffect)((()=>{le().then((e=>{if(e){const t=e.weatherLocation||"";n({weatherLocation:t,weatherUnits:e.weatherUnits||"fahrenheit",weatherShowUnits:!1!==e.weatherShowUnits,weatherForecast:e.weatherForecast||"1day",weatherRefresh:e.weatherRefresh||1800}),c(t),d(!0)}})).catch(console.error),(()=>{const e=`${O("")}/weather/status`;return v.a.get(e).then((e=>e.data))})().then((e=>{o(e.running||!1)})).catch((()=>o(!1)));const e=ke((e=>{"weather"!==e&&o(!1)}));return()=>e()}),[]);const h=async()=>{const e=l.trim();if(e){j(!0);try{await Ve(e,s.weatherUnits,s.weatherShowUnits,s.weatherForecast,s.weatherRefresh),o(!0),we("weather"),null===t||void 0===t||t(),n({...s,weatherLocation:e}),m.a.success("Weather Widget Started!")}catch(a){m.a.error("Failed to start weather widget")}finally{j(!1)}}else m.a.error("Please enter a location (city name or ZIP code)")};return Object(b.jsxs)("div",{className:"widget-section",children:[Object(b.jsxs)("h3",{className:"section-title",children:[Object(b.jsx)(qe.a,{style:{marginRight:8,verticalAlign:"middle"}}),"Weather Widget"]}),Object(b.jsxs)("div",{className:"settings-grid",children:[Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:s.weatherLocation?`Location: ${s.weatherLocation}`:"Location"}),Object(b.jsx)("input",{type:"text",className:"symbol-input",placeholder:"ZIP or city",value:l,onChange:e=>c(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(()=>{const e=l.trim();e?(He("weatherLocation",e),n({...s,weatherLocation:e}),m.a.success("Location saved!"),r&&h()):m.a.error("Please enter a location")})()}})]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Unit"}),Object(b.jsx)(ce.c,{selectedValue:s.weatherUnits,name:"temperatureUnits",options:Ke,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,weatherUnits:t};n(a),He("weatherUnits",t),r&&Ve(s.weatherLocation,t,s.weatherShowUnits,s.weatherForecast,s.weatherRefresh)}},`units-select-${i}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Show \xb0F/\xb0C"}),Object(b.jsx)(re.a,{checked:s.weatherShowUnits,onChange:()=>{const e=!s.weatherShowUnits,t={...s,weatherShowUnits:e};n(t),He("weatherShowUnits",e?"yes":"no"),r&&Ve(s.weatherLocation,s.weatherUnits,e,s.weatherForecast,s.weatherRefresh)},color:"primary"})]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Forecast"}),Object(b.jsx)(ce.c,{selectedValue:s.weatherForecast,name:"forecastMode",options:Ye,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,weatherForecast:t};n(a),He("weatherForecast",t),r&&Ve(s.weatherLocation,s.weatherUnits,s.weatherShowUnits,t,s.weatherRefresh)}},`forecast-select-${i}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Refresh"}),Object(b.jsx)(ce.c,{selectedValue:(x=s.weatherRefresh,[300,900,1800,3600,7200,28800].reduce(((e,t)=>Math.abs(t-x)<Math.abs(e-x)?t:e)).toString()),name:"refreshInterval",options:Ge,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,weatherRefresh:t};n(a),He("weatherRefresh",t.toString()),r&&Ve(s.weatherLocation,s.weatherUnits,s.weatherShowUnits,s.weatherForecast,t)}},`refresh-select-${i}-${s.weatherRefresh}`)]})]}),Object(b.jsxs)(k.a,{variant:"contained",className:"start-button "+(r?"stop":""),onClick:r?async()=>{j(!0);try{await(()=>{const e=`${O("")}/weather/stop`;return v.a.get(e).then((e=>e.data))})(),o(!1),m.a.success("Weather Widget Stopped")}catch(e){m.a.error("Failed to stop weather widget")}finally{j(!1)}}:h,disabled:u||!r&&!l.trim(),children:[r?Object(b.jsx)(Me.a,{}):Object(b.jsx)(Ne.a,{}),u?"PLEASE WAIT...":r?"STOP WEATHER":"START WEATHER"]})]});var x};const Xe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"FFFFFF",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"LiberationSans-Regular",l=`${O("")}/news/start?sources=${encodeURIComponent(e)}&speed=${s}&fps=${a}&refresh=${n}&color=${r}&font=${encodeURIComponent(o)}`;return e.includes("custom")&&t&&(l+=`&customURL=${encodeURIComponent(t)}`),v.a.get(l).then((e=>e.data))},Ze={"World News":[{text:"BBC News",value:"bbc"},{text:"Reuters",value:"reuters"},{text:"AP News",value:"ap"},{text:"NPR News",value:"npr"},{text:"The Guardian",value:"guardian"}],"US News":[{text:"CNN",value:"cnn"},{text:"Fox News",value:"foxnews"},{text:"NY Times",value:"nytimes"},{text:"Washington Post",value:"washpost"},{text:"USA Today",value:"usatoday"}],"Tech News":[{text:"Hacker News",value:"hackernews"},{text:"TechCrunch",value:"techcrunch"},{text:"The Verge",value:"theverge"},{text:"Ars Technica",value:"arstechnica"},{text:"Wired",value:"wired"}],"Gaming News":[{text:"IGN",value:"ign"},{text:"Kotaku",value:"kotaku"},{text:"Polygon",value:"polygon"},{text:"GameSpot",value:"gamespot"}],"Finance News":[{text:"MarketWatch",value:"marketwatch"},{text:"CNBC",value:"cnbc"},{text:"Bloomberg",value:"bloomberg"}],Custom:[{text:"Custom RSS Feed",value:"custom"}]},_e=e=>{for(const t of Object.values(Ze)){const s=t.find((t=>t.value===e));if(s)return s.text}return e},Qe=[{name:"White",value:"FFFFFF"},{name:"Red",value:"FF0000"},{name:"Green",value:"00FF00"},{name:"Blue",value:"0000FF"},{name:"Yellow",value:"FFFF00"},{name:"Cyan",value:"00FFFF"},{name:"Magenta",value:"FF00FF"},{name:"Orange",value:"FFA500"}],et=[{text:"Slow",value:"2"},{text:"Normal",value:"5"},{text:"Fast",value:"10"},{text:"Very Fast",value:"15"}],tt=[{text:"1 minute",value:"1"},{text:"5 minutes",value:"5"},{text:"15 minutes",value:"15"},{text:"30 minutes",value:"30"}];var st=e=>{let{onTickerStart:t}=e;const[s,n]=Object(a.useState)({newsSources:["bbc"],newsCustomURL:"",newsTickerRefresh:5,newsTickerColor:"FFFFFF",newsTickerFont:"LiberationSans-Regular",newsScrollSpeed:5}),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(!1),[i,d]=Object(a.useState)(""),[u,j]=Object(a.useState)(!1);Object(a.useEffect)((()=>{le().then((e=>{if(e){const t=(e.newsSources||"bbc").split(",").map((e=>e.trim())).filter((e=>e)),s=e.newsCustomURL||"";n({newsSources:t.length>0?t:["bbc"],newsCustomURL:s,newsTickerRefresh:e.newsTickerRefresh||5,newsTickerColor:e.newsTickerColor||"FFFFFF",newsTickerFont:e.newsTickerFont||"LiberationSans-Regular",newsScrollSpeed:e.newsScrollSpeed||5}),d(s),j(!0)}})).catch(console.error),(()=>{const e=`${O("")}/news/status`;return v.a.get(e).then((e=>e.data))})().then((e=>{o(e.running||!1)})).catch((()=>o(!1)));const e=ke((e=>{"news"!==e&&o(!1)}));return()=>e()}),[]);const h=e=>e.join(","),x=async e=>{try{const t=e.newsSources.includes("custom")?e.newsCustomURL:"";await Xe(h(e.newsSources),t,e.newsScrollSpeed,60,e.newsTickerRefresh,e.newsTickerColor,e.newsTickerFont),o(!0),we("news")}catch(t){console.error("Failed to restart ticker",t)}},p=(e,t)=>((e,t)=>{const s=`${O("")}/settings?key=${e}&value=${encodeURIComponent(t)}`;return v.a.get(s).then((e=>e.data))})(e,t),g=()=>{const e=i.trim();if(!e)return void m.a.error("Please enter a URL");p("newsCustomURL",e);const t={...s,newsCustomURL:e};n(t),m.a.success("Custom URL saved!"),r&&s.newsSources.includes("custom")&&x(t)},f=(e=>{const t=[];return Object.entries(Ze).forEach((s=>{let[a,n]=s;n.forEach((s=>{e.includes(s.value)||t.push({text:`${s.text}`,value:s.value})}))})),t})(s.newsSources);return Object(b.jsxs)("div",{className:"widget-section",children:[Object(b.jsxs)("h3",{className:"section-title",children:[Object(b.jsx)(pe.a,{style:{marginRight:8,verticalAlign:"middle"}}),"News Ticker"]}),Object(b.jsxs)("div",{className:"setting-row",children:[Object(b.jsx)("label",{className:"setting-label",children:"Selected Sources"}),Object(b.jsx)("div",{className:"chip-container",children:s.newsSources.map((e=>Object(b.jsxs)("div",{className:"source-chip",children:[Object(b.jsx)("span",{children:_e(e)}),Object(b.jsx)("button",{className:"chip-remove",onClick:()=>(e=>{const t=s.newsSources.filter((t=>t!==e));if(0===t.length)return void m.a.error("Must have at least one news source");const a={...s,newsSources:t};n(a),p("newsSources",h(t)),r&&x(a)})(e),title:"Remove source",children:Object(b.jsx)(Me.a,{style:{fontSize:14}})})]},e)))})]}),f.length>0&&Object(b.jsxs)("div",{className:"setting-row",children:[Object(b.jsx)("label",{className:"setting-label",children:"Add News Source"}),Object(b.jsx)(ce.c,{selectedValue:"",name:"addSource",options:[{text:"+ Select a source to add...",value:""},...f],caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value;if(!t||s.newsSources.includes(t))return;const a=[...s.newsSources,t],o={...s,newsSources:a};n(o),p("newsSources",h(a)),r&&x(o)}},`add-source-${u}-${s.newsSources.length}`)]}),s.newsSources.includes("custom")&&Object(b.jsxs)("div",{className:"input-row",children:[Object(b.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"===e.key&&g()},placeholder:"Enter RSS feed URL",className:"symbol-input"}),Object(b.jsx)(k.a,{variant:"contained",onClick:g,className:"add-button",children:"SET URL"})]}),Object(b.jsxs)("div",{className:"settings-grid",children:[Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Refresh Interval"}),Object(b.jsx)(ce.c,{selectedValue:s.newsTickerRefresh.toString(),name:"refreshInterval",options:tt,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,newsTickerRefresh:t};n(a),p("newsTickerRefresh",t.toString()),r&&x(a)}},`news-refresh-${u}-${s.newsTickerRefresh}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Text Color"}),Object(b.jsx)(ce.c,{selectedValue:s.newsTickerColor,name:"textColor",options:Qe.map((e=>({value:e.value,text:e.name,markup:Object(b.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(b.jsx)("div",{style:{width:16,height:16,backgroundColor:`#${e.value}`,marginRight:8,borderRadius:2,border:"FFFFFF"===e.value?"1px solid #666":"none"}}),e.name]})}))),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,newsTickerColor:t};n(a),p("newsTickerColor",t),r&&x(a)}},`news-color-${u}-${s.newsTickerColor}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Scrolling Speed"}),Object(b.jsx)(ce.c,{selectedValue:s.newsScrollSpeed.toString(),name:"scrollSpeed",options:et,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=parseInt(e.value,10),a={...s,newsScrollSpeed:t};n(a),p("newsScrollSpeed",t.toString())}},`news-speed-${u}-${s.newsScrollSpeed}`)]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Font"}),Object(b.jsx)(ce.c,{selectedValue:s.newsTickerFont,name:"tickerFont",options:oe.map((e=>({value:e,text:e}))),caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:e=>{const t=e.value,a={...s,newsTickerFont:t};n(a),p("newsTickerFont",t),r&&x(a)}},`news-font-${u}-${s.newsTickerFont}`)]})]}),Object(b.jsxs)(k.a,{variant:"contained",onClick:r?()=>{m.a.promise((()=>{const e=`${O("")}/news/stop`;return v.a.get(e).then((e=>e.data))})(),{loading:"Stopping News Ticker...",success:()=>(o(!1),"News Ticker Stopped"),error:"Failed to stop ticker"})}:async()=>{if(0===s.newsSources.length)return void m.a.error("Please add at least one news source");if(s.newsSources.includes("custom")&&!i.trim())return void m.a.error("Please enter a custom RSS feed URL");const e=s.newsSources.includes("custom")?i.trim():"";c(!0);try{await Xe(h(s.newsSources),e,s.newsScrollSpeed,60,s.newsTickerRefresh,s.newsTickerColor,s.newsTickerFont),o(!0),c(!1),we("news"),null===t||void 0===t||t(),m.a.success("News Ticker Started!")}catch(a){c(!1),m.a.error("Failed to start ticker")}},disabled:l||s.newsSources.includes("custom")&&!i.trim()||0===s.newsSources.length,className:"start-button "+(r?"stop":""),children:[l?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff",marginRight:8}}):r?Object(b.jsx)(me.a,{}):Object(b.jsx)(Ne.a,{}),l?"PLEASE WAIT...":r?"STOP NEWS TICKER":"START NEWS TICKER"]})]})};const at=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cyberpunk",t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=`${O("")}/clock/start?face=${e}&use12Hour=${t}&showSeconds=${s}`;return v.a.get(a).then((e=>e.data))},nt=[{text:"Cyberpunk Neon",value:"cyberpunk"},{text:"Synthwave",value:"synthwave"},{text:"Tron Grid",value:"tron"},{text:"Digital Waves",value:"waves"},{text:"Word Clock",value:"word"},{text:"Linear Timeline",value:"linear"},{text:"Swatch .Beats",value:"swatch"},{text:"7-Segment LED",value:"segment"}];var rt=e=>{let{onClockStart:t}=e;const[s,n]=Object(a.useState)({clockFace:"cyberpunk",clockUse12Hour:!0,clockShowSeconds:!0}),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(!1),[i,d]=Object(a.useState)(!1);Object(a.useEffect)((()=>{le().then((e=>{e&&(n({clockFace:e.clockFace||"cyberpunk",clockUse12Hour:!1!==e.clockUse12Hour,clockShowSeconds:!1!==e.clockShowSeconds}),d(!0))})).catch(console.error),(()=>{const e=`${O("")}/clock/status`;return v.a.get(e).then((e=>e.data))})().then((e=>{o(e.running||!1)})).catch((()=>o(!1)));const e=ke((e=>{"clock"!==e&&o(!1)}));return()=>e()}),[]);const u=(e,t)=>((e,t)=>{const s=`${O("")}/settings?key=${e}&value=${encodeURIComponent(t)}`;return v.a.get(s).then((e=>e.data))})(e,t);return Object(b.jsxs)("div",{className:"widget-section",children:[Object(b.jsxs)("h3",{className:"section-title",children:[Object(b.jsx)(ge.a,{style:{marginRight:8,verticalAlign:"middle"}}),"Clock Settings"]}),Object(b.jsxs)("div",{className:"setting-row",children:[Object(b.jsx)("label",{className:"setting-label",children:"Clock Face"}),Object(b.jsx)(ce.c,{selectedValue:s.clockFace,name:"clockFace",options:nt,caretIcon:Object(b.jsx)(ce.a,{}),modalCloseButton:Object(b.jsx)(ce.b,{}),onChange:async e=>{const t=e.value,a={...s,clockFace:t};if(n(a),u("clockFace",t),r)try{await at(t,a.clockUse12Hour,a.clockShowSeconds)}catch(o){console.error("Failed to restart clock",o)}}},`clock-face-${i}-${s.clockFace}`)]}),Object(b.jsxs)("div",{className:"settings-grid",style:{gridTemplateColumns:"repeat(2, 1fr)"},children:[Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Time Format"}),Object(b.jsx)(ne.a,{control:Object(b.jsx)(re.a,{checked:s.clockUse12Hour,onChange:async e=>{const t=e.target.checked,a={...s,clockUse12Hour:t};if(n(a),u("clockUse12Hour",t?"yes":"no"),r)try{await at(a.clockFace,t,a.clockShowSeconds)}catch(o){console.error("Failed to restart clock",o)}},color:"primary"}),label:s.clockUse12Hour?"12-Hour":"24-Hour",style:{color:"#fff",marginLeft:0}})]}),Object(b.jsxs)("div",{className:"setting-item",children:[Object(b.jsx)("label",{className:"setting-label",children:"Seconds Display"}),Object(b.jsx)(ne.a,{control:Object(b.jsx)(re.a,{checked:s.clockShowSeconds,onChange:async e=>{const t=e.target.checked,a={...s,clockShowSeconds:t};if(n(a),u("clockShowSeconds",t?"yes":"no"),r)try{await at(a.clockFace,a.clockUse12Hour,t)}catch(o){console.error("Failed to restart clock",o)}},color:"primary"}),label:s.clockShowSeconds?"Show Seconds":"Hide Seconds",style:{color:"#fff",marginLeft:0}})]})]}),Object(b.jsxs)(k.a,{variant:"contained",onClick:r?()=>{m.a.promise((()=>{const e=`${O("")}/clock/stop`;return v.a.get(e).then((e=>e.data))})(),{loading:"Stopping Clock...",success:()=>(o(!1),"Clock Stopped"),error:"Failed to stop clock"})}:async()=>{c(!0);try{await at(s.clockFace,s.clockUse12Hour,s.clockShowSeconds),o(!0),c(!1),we("clock"),null===t||void 0===t||t(),m.a.success("Clock Started!")}catch(e){c(!1),m.a.error("Failed to start clock")}},disabled:l,className:"start-button "+(r?"stop":""),children:[l?Object(b.jsx)(ue.a,{size:24,style:{color:"#fff",marginRight:8}}):r?Object(b.jsx)(me.a,{}):Object(b.jsx)(Ne.a,{}),l?"PLEASE WAIT...":r?"STOP CLOCK":"START CLOCK"]})]})};s(146);var ot=()=>Object(b.jsx)("div",{className:"widget-settings-page",children:Object(b.jsxs)("div",{className:"widget-content",children:[Object(b.jsx)($e,{}),Object(b.jsx)(ze,{}),Object(b.jsx)(Je,{}),Object(b.jsx)(st,{}),Object(b.jsx)(rt,{})]})});s(147);var lt=()=>{const[e,t]=Object(a.useState)(null),[s,n]=Object(a.useState)(!0),[r,o]=Object(a.useState)(!1),[l,c]=Object(a.useState)(!1),i=async()=>{n(!0),o(!1);try{const e=await S();t(e)}catch(e){console.error(e),o(!0)}finally{n(!1)}};Object(a.useEffect)((()=>{i()}),[]);const d=e=>{c(!0),m.a.promise(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=`${O("")}/update${e?"?beta=true":""}`;return v.a.get(t).then((e=>e.data))}(e),{loading:e?"Pixelcade LCD Beta Update Started":"Pixelcade LCD Update Started",success:()=>"Please wait until you see the Update Complete message on your Pixelcade before doing anything else.",error:"Failed to start update"},{duration:1e4})},u=(null===e||void 0===e?void 0:e.betaFirmwareVersion)&&e.betaFirmwareVersion!==e.latestFirmwareVersion;return Object(b.jsx)("div",{className:"fade-in update-page",children:Object(b.jsxs)("div",{className:"update-container",children:[Object(b.jsx)("h1",{className:"update-title",children:"System Updates"}),s?Object(b.jsxs)("div",{className:"update-status checking",children:[Object(b.jsx)("div",{className:"spinner"}),Object(b.jsx)("p",{children:"Checking for updates..."})]}):r?Object(b.jsxs)("div",{className:"update-status usb-only",children:[Object(b.jsx)("div",{className:"usb-icon",children:"USB"}),Object(b.jsx)("h2",{children:"USB Connection Only"}),Object(b.jsx)("p",{children:"WiFi connectivity is required for updates."}),Object(b.jsx)("p",{className:"usb-instructions",children:"Since you are connected via USB only, you can still update by following these instructions:"}),Object(b.jsx)("a",{href:"https://pixelcade.org/lcdgen3/",target:"_blank",rel:"noopener noreferrer",className:"usb-link",children:"pixelcade.org/lcdgen3"})]}):e?Object(b.jsxs)(b.Fragment,{children:[e.updateAvailable?Object(b.jsxs)("div",{className:"update-status available",children:[Object(b.jsx)("div",{className:"update-badge",children:Object(b.jsx)("span",{className:"badge-icon",children:"!"})}),Object(b.jsx)("h2",{children:"Updates Available"}),Object(b.jsxs)("div",{className:"update-details",children:[e.firmwareUpdateAvailable&&Object(b.jsxs)("div",{className:"update-item",children:[Object(b.jsx)("span",{className:"update-label",children:"Firmware"}),Object(b.jsxs)("span",{className:"update-versions",children:[Object(b.jsx)("span",{className:"version-current",children:e.currentFirmwareVersion}),Object(b.jsx)("span",{className:"version-arrow",children:"\u2192"}),Object(b.jsx)("span",{className:"version-new",children:e.latestFirmwareVersion})]})]}),e.artworkUpdateAvailable&&Object(b.jsxs)("div",{className:"update-item",children:[Object(b.jsx)("span",{className:"update-label",children:"Artwork"}),Object(b.jsxs)("span",{className:"update-versions",children:[Object(b.jsxs)("span",{className:"version-current",children:["v",e.currentArtworkVersion]}),Object(b.jsx)("span",{className:"version-arrow",children:"\u2192"}),Object(b.jsxs)("span",{className:"version-new",children:["v",e.latestArtworkVersion]})]})]})]}),(e.releaseNotes||e.releaseDate)&&Object(b.jsxs)("div",{className:"release-notes",children:[Object(b.jsx)("h3",{children:"What's New"}),e.releaseDate&&Object(b.jsxs)("p",{className:"release-date",children:["Release Date: ",e.releaseDate]}),e.releaseNotes&&Object(b.jsx)("p",{className:"release-notes-text",children:e.releaseNotes})]}),Object(b.jsx)("div",{className:"update-actions",children:Object(b.jsx)(k.a,{variant:"contained",className:"install-button",onClick:()=>d(!1),disabled:l,style:{backgroundColor:"#4caf50",color:"#fff"},children:l?"Update Started...":"Install Update"})}),Object(b.jsx)("p",{className:"update-warning",children:"Updates can take up to 15 minutes or more depending on your Internet connection. Please wait until you see the Update Complete message on your Pixelcade."})]}):Object(b.jsxs)("div",{className:"update-status up-to-date",children:[Object(b.jsx)("div",{className:"checkmark",children:"\u2713"}),Object(b.jsx)("h2",{children:"You're Up to Date!"}),Object(b.jsx)("p",{children:"Your Pixelcade is running the latest stable version."})]}),u&&Object(b.jsxs)("div",{className:"beta-section",children:[Object(b.jsx)("h3",{children:"Beta Version Available"}),Object(b.jsxs)("div",{className:"beta-version-info",children:[Object(b.jsx)("span",{className:"beta-label",children:"Beta Firmware:"}),Object(b.jsx)("span",{className:"beta-version",children:e.betaFirmwareVersion})]}),Object(b.jsx)("p",{className:"beta-description",children:"Get access to pre-release versions with the latest features and improvements. Beta versions may contain bugs."}),Object(b.jsx)(k.a,{variant:"contained",className:"beta-button",onClick:()=>d(!0),disabled:l,children:l?"Update Started...":"Install Beta"})]}),Object(b.jsxs)("div",{className:"current-versions",children:[Object(b.jsx)("h3",{children:"Current Versions"}),Object(b.jsxs)("div",{className:"version-info",children:[Object(b.jsx)("span",{className:"version-label",children:"Firmware:"}),Object(b.jsx)("span",{className:"version-value",children:e.currentFirmwareVersion})]}),Object(b.jsxs)("div",{className:"version-info",children:[Object(b.jsx)("span",{className:"version-label",children:"Artwork:"}),Object(b.jsxs)("span",{className:"version-value",children:["v",e.currentArtworkVersion]})]})]})]}):Object(b.jsx)("div",{className:"update-status error",children:Object(b.jsx)("p",{children:"Unable to check for updates. Please check your network connection."})}),Object(b.jsx)("div",{className:"update-actions",style:{marginTop:"2rem"},children:Object(b.jsx)(k.a,{variant:"contained",color:"primary",onClick:i,disabled:s,children:s?"Checking...":"Check Again"})})]})})};s(148);var ct=()=>{const[e,t]=Object(a.useState)(""),[s,n]=Object(a.useState)(!0),[r,o]=Object(a.useState)(!1),l=localStorage.getItem("hostname")||window.location.hostname;Object(a.useEffect)((()=>{le().then((e=>{o(e.debug||!1)})).catch((()=>{}))}),[]);Object(a.useEffect)((()=>{const e=async()=>{try{const e=await fetch(`http://${l}:8080/v2/log`),s=await e.text();t(s)}catch(e){t("Error loading log file: "+(e instanceof Error?e.message:String(e)))}};e();const s=setInterval(e,5e3);return()=>clearInterval(s)}),[l]),Object(a.useEffect)((()=>{if(s){const e=document.getElementById("log-content");e&&(e.scrollTop=e.scrollHeight)}}),[e,s]);return Object(b.jsxs)("div",{className:"log-viewer-container fade-in",children:[Object(b.jsxs)("div",{className:"log-header",children:[Object(b.jsx)("h2",{children:"Pixelcade LCD Log"}),Object(b.jsx)("span",{className:"log-subtitle",children:"Auto-updates every 5 seconds"})]}),Object(b.jsxs)("div",{className:"log-controls",children:[Object(b.jsxs)("div",{className:"log-checkboxes",children:[Object(b.jsxs)("label",{className:"auto-scroll-toggle",children:[Object(b.jsx)("input",{type:"checkbox",checked:s,onChange:e=>n(e.target.checked)}),"Auto-scroll to bottom"]}),Object(b.jsxs)("label",{className:"auto-scroll-toggle",children:[Object(b.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{const e=!r;m.a.promise((e=>{const t=`${O("")}/settings?key=debug&value=${e?"yes":"no"}`;return v.a.get(t).then((e=>e.data))})(e),{loading:"Updating Debug Mode",success:()=>(o(e),"Debug Mode "+(e?"enabled":"disabled")),error:"Failed to update debug mode"},{duration:4e3})}}),"Debug logging"]})]}),Object(b.jsx)("div",{className:"log-buttons",children:Object(b.jsx)(k.a,{variant:"contained",color:"primary",onClick:()=>{const t=new Blob([e],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="pixelcadelcd.log",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},disabled:!e,size:"small",children:"Download Log"})})]}),Object(b.jsx)("div",{className:"log-content-wrapper",children:Object(b.jsx)("pre",{id:"log-content",className:"log-content",children:e||"Loading log..."})})]})},it=s(221),dt=s(215),ut=s(190),jt=s(213),mt=s(222),ht=s(217),bt=s(212);s(149);const xt=e=>{if(0===e)return"0 B";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(1))+" "+["B","KB","MB","GB","TB"][t]};var pt=()=>{const e=Object(c.m)(),[t,s]=Object(a.useState)(null),[n,r]=Object(a.useState)([]),[o,l]=Object(a.useState)([]),[i,d]=Object(a.useState)("auto"),[u,j]=Object(a.useState)(""),[h,x]=Object(a.useState)(""),[p,g]=Object(a.useState)(!1),[v,O]=Object(a.useState)(!1),[f,y]=Object(a.useState)(!1),[S,w]=Object(a.useState)([]),[N,T]=Object(a.useState)(!0),F=window.location.hostname;Object(a.useEffect)((()=>{const t=new URLSearchParams(e.search).get("system");t&&j(t)}),[e.search]);Object(a.useEffect)((()=>{(async()=>{try{const e=await fetch(`http://${F}:8080/v2/storage/status`);if(e.ok){const t=await e.json();s(t),t.usbMounted?d("usb"):t.internalAvailable&&d("internal")}}catch(e){console.error("Error fetching storage status:",e)}})(),(async()=>{try{const e=await fetch(`http://${F}:8080/v2/metadata/consoles`);if(e.ok){const t=await e.json();r(t.consoles||[]),l(t.customSystems||[])}}catch(e){console.error("Error fetching consoles:",e)}})()}),[]);const L=e=>{const t=e.toLowerCase();if(!t.endsWith(".jpg")&&!t.endsWith(".jpeg")&&!t.endsWith(".png")&&!t.endsWith(".mp4"))return{system:"",gameName:"",extension:"",error:"File must be .jpg, .png, or .mp4"};const s=t.endsWith(".mp4")?"mp4":"jpg",a=e.replace(/\.(jpg|jpeg|png|mp4)$/i,""),n=a.indexOf("-");if(-1===n)return{system:"",gameName:a,extension:s};return{system:a.substring(0,n).toLowerCase(),gameName:a.substring(n+1),extension:s}},R=(e,t)=>{const s=t.toLowerCase(),a="mp4"===e.extension?".mp4":".jpg";return`${s}-${e.gameName.replace(/-/g,"_")}${a}`},$=e=>{const t=e.toLowerCase();return!!n.some((e=>e.id.toLowerCase()===t))||!!o.some((e=>e.toLowerCase()===t))},A=async e=>{i&&"auto"!==i||(null!==t&&void 0!==t&&t.usbMounted?d("usb"):d("internal"));const s="auto"===i?null!==t&&void 0!==t&&t.usbMounted?"usb":"internal":i;O(!0);const a=[];for(const t of Array.from(e)){const e=L(t.name);if(e.error){a.push({name:t.name,status:"error",error:e.error});continue}if(!e.gameName){a.push({name:t.name,status:"error",error:"Could not determine game name from filename"});continue}let n="",r=!1;if(u)n=u.toLowerCase(),e.system!==n&&(r=!0);else{if(!e.system){a.push({name:t.name,status:"error",error:"No system specified. Select a system from the dropdown or name file as system-gamename.jpg"});continue}if(!$(e.system)){a.push({name:t.name,status:"error",error:`Unknown system "${e.system}". Select a system from the dropdown or add it as a custom system.`});continue}n=e.system}const l=r?R(e,n):t.name.replace(/\.(png)$/i,".jpg"),c=r||t.name.toLowerCase().endsWith(".png"),i=c?new File([t],l,{type:t.type}):t,d=new FormData;d.append("file",i),d.append("storage",s),d.append("system",n),d.append("type",e.extension),d.append("resizeMode",N?"stretch":"fit");try{const e=await fetch(`http://${F}:8080/v2/artwork/upload`,{method:"POST",body:d});if(e.ok){const s=await e.json(),n=[];c&&l!==t.name&&n.push(`Saved as ${l}`),s.resized&&n.push("Resized to fit display"),a.push({name:t.name,status:"success",info:n.length>0?n.join(", "):void 0})}else{const s=await e.text();a.push({name:t.name,status:"error",error:s})}}catch(o){a.push({name:t.name,status:"error",error:String(o)})}}w(a),O(!1);const n=a.filter((e=>"success"===e.status)).length,r=a.filter((e=>"error"===e.status)).length;n>0&&0===r?m.a.success(`Successfully uploaded ${n} file(s)`):n>0&&r>0?m()(`Uploaded ${n} file(s), ${r} failed`,{icon:"\u26a0\ufe0f"}):r>0&&m.a.error(`Failed to upload ${r} file(s)`)},U=async()=>{const e=h.trim().toLowerCase();if(!e)return void m.a.error("Please enter a system name");if(!/^[a-z0-9_-]+$/.test(e))return void m.a.error("System name can only contain lowercase letters, numbers, hyphens, and underscores");const t=n.find((t=>t.id.toLowerCase()===e));if(t)m.a.error(`System "${e}" already exists as "${t.name}"`);else if(o.includes(e))m.a.error(`Custom system "${e}" already exists`);else try{const t=await fetch(`http://${F}:8080/v2/metadata/custom-systems`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({system:e})});if(t.ok)m.a.success(`Custom system "${e}" added`),l([...o,e]),j(e),x(""),g(!1);else{const e=await t.text();m.a.error(e)}}catch(s){m.a.error("Failed to add custom system")}},D=Object(a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?y(!0):"dragleave"===e.type&&y(!1)}),[]),B=Object(a.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&A(e.dataTransfer.files)}),[i,u,t,n,o]);return Object(b.jsxs)("div",{className:"upload-artwork-container fade-in",children:[Object(b.jsx)("div",{className:"upload-header",children:Object(b.jsx)("h2",{children:"Upload Custom Artwork"})}),Object(b.jsx)("div",{className:"upload-storage-status",children:Object(b.jsx)("span",{className:"storage-indicator "+(null!==t&&void 0!==t&&t.usbMounted?"usb-active":"internal-active"),children:t?t.usbMounted?"USB drive detected - files will upload to USB by default":"No USB drive - files will upload to Internal storage":"Loading..."})}),Object(b.jsxs)("div",{className:"upload-options",children:[Object(b.jsxs)("div",{className:"option-group",children:[Object(b.jsx)("h3",{children:"Storage Destination"}),Object(b.jsxs)(it.a,{value:i,onChange:e=>d(e.target.value),row:!0,children:[(null===t||void 0===t?void 0:t.usbMounted)&&Object(b.jsx)(ne.a,{value:"usb",control:Object(b.jsx)(dt.a,{color:"primary"}),label:`USB Drive (${xt(t.usbFreeBytes)} free)`}),(null===t||void 0===t?void 0:t.internalAvailable)&&Object(b.jsx)(ne.a,{value:"internal",control:Object(b.jsx)(dt.a,{color:"primary"}),label:`Internal Storage (${xt(t.internalFreeBytes)} free)`})]})]}),Object(b.jsxs)("div",{className:"option-group",children:[Object(b.jsx)("h3",{children:"System/Console"}),Object(b.jsx)("p",{className:"option-hint",children:'Select a system to automatically prefix uploaded files with that system (e.g., "pacman.jpg" becomes "mame-pacman.jpg"). Files that already have the correct prefix won\'t be renamed. Leave as "Select System/Console" to use the system from each filename.'}),Object(b.jsx)(ut.a,{variant:"outlined",className:"system-select",children:Object(b.jsxs)(jt.a,{value:u,onChange:e=>j(e.target.value),displayEmpty:!0,children:[Object(b.jsx)(mt.a,{value:"",children:Object(b.jsx)("em",{children:"Select System/Console"})}),o.length>0&&Object(b.jsx)(mt.a,{disabled:!0,className:"menu-divider",children:"\u2500\u2500 Custom Systems \u2500\u2500"}),o.map((e=>Object(b.jsxs)(mt.a,{value:e,children:[Object(b.jsx)("strong",{children:e}),"\xa0(custom)"]},e))),n.length>0&&Object(b.jsx)(mt.a,{disabled:!0,className:"menu-divider",children:"\u2500\u2500 Built-in Systems \u2500\u2500"}),n.map((e=>Object(b.jsxs)(mt.a,{value:e.id,children:[Object(b.jsx)("strong",{children:e.id}),"\xa0\u2014 ",e.name]},e.id)))]})}),Object(b.jsx)("div",{className:"add-system-section",children:p?Object(b.jsxs)("div",{className:"new-system-input",children:[Object(b.jsx)(M.a,{size:"small",variant:"outlined",placeholder:"e.g., myarcade",value:h,onChange:e=>x(e.target.value.toLowerCase().replace(/[^a-z0-9_-]/g,"")),onKeyPress:e=>"Enter"===e.key&&U()}),Object(b.jsx)(k.a,{variant:"contained",color:"primary",size:"small",onClick:U,children:"Add"}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:()=>{g(!1),x("")},style:{color:"#fff",borderColor:"rgba(255,255,255,0.5)"},children:"Cancel"})]}):Object(b.jsx)(k.a,{variant:"contained",size:"small",startIcon:Object(b.jsx)(bt.a,{}),onClick:()=>g(!0),style:{backgroundColor:"#3b82f6",color:"#fff"},children:"Add Custom System"})})]}),Object(b.jsxs)("div",{className:"option-group",children:[Object(b.jsx)("h3",{children:"Image Resize"}),Object(b.jsxs)("p",{className:"option-hint",children:["Target resolution: ",Object(b.jsx)("code",{children:t?`${t.screenWidth}x${t.screenHeight}`:"1920x360"}),". Images already at this resolution will not be resized."]}),Object(b.jsx)(ne.a,{control:Object(b.jsx)(ht.a,{checked:N,onChange:e=>T(e.target.checked),color:"primary"}),label:"Stretch to fill (may distort image if aspect ratio doesn't match)"}),Object(b.jsx)("p",{className:"option-hint",style:{marginTop:"4px"},children:"When unchecked, images will be centered with black bars to preserve aspect ratio."})]})]}),Object(b.jsxs)("div",{className:`upload-dropzone ${f?"drag-active":""} ${v?"uploading":""}`,onDragEnter:D,onDragLeave:D,onDragOver:D,onDrop:B,children:[Object(b.jsx)(C.a,{className:"upload-icon"}),Object(b.jsx)("p",{className:"dropzone-text",children:v?"Uploading...":"Drag & drop files here, or click to browse"}),Object(b.jsx)("p",{className:"dropzone-hint",children:"Accepts .jpg, .png, and .mp4 files"}),Object(b.jsx)("input",{type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.mp4",onChange:e=>{e.target.files&&e.target.files.length>0&&A(e.target.files)},className:"file-input",disabled:v})]}),S.length>0&&Object(b.jsxs)("div",{className:"upload-results",children:[Object(b.jsx)("h3",{children:"Upload Results"}),Object(b.jsx)("div",{className:"results-list",children:S.map(((e,t)=>Object(b.jsxs)("div",{className:`result-item ${e.status}`,children:[Object(b.jsx)("span",{className:"result-icon",children:"success"===e.status?"\u2713":"\u2717"}),Object(b.jsx)("span",{className:"result-name",children:e.name}),e.error&&Object(b.jsx)("span",{className:"result-error",children:e.error}),e.info&&Object(b.jsx)("span",{className:"result-info",children:e.info})]},t)))}),Object(b.jsx)(k.a,{variant:"outlined",size:"small",onClick:()=>w([]),style:{color:"#fff",borderColor:"rgba(255,255,255,0.5)"},children:"Clear Results"})]}),Object(b.jsxs)("div",{className:"upload-instructions",style:{marginTop:"2rem"},children:[Object(b.jsx)("p",{children:Object(b.jsx)("strong",{children:"Tips & Guidelines"})}),Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("strong",{children:"Naming:"})," Files should be named ",Object(b.jsx)("code",{children:"system-gamename.jpg"}),", ",Object(b.jsx)("code",{children:".png"}),", or ",Object(b.jsx)("code",{children:".mp4"}),". If you select a system above, files will be ",Object(b.jsx)("strong",{children:"automatically renamed"})," with the correct prefix (unless they already have the correct prefix)."]}),Object(b.jsxs)("li",{children:["Example: ",Object(b.jsx)("code",{children:"mame-pacman.jpg"}),", ",Object(b.jsx)("code",{children:"mame-galaga.png"}),", ",Object(b.jsx)("code",{children:"nes-mario.mp4"})]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("strong",{children:"PNG files:"})," Will be automatically converted to JPEG for optimal display."]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("strong",{children:"Resolution:"})," Target resolution is"," ",Object(b.jsx)("code",{children:t?`${t.screenWidth}x${t.screenHeight}`:"1920x360"})," pixels. Images will be ",Object(b.jsx)("strong",{children:"automatically resized"})," if they don't match."]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("strong",{children:"Video recommendations:"})," ~7 seconds recommended (no hard limit). Bitrate should not exceed ",Object(b.jsx)("strong",{children:"6 Mbps"})," to avoid choppy playback."]}),Object(b.jsx)("li",{children:"You can upload to an existing console/system or create your own custom system"}),Object(b.jsxs)("li",{children:["After uploading, find your artwork in ",Object(b.jsx)("strong",{children:"Browse Marquees"})," under the system you uploaded to"]})]}),t&&!t.usbMounted&&Object(b.jsx)("div",{style:{marginTop:"12px",padding:"10px",backgroundColor:"rgba(59, 130, 246, 0.1)",borderRadius:"4px",border:"1px solid rgba(59, 130, 246, 0.3)"},children:Object(b.jsxs)("p",{style:{margin:0},children:[Object(b.jsx)("strong",{children:"Want to use USB storage?"})," Plug in a USB drive and go to"," ",Object(b.jsx)("a",{href:"/files/#/settings",style:{color:"#60a5fa"},children:"Settings"})," to format it for Pixelcade."]})})]})]})};const gt=n.a.createContext({}),vt=()=>n.a.useContext(gt);var Ot=()=>{const[e,t]=Object(a.useState)(!1),s={streamImages:e,setStreamImages:t};return Object(b.jsx)(gt.Provider,{value:s,children:Object(b.jsxs)(l.a,{children:[Object(b.jsx)(P.a,{style:{zIndex:100},children:Object(b.jsx)(x,{})}),Object(b.jsxs)(c.c,{children:[Object(b.jsx)(c.a,{path:"/",element:Object(b.jsx)(_,{})}),",",Object(b.jsx)(c.a,{path:"/consoles",element:Object(b.jsx)(w,{})}),",",Object(b.jsx)(c.a,{path:"/marquees/:system",element:Object(b.jsx)(I,{})}),",",Object(b.jsx)(c.a,{path:"/default-marquee",element:Object(b.jsx)(ae,{})}),",",Object(b.jsx)(c.a,{path:"/settings",element:Object(b.jsx)(ie,{})}),",",Object(b.jsx)(c.a,{path:"/text",element:Object(b.jsx)(de,{})}),Object(b.jsx)(c.a,{path:"/upload-artwork",element:Object(b.jsx)(pt,{})}),Object(b.jsx)(c.a,{path:"/widgets",element:Object(b.jsx)(Ce,{})}),Object(b.jsx)(c.a,{path:"/widget-settings",element:Object(b.jsx)(ot,{})}),Object(b.jsx)(c.a,{path:"/log",element:Object(b.jsx)(ct,{})}),Object(b.jsx)(c.a,{path:"/update",element:Object(b.jsx)(lt,{})})]})]})})};var ft=e=>{e&&e instanceof Function&&s.e(3).then(s.bind(null,223)).then((t=>{let{getCLS:s,getFID:a,getFCP:n,getLCP:r,getTTFB:o}=t;s(e),a(e),n(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(Ot,{})}),document.getElementById("root")),ft()}},[[150,1,2]]]);
//# sourceMappingURL=main.3279fc6d.chunk.js.map