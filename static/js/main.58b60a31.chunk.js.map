{"version":3,"sources":["assets/pixelcade.png","components/Header/index.tsx","components/Loading/index.tsx","services/index.ts","components/ConsoleList/index.tsx","components/MarqueeDetailsModal/index.tsx","components/MarqueeItem/index.tsx","components/MarqueeList/index.tsx","hooks/useDebounce.ts","types/DeviceInfo.type.ts","components/MainMenu/index.tsx","assets/default-01.png","assets/default-02.png","assets/default-03.png","components/DefaultMarquee/index.tsx","const/fonts.ts","services/settings.ts","components/DeviceSettings/index.tsx","components/SendText/index.tsx","services/sports.ts","services/tickerEvents.ts","components/WidgetsMenu/index.tsx","components/WidgetSettings/SportsTickerWidget.tsx","services/stocks.ts","components/WidgetSettings/StockTickerWidget.tsx","services/weather.ts","components/WidgetSettings/WeatherWidget.tsx","services/news.ts","components/WidgetSettings/NewsWidget.tsx","services/clock.ts","components/WidgetSettings/ClockWidget.tsx","components/WidgetSettings/SlideshowWidget.tsx","components/WidgetSettings/index.tsx","components/UpdatePage/index.tsx","components/LogViewer/index.tsx","components/UploadArtwork/index.tsx","components/Favorites/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Header","loc","useLocation","nav","useNavigate","_jsxs","style","backgroundColor","children","_jsx","Toaster","containerStyle","top","className","objectFit","width","maxHeight","src","Logo","alt","pathname","gridTemplateColumns","onClick","Home","marginRight","ArrowBack","Loading","props","isLoading","React","Fragment","getDeviceUrl","version","arguments","length","undefined","window","location","host","updateMarquee","console","marquee","stream","params","requestUrl","axios","post","updateDefaultMarquee","id","get","checkForUpdates","then","value","data","refreshCache","getSlideshowStatus","startSlideshow","interval","includeVideos","stopSlideshow","getSlideshowFavorites","_value$data2","favorites","removeSlideshowFavorite","encodeURIComponent","ConsoleList","loading","setLoading","useState","consoles","setConsoles","useEffect","async","readConsoles","catch","finally","loadConsoles","map","item","index","borderRadius","padding","border","color","cursor","name","descriptiveName","numMarquees","MarqueeDetailsModal","_ref","open","onClose","system","onDelete","symlinkName","setSymlinkName","isCreatingSymlink","setIsCreatingSymlink","isDeleting","setIsDeleting","confirmingDelete","setConfirmingDelete","streamImages","useAppSettings","isUserUploaded","hostname","storageType","sourceFilename","filename","fullImageUrl","handleClose","handleCreateSymlink","trim","toast","error","newFilename","endsWith","response","fetch","json","ok","success","symlink","Dialog","maxWidth","fullWidth","DialogTitle","position","paddingRight","right","height","display","alignItems","justifyContent","transition","onMouseEnter","e","currentTarget","transform","onMouseLeave","fontSize","fontWeight","lineHeight","DialogContent","paddingTop","marginBottom","textAlign","onError","target","apiSystem","margin","systemName","Button","variant","Error","status","blob","url","URL","createObjectURL","link","document","createElement","href","download","body","appendChild","click","removeChild","revokeObjectURL","dismiss","borderTop","TextField","placeholder","onChange","onKeyPress","key","disabled","InputProps","marginTop","gap","flex","borderColor","handleDeleteClick","DialogActions","handleSetMarquee","promise","MarqueeItem","setError","modalOpen","setModalOpen","isFavorite","setIsFavorite","getMarqueeKey","replace","marqueeKey","result","_value$data3","isSlideshowFavorite","err","checkFavorite","toggleFavorite","stopPropagation","addSlideshowFavorite","setMarquee","flexDirection","userSelect","minHeight","startCase","bottom","LazyLoad","thumbnailPath","hasVideo","left","title","Videocam","fontStyle","memo","MarqueeList","marqueeData","setMarqueeData","useParams","searchTerm","setSearchTerm","debouncedSearchTerm","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","setStreamImages","navigate","readFilesystemMarquees","marquees","type","boxSizing","minWidth","CloudUpload","filterdData","filter","RegExp","test","toLowerCase","push","numGIFs","systemManufacturer","year","handleDelete","prev","m","MainMenu","updateAvailable","setUpdateAvailable","checkingUpdate","setCheckingUpdate","checkFailed","setCheckFailed","info","Collections","Widgets","Favorite","Wallpaper","TextFields","Settings","Assignment","SystemUpdateAlt","submenu","querySelector","classList","toggle","PowerOff","shutdownSystem","rebootSystem","Refresh","ContextMenu","x","y","handleClickOutside","addEventListener","removeEventListener","DefaultMarquee","resolution","setResolution","currentDefault","setCurrentDefault","fileInputRef","useRef","contextMenu","setContextMenu","fetchMarqueeData","readConsoleMarquees","filteredMarquees","startsWith","handleDeleteMarquee","log","filenameWithoutExt","isDeletingDefault","method","headers","responseText","text","handleDefaultMarquee","String","fullFilename","fetchResolutionInfo","defaultMarquee","fetchCurrentDefault","marginLeft","_fileInputRef$current","current","ref","accept","_event$target$files","file","event","files","includes","isValidDimensions","Promise","resolve","img","Image","onload","onerror","validateImage","formData","FormData","append","background","fontFamily","DefaultOne","DefaultTwo","DefaultThree","isDefault","onContextMenu","completeFilename","handleContextMenu","preventDefault","rect","getBoundingClientRect","windowWidth","innerWidth","xPosition","zIndex","confirm","FontList","readSettings","updateSetting","DeviceSettings","deviceName","setDeviceName","settings","setSettings","deviceInfo","setDeviceInfo","wifiStatus","setWifiStatus","wifiNetworks","setWifiNetworks","wifiScanning","setWifiScanning","wifiConnecting","setWifiConnecting","selectedNetwork","setSelectedNetwork","wifiPassword","setWifiPassword","showWifiPassword","setShowWifiPassword","showNetworkList","setShowNetworkList","usbStatus","setUsbStatus","usbFormatting","setUsbFormatting","fetchWifiStatus","scanWifiNetworks","networks","fetchUsbStatus","formatBytes","bytes","i","Math","floor","parseFloat","pow","toFixed","readDeviceInfo","getRebootMessage","message","updateImageMarqueesOnly","toggleVideoMarquees","ImageMarqueesOnly","duration","updateTextOnMainPanel","toggleTextOnMainPanel","SubDisplayScrollingOnly","updateName","newName","updateDeviceName","updateFont","updateDeviceFont","font","updatePixelcadeDotType","updatePixelcadeDotTypeSPI","PixelcadeDotType","updatePixelcadeMiniDisplayType","updatePixelcadeMiniDisplayTypeI2C","PixelcadeMiniDisplayType","updatePixelcadeOLEDMode","updatePixelcadeDeviceOLEDMode","PixelcadeOLEDMode","updateMarqueeOverlay","toggleMarqueeOverlays","marqueeOverlays","updateVideoLoopMode","toggleVideoLoopMode","videoLoopMode","updateFuzzyMatch","toggleFuzzyMatch","fuzzyMatch","handleFuzzyMatchDistanceChange","newDistance","distance","updateFuzzyMatchDistance","fuzzyMatchDistance","getSignalIcon","signal","gridGap","firmwareVersion","artworkVersion","pixelcadeGen","oled","miniLCD","dotMatrix","sevenSegment","hasJoinedNetwork","isPaired","connected","hasInternet","_Fragment","ssid","ipAddress","signalStrength","macAddress","size","overflowY","network","borderBottom","inUse","security","JSON","stringify","password","readyForUse","usbDetected","usbLabel","usbFreeBytes","usbTotalBytes","usbMountPoint","usbMounted","hasLCDFolder","hasMP4Folder","usbDevice","canFormat","device","label","FormControlLabel","control","Switch","checked","Select","selectedValue","options","caretIcon","CaretIcon","modalCloseButton","ModalCloseButton","changes","paddingLeft","min","max","Number","SendText","setText","setScrollingText","startSportsTicker","league","teams","refresh","speed","teamsParam","join","stopSportsTicker","getSportsTickerStatus","startFavoritesTicker","favoriteTeams","TICKER_STARTED_EVENT","dispatchTickerStarted","tickerType","dispatchEvent","CustomEvent","detail","onTickerStarted","callback","WidgetsMenu","tickerStatus","setTickerStatus","sports","stocks","weather","news","clock","setHasInternet","_stocksRes$data","_weatherRes$data","_newsRes$data","_clockRes$data","internetStatus","getInternetStatus","_value$data","settingsData","sportsStatus","stocksRes","weatherRes","newsRes","clockRes","running","fetchStatuses","unsubscribe","requiresInternet","widget","WifiOff","Link","to","mode","sportTickerMode","refreshMinutes","sportTickerRefresh","sportScrollSpeed","sportFavoriteTeams","sportLeagues","sportTeamCodes","split","CircularProgress","Stop","SportsBasketball","symbols","stockSymbols","stockTickerRefresh","stockScrollSpeed","stockFont","TrendingUp","weatherLocation","units","weatherUnits","forecast","weatherForecast","WbSunny","sources","newsSources","newsTickerRefresh","newsScrollSpeed","RssFeed","face","clockFace","use12Hour","clockUse12Hour","showSeconds","clockShowSeconds","Schedule","leagueOptions","sport","teamsByLeague","nfl","nba","mlb","nhl","wnba","refreshPresets","scrollSpeedPresets","SportsTickerWidget","onTickerStart","sportDarkMode","isTickerRunning","setIsTickerRunning","selectedLeague","setSelectedLeague","selectedTeams","setSelectedTeams","scrollSpeed","setScrollSpeed","setFavoriteTeams","setMode","favLeagueSelect","setFavLeagueSelect","setIsLoading","settingsLoaded","setSettingsLoaded","favoritesToString","favs","f","team","s","str","part","toUpperCase","statusData","restartTicker","refreshSeconds","waitForReady","maxWaitMs","maxAttempts","ready","updateSportsSetting","getTeamDisplayName","teamCode","leagueToUse","find","t","getLeagueDisplayName","leagueCode","l","isSingleTeamMode","verticalAlign","flexWrap","newSettings","getTeamOptions","newTeams","teamsStr","handleRemoveTeam","getFavTeamOptions","some","newFavorites","favsStr","fav","idx","opacity","handleRemoveFavorite","seconds","reduce","curr","abs","toString","parseInt","enabled","handleStopTicker","PlayArrow","startStockTicker","fps","symbolsParam","popularCrypto","cryptoSymbols","c","isCryptoSymbol","symbol","popularStocks","colorPresets","speedPresets","StockTickerWidget","stockTickerColor","stockTickerFont","symbolInput","setSymbolInput","setSymbols","getStockTickerStatus","newSymbols","syms","stopStockTicker","updateStockSetting","addSymbol","newSymbol","symbolsStr","handleAddSymbol","Close","handleRemoveSymbol","markup","handleStartTicker","startWeatherWidget","URLSearchParams","showUnits","updateWeatherSetting","forecastPresets","unitPresets","WeatherWidget","weatherShowUnits","weatherRefresh","isWidgetRunning","setIsWidgetRunning","locationInput","setLocationInput","getWeatherStatus","handleStartWidget","Cloud","handleSetLocation","handleShowUnitsToggle","newShowUnits","stopWeatherWidget","startNewsTicker","customURL","newsSourceCategories","getSourceName","sourceKey","Object","values","source","NewsWidget","_ref2","newsCustomURL","newsTickerColor","newsTickerFont","customURLInput","setCustomURLInput","sourcesArray","getNewsTickerStatus","sourcesToString","updateNewsSetting","handleSetCustomURL","availableOptions","selectedSources","entries","forEach","category","getAvailableSourceOptions","newSources","handleRemoveSource","stopNewsTicker","startClock","clockFaceOptions","ClockWidget","onClockStart","isClockRunning","setIsClockRunning","getClockStatus","updateClockSetting","handleStopClock","stopClock","intervalOptions","SlideshowWidget","onSlideshowStart","slideshowInterval","slideshowIncludeVideos","isSlideshowRunning","setIsSlideshowRunning","favoritesCount","setFavoritesCount","Slideshow","handleStopSlideshow","WidgetSettings","UpdatePage","_updateInfo$releaseNo","_updateInfo$releaseNo2","_updateInfo$betaRelea","updateInfo","setUpdateInfo","isUpdating","setIsUpdating","handleCheckForUpdates","updateSystem","beta","updateFirmware","betaAvailable","betaFirmwareVersion","latestFirmwareVersion","rel","firmwareUpdateAvailable","currentFirmwareVersion","artworkUpdateAvailable","currentArtworkVersion","latestArtworkVersion","releaseNotesList","releaseNotes","releaseDate","note","isRunningBeta","betaUpdateAvailable","betaReleaseNotes","LogViewer","logContent","setLogContent","autoScroll","setAutoScroll","debugMode","setDebugMode","localStorage","getItem","debug","fetchLogFile","setInterval","clearInterval","logContainer","getElementById","scrollTop","scrollHeight","handleDebugToggle","newValue","toggleDebugMode","navigator","clipboard","writeText","textArea","select","execCommand","handleDownload","Blob","a","UploadArtwork","storageStatus","setStorageStatus","customSystems","setCustomSystems","selectedStorage","setSelectedStorage","selectedSystem","setSelectedSystem","newSystemName","setNewSystemName","showNewSystemInput","setShowNewSystemInput","uploading","setUploading","dragActive","setDragActive","uploadResults","setUploadResults","stretchToFill","setStretchToFill","refreshingCache","setRefreshingCache","deleteDialogOpen","setDeleteDialogOpen","systemToDelete","setSystemToDelete","deletePreview","setDeletePreview","loadingDeletePreview","setLoadingDeletePreview","deleting","setDeleting","systemParam","search","internalAvailable","fetchStorageStatus","fetchConsoles","parseFilename","lower","gameName","extension","baseName","dashIndex","indexOf","substring","buildTargetFilename","parsed","targetSystem","ext","isValidSystem","sysLower","cs","uploadFiles","storage","results","Array","from","renamed","targetFilename","needsNewFile","uploadFile","File","infoMessages","resized","errorText","successCount","r","errorCount","icon","handleAddCustomSystem","existingConsole","handleCancelDelete","handleDrag","useCallback","handleDrop","dataTransfer","RadioGroup","row","Radio","internalFreeBytes","FormControl","displayEmpty","MenuItem","sys","startIcon","Add","jpgCount","mp4Count","totalFiles","handleDeleteCustomSystemClick","Delete","screenWidth","screenHeight","Checkbox","onDragEnter","onDragLeave","onDragOver","onDrop","multiple","jpg_count","mp4_count","PaperProps","DialogContentText","totalDeleted","deletedJpg","deletedMp4","Favorites","setFavorites","isStarting","setIsStarting","currentMarquee","setCurrentMarquee","slideshowSettings","setSlideshowSettings","loadData","videoListResponse","all","videoSet","Set","basename","add","parsedFavorites","firstDash","game","parseFavoriteKey","has","newInterval","favorite","handleDisplayMarquee","baseUrl","ApplicationContext","createContext","useContext","App","state","Provider","HashRouter","StickyBox","Routes","Route","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.58b60a31.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pixelcade.698d1ae2.png\";","import { Home } from \"@material-ui/icons\";\nimport ArrowBack from \"@material-ui/icons/ArrowBack\";\nimport React from \"react\";\nimport { Toaster } from \"react-hot-toast\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport Logo from \"../../assets/pixelcade.png\";\n\nconst Header: React.FC = () => {\n    const loc = useLocation();\n    const nav = useNavigate();\n    return (\n        <div style={{ backgroundColor: \"\"}}>\n            <Toaster\n                containerStyle={{\n                    top: 80, // Push down below nav buttons so it doesn't cover them\n                }}\n            />\n            <div\n                className=\"layout-grid logo-container\"\n                style={{\n                    backgroundColor: \"#000\",\n                }}\n            >\n                <img\n                    style={{\n                        objectFit: \"scale-down\",\n                        width: \"100%\",\n                        maxHeight: 75,\n                    }}\n                    src={Logo}\n                    alt=\"Pixelcade Companion Logo\"\n                />\n            </div>\n            {loc.pathname !== \"/\" && (\n                <div\n                    className=\"layout-grid fade-in\"\n                    style={{\n                        gridTemplateColumns: 'repeat(auto-fit, minmax(75px, 1fr))',\n                        backgroundColor: \"#000\",\n                    }}\n                >\n                    <div\n                        className=\"grid-item nav-element\"\n                        onClick={() => {\n                            nav(\"/\");\n                        }}\n                    >\n                        <Home style={{ marginRight: 8 }} />\n                        HOME\n                    </div>\n                    <div\n                        className=\"grid-item nav-element\"\n                        onClick={() => {\n                            nav(-1);\n                        }}\n                    >\n                        <ArrowBack style={{ marginRight: 8 }} />\n                        GO BACK\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Header;\n","import React from \"react\";\nimport \"./loading.css\";\nimport Logo from \"../../assets/pixelcade.png\";\n\nconst Loading: React.FC<{ isLoading: boolean }> = (props) => {\n    const { isLoading } = props;\n    return (\n        <React.Fragment>\n            {isLoading && (\n                <div className=\"loading fade-in\">\n                    <img\n                        className=\"pulse\"\n                        src={Logo}\n                        alt=\"Pixelcade Companion Logo\"\n                    />\n                </div>\n            )}\n        </React.Fragment>\n    );\n};\n\nexport default Loading;\n","import axios from \"axios\";\nimport { DeviceInfo } from \"../types/DeviceInfo.type\";\n\nexport const getDeviceUrl = (version: string = \"/v2\"): string => {\n    return `http://${window.location.host}${version}`;\n};\n\nexport const rebootSystem = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/reboot`;\n\n    return axios.post(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const shutdownSystem = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/shutdown`;\n\n    return axios.post(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const readDeviceInfo = (): Promise<DeviceInfo> => {\n    const requestUrl = `${getDeviceUrl()}/info`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const readConsoles = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl()}/info/consoles`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const readConsoleMarquees = (console: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl()}/marquees/${console}`;\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n/* export const updateMarquee = ( //there used to be a toggle in companion for stream or write, removed it as not applicable\n    console: string,\n    marquee: string,\n    stream: boolean\n) => {\n    const requestUrl = `${getDeviceUrl(\"\")}/arcade/${\n        stream ? \"stream\" : \"write\"\n    }/${console}/${marquee}`;\n\n    return axios.post(requestUrl);\n}; */\n\nexport const updateMarquee = (\n    console: string,\n    marquee: string,\n    stream: boolean,\n    noFuzzy: boolean = false\n) => {\n    const params = noFuzzy ? '?nofuzzy=1' : '';\n    const requestUrl = `${getDeviceUrl(\"\")}/arcade/stream/${console}/${marquee}${params}`;\n\n    return axios.post(requestUrl);\n};\n\nexport const updateDefaultMarquee = (id: string | number) => {\n    const requestUrl = `${getDeviceUrl()}/utility/marquee/set/${id}`;\n    return axios.get(requestUrl);\n};\n\nexport const setScrollingText = (text: string) => {\n    const requestUrl = `${getDeviceUrl(\"\")}/text?t=${text}`;\n    return axios.get(requestUrl);\n};\n\nexport const readFilesystemMarquees = (console: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl()}/filesystem/${console}`;\n    return fetch(requestUrl).then((response) => response.json());\n};\n\nexport const checkForUpdates = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl()}/check-update`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\n// Check if the device has internet connectivity\nexport const getInternetStatus = (): Promise<{ hasInternet: boolean }> => {\n    const requestUrl = `${getDeviceUrl()}/wifi/status`;\n    return axios.get(requestUrl)\n        .then((value) => ({ hasInternet: value.data?.hasInternet || false }))\n        .catch(() => ({ hasInternet: false }));\n};\n\n// Refresh the marquee lookup cache (after adding new files)\nexport const refreshCache = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl()}/cache/refresh`;\n    return axios.post(requestUrl).then((value) => value.data);\n};\n\n// Slideshow API functions\nexport const getSlideshowStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/status`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\nexport const startSlideshow = (interval?: number, includeVideos?: string): Promise<any> => {\n    let params = '';\n    if (interval) params += `?interval=${interval}`;\n    if (includeVideos) params += `${params ? '&' : '?'}includeVideos=${includeVideos}`;\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/start${params}`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\nexport const stopSlideshow = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/stop`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\nexport const getSlideshowFavorites = (): Promise<string[]> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/favorites`;\n    return axios.get(requestUrl).then((value) => value.data?.favorites || []);\n};\n\nexport const addSlideshowFavorite = (marquee: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/favorite/add?marquee=${encodeURIComponent(marquee)}`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\nexport const removeSlideshowFavorite = (marquee: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/favorite/remove?marquee=${encodeURIComponent(marquee)}`;\n    return axios.get(requestUrl).then((value) => value.data);\n};\n\nexport const isSlideshowFavorite = (marquee: string): Promise<boolean> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/slideshow/isfavorite?marquee=${encodeURIComponent(marquee)}`;\n    return axios.get(requestUrl).then((value) => value.data?.isFavorite || false);\n};\n","import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ConsoleData } from \"../../types/AppContext\";\nimport Loading from \"../Loading\";\nimport { readConsoles } from \"../../services\";\n\nconst ConsoleList: React.FC = () => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [consoles, setConsoles] = useState<ConsoleData[]>([]);\n    const nav = useNavigate();\n\n    useEffect(() => {\n        const loadConsoles = async () => {\n            setLoading(true);\n            await readConsoles()\n                .then((value) => {\n                    setConsoles(value.consoles);\n                })\n                .catch()\n                .finally(() => {\n                    setLoading(false);\n                });\n        };\n        loadConsoles();\n    }, []);\n\n    const renderList = () => {\n        return consoles.map((item, index) => {\n            return (\n                <div\n                    className=\"fade-in\"\n                    key={index}\n                    style={{\n                        backgroundColor: \"#456\",\n                        borderRadius: \"4px\",\n                        padding: \".5rem\",\n                        border: \"1px solid #ABABAB\",\n                        color: \"#FFF\",\n                        cursor: \"pointer\",\n                    }}\n                    onClick={() => {\n                        nav(`/marquees/${item.name}`);\n                    }}\n                >\n                    <p>{item.descriptiveName}</p>\n                    <p>{item.numMarquees} Marquees</p>\n                </div>\n            );\n        });\n    };\n\n    return (\n        <React.Fragment>\n            <Loading isLoading={loading} />\n            <div className=\"layout-grid layout-grid-consoles\">{renderList()}</div>\n        </React.Fragment>\n    );\n};\n\nexport default ConsoleList;\n","import React, { useState } from \"react\";\nimport { Dialog, DialogTitle, DialogContent, DialogActions, Button, TextField } from \"@material-ui/core\";\nimport { MarqueeInfo } from \"../../types/DeviceInfo.type\";\nimport { getDeviceUrl, updateMarquee } from \"../../services\";\nimport toast from \"react-hot-toast\";\nimport { useAppSettings } from \"../../App\";\n\ntype MarqueeDetailsModalProps = {\n    open: boolean;\n    onClose: () => void;\n    marquee: MarqueeInfo;\n    system: string;\n    onDelete?: () => void;\n};\n\nconst MarqueeDetailsModal: React.FC<MarqueeDetailsModalProps> = ({ open, onClose, marquee, system, onDelete }) => {\n    const [symlinkName, setSymlinkName] = useState<string>(\"\");\n    const [isCreatingSymlink, setIsCreatingSymlink] = useState<boolean>(false);\n    const [isDeleting, setIsDeleting] = useState<boolean>(false);\n    const [confirmingDelete, setConfirmingDelete] = useState<boolean>(false);\n    const { streamImages } = useAppSettings();\n    const hostname = window.location.hostname;\n    const isUserUploaded = marquee.storageType === \"usb\" || marquee.storageType === \"internal\";\n\n    // Construct the full filename: system-gamename.jpg\n    const sourceFilename = `${system}-${marquee.filename}.jpg`;\n    const fullImageUrl = `${getDeviceUrl(\"\")}/lcdmarquees/${sourceFilename}`;\n\n    // Reset confirmation state when modal closes\n    const handleClose = () => {\n        setConfirmingDelete(false);\n        onClose();\n    };\n\n    const handleDownload = async () => {\n        try {\n            toast.loading(`Downloading ${sourceFilename}...`);\n            const response = await fetch(fullImageUrl);\n\n            if (!response.ok) {\n                throw new Error(`Failed to fetch image: ${response.status}`);\n            }\n\n            const blob = await response.blob();\n            const url = window.URL.createObjectURL(blob);\n            const link = document.createElement(\"a\");\n            link.href = url;\n            link.download = sourceFilename;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n            window.URL.revokeObjectURL(url);\n\n            toast.dismiss();\n            toast.success(`Downloaded ${sourceFilename}`);\n        } catch (error) {\n            toast.dismiss();\n            toast.error(\"Failed to download image\");\n            console.error(error);\n        }\n    };\n\n    const handleCreateSymlink = async () => {\n        if (!symlinkName.trim()) {\n            toast.error(\"Please enter an alias name\");\n            return;\n        }\n\n        const newFilename = symlinkName.trim().endsWith('.jpg')\n            ? symlinkName.trim()\n            : `${symlinkName.trim()}.jpg`;\n\n        setIsCreatingSymlink(true);\n\n        try {\n            const response = await fetch(\n                `${getDeviceUrl(\"\")}/symlink?original=${encodeURIComponent(sourceFilename)}&new=${encodeURIComponent(newFilename)}`\n            );\n\n            const data = await response.json();\n\n            if (response.ok && data.success) {\n                toast.success(`Alias created: ${data.symlink}`);\n                setSymlinkName(\"\");\n            } else {\n                toast.error(data.error || \"Failed to create alias\");\n            }\n        } catch (error) {\n            toast.error(\"Error creating alias\");\n            console.error(error);\n        } finally {\n            setIsCreatingSymlink(false);\n        }\n    };\n\n    const handleSetMarquee = () => {\n        // Use the /arcade/stream endpoint with system and filename\n        toast.promise(updateMarquee(system, marquee.filename, streamImages), {\n            loading: \"Updating Marquee\",\n            success: \"Successfully Updated Marquee\",\n            error: \"Couldn't set the marquee\",\n        });\n        handleClose();\n    };\n\n    const handleDeleteClick = () => {\n        if (!isUserUploaded) {\n            toast.error(\"Can only delete user-uploaded marquees\");\n            return;\n        }\n        setConfirmingDelete(true);\n    };\n\n    const handleDeleteConfirm = async () => {\n        setIsDeleting(true);\n\n        try {\n            const response = await fetch(\n                `${getDeviceUrl(\"\")}/v2/artwork/delete?filename=${encodeURIComponent(sourceFilename)}&storage=${encodeURIComponent(marquee.storageType || \"\")}`\n            );\n\n            const data = await response.json();\n\n            if (response.ok && data.status === \"ok\") {\n                toast.success(`Deleted ${marquee.name}`);\n                // Call onDelete first to update the list, then close the modal\n                if (onDelete) {\n                    onDelete();\n                }\n                handleClose();\n            } else {\n                toast.error(data.error || \"Failed to delete marquee\");\n            }\n        } catch (error) {\n            toast.error(\"Error deleting marquee\");\n            console.error(error);\n        } finally {\n            setIsDeleting(false);\n            setConfirmingDelete(false);\n        }\n    };\n\n    return (\n        <Dialog open={open} onClose={handleClose} maxWidth=\"sm\" fullWidth>\n            <DialogTitle style={{ backgroundColor: \"#6b0078\", color: \"#fff\", position: \"relative\", paddingRight: \"48px\" }}>\n                Marquee Details\n                <div\n                    onClick={handleClose}\n                    style={{\n                        position: \"absolute\",\n                        top: \"8px\",\n                        right: \"8px\",\n                        width: \"32px\",\n                        height: \"32px\",\n                        borderRadius: \"50%\",\n                        backgroundColor: \"rgba(0,0,0,.3)\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        cursor: \"pointer\",\n                        transition: \"all 0.2s ease\",\n                        border: \"1px solid rgba(255,255,255,.3)\",\n                    }}\n                    onMouseEnter={(e) => {\n                        e.currentTarget.style.backgroundColor = \"rgba(0,0,0,.6)\";\n                        e.currentTarget.style.transform = \"scale(1.1)\";\n                    }}\n                    onMouseLeave={(e) => {\n                        e.currentTarget.style.backgroundColor = \"rgba(0,0,0,.3)\";\n                        e.currentTarget.style.transform = \"scale(1)\";\n                    }}\n                >\n                    <span style={{\n                        color: \"#fff\",\n                        fontSize: \"20px\",\n                        fontWeight: \"bold\",\n                        lineHeight: \"1\",\n                    }}>\n                        \n                    </span>\n                </div>\n            </DialogTitle>\n            <DialogContent style={{ backgroundColor: \"#2a2a2a\", color: \"#fff\", paddingTop: \"20px\" }}>\n                <div style={{ marginBottom: \"20px\", textAlign: \"center\" }}>\n                    <img\n                        src={fullImageUrl}\n                        alt={marquee.name}\n                        style={{\n                            maxWidth: \"100%\",\n                            maxHeight: \"300px\",\n                            objectFit: \"contain\",\n                            borderRadius: \"4px\",\n                        }}\n                        onError={(e) => {\n                            (e.target as HTMLImageElement).src = `${getDeviceUrl()}/thumbnails/${marquee.apiSystem}/${marquee.filename}`;\n                        }}\n                    />\n                </div>\n\n                <div style={{ marginBottom: \"20px\" }}>\n                    <p style={{ margin: \"8px 0\" }}>\n                        <strong>Name:</strong> {marquee.name}\n                    </p>\n                    <p style={{ margin: \"8px 0\" }}>\n                        <strong>Source File:</strong> {sourceFilename}\n                    </p>\n                    <p style={{ margin: \"8px 0\" }}>\n                        <strong>System:</strong> {marquee.systemName}\n                    </p>\n                </div>\n\n                <div style={{ marginBottom: \"20px\" }}>\n                    <Button\n                        variant=\"contained\"\n                        onClick={handleDownload}\n                        fullWidth\n                        style={{\n                            backgroundColor: \"#4c3ba2\",\n                            color: \"#fff\",\n                            marginBottom: \"10px\",\n                        }}\n                    >\n                        Download Full Resolution Image\n                    </Button>\n                </div>\n\n                <div style={{ borderTop: \"1px solid #444\", paddingTop: \"20px\" }}>\n                    <p style={{ marginBottom: \"10px\", fontWeight: 600 }}>Create Alias:</p>\n                    <TextField\n                        fullWidth\n                        variant=\"outlined\"\n                        placeholder=\"Enter alternate filename (e.g., mame-pacman2.jpg)\"\n                        value={symlinkName}\n                        onChange={(e) => setSymlinkName(e.target.value)}\n                        onKeyPress={(e) => {\n                            if (e.key === 'Enter') {\n                                handleCreateSymlink();\n                            }\n                        }}\n                        disabled={isCreatingSymlink}\n                        style={{ marginBottom: \"10px\" }}\n                        InputProps={{\n                            style: { backgroundColor: \"#fff\" }\n                        }}\n                    />\n                    <Button\n                        variant=\"contained\"\n                        onClick={handleCreateSymlink}\n                        fullWidth\n                        disabled={isCreatingSymlink}\n                        style={{\n                            backgroundColor: \"#6b0078\",\n                            color: \"#fff\",\n                        }}\n                    >\n                        {isCreatingSymlink ? \"Creating...\" : \"Create Alias\"}\n                    </Button>\n                </div>\n\n                {/* Delete section - only for user uploads */}\n                {isUserUploaded && (\n                    <div style={{ borderTop: \"1px solid #444\", paddingTop: \"20px\", marginTop: \"20px\" }}>\n                        <p style={{ marginBottom: \"10px\", fontWeight: 600, color: \"#ef4444\" }}>Danger Zone:</p>\n                        {!confirmingDelete ? (\n                            <Button\n                                variant=\"contained\"\n                                onClick={handleDeleteClick}\n                                fullWidth\n                                disabled={isDeleting}\n                                style={{\n                                    backgroundColor: \"#dc2626\",\n                                    color: \"#fff\",\n                                }}\n                            >\n                                Delete Marquee\n                            </Button>\n                        ) : (\n                            <div>\n                                <p style={{ marginBottom: \"10px\", color: \"#fff\" }}>\n                                    Are you sure you want to delete \"{marquee.name}\"?\n                                </p>\n                                <div style={{ display: \"flex\", gap: \"10px\" }}>\n                                    <Button\n                                        variant=\"contained\"\n                                        onClick={handleDeleteConfirm}\n                                        disabled={isDeleting}\n                                        style={{\n                                            backgroundColor: \"#dc2626\",\n                                            color: \"#fff\",\n                                            flex: 1,\n                                        }}\n                                    >\n                                        {isDeleting ? \"Deleting...\" : \"Yes, Delete\"}\n                                    </Button>\n                                    <Button\n                                        variant=\"outlined\"\n                                        onClick={() => setConfirmingDelete(false)}\n                                        disabled={isDeleting}\n                                        style={{\n                                            borderColor: \"#666\",\n                                            color: \"#fff\",\n                                            flex: 1,\n                                        }}\n                                    >\n                                        Cancel\n                                    </Button>\n                                </div>\n                            </div>\n                        )}\n                        <p style={{ marginTop: \"8px\", fontSize: \"12px\", color: \"#888\" }}>\n                            This will permanently delete this user-uploaded marquee.\n                        </p>\n                    </div>\n                )}\n            </DialogContent>\n            <DialogActions style={{ backgroundColor: \"#2a2a2a\", padding: \"16px\" }}>\n                <Button onClick={handleClose} style={{ color: \"#fff\" }}>\n                    Close\n                </Button>\n                <Button\n                    onClick={handleSetMarquee}\n                    variant=\"contained\"\n                    style={{ backgroundColor: \"#6b0078\", color: \"#fff\" }}\n                >\n                    SET AS CURRENT MARQUEE\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n};\n\nexport default MarqueeDetailsModal;\n","import React, { useState, useEffect } from \"react\";\nimport { getDeviceUrl, updateMarquee, isSlideshowFavorite, addSlideshowFavorite, removeSlideshowFavorite } from \"../../services\";\nimport { MarqueeInfo } from \"../../types/DeviceInfo.type\";\nimport toast from \"react-hot-toast\";\nimport LazyLoad from \"react-lazyload\";\nimport { startCase } from \"lodash\";\nimport { useAppSettings } from \"../../App\";\nimport MarqueeDetailsModal from \"../MarqueeDetailsModal\";\nimport { Videocam } from \"@material-ui/icons\";\n\ntype MarqueeItemProps = {\n    system: string;\n    marquee: MarqueeInfo;\n    onClick?: Function;\n    onDelete?: () => void;\n};\n\nconst MarqueeItem: React.FC<MarqueeItemProps> = (props) => {\n    const [error, setError] = useState<boolean>(false);\n    const [modalOpen, setModalOpen] = useState<boolean>(false);\n    const [isFavorite, setIsFavorite] = useState<boolean>(false);\n    const { marquee } = props;\n\n    // Get the marquee key for favorites (system-game format)\n    const getMarqueeKey = () => {\n        const system = marquee.apiSystem === \"user\" ? marquee.systemName : marquee.apiSystem;\n        const name = marquee.filename.replace(/\\.(jpg|png|mp4)$/i, '');\n        return `${system}-${name}`;\n    };\n\n    // Check if this marquee is a favorite on mount\n    useEffect(() => {\n        const checkFavorite = async () => {\n            try {\n                const marqueeKey = getMarqueeKey();\n                const result = await isSlideshowFavorite(marqueeKey);\n                setIsFavorite(result);\n            } catch (err) {\n                // Silently fail - not critical\n            }\n        };\n        checkFavorite();\n    }, [marquee.filename]);\n\n    // Toggle favorite status\n    const toggleFavorite = async (e: React.MouseEvent) => {\n        e.stopPropagation();\n        const marqueeKey = getMarqueeKey();\n        try {\n            if (isFavorite) {\n                await removeSlideshowFavorite(marqueeKey);\n                setIsFavorite(false);\n                toast.success(\"Removed from slideshow favorites\");\n            } else {\n                await addSlideshowFavorite(marqueeKey);\n                setIsFavorite(true);\n                toast.success(\"Added to slideshow favorites\");\n            }\n        } catch (err) {\n            toast.error(\"Failed to update favorites\");\n        }\n    };\n\n    const { streamImages } = useAppSettings();\n\n    const setMarquee = () => {\n        const system =\n            marquee.apiSystem === \"user\"\n                ? marquee.systemName\n                : marquee.apiSystem;\n        // Use fixed ID so rapid clicks replace the toast instead of stacking\n        toast.promise(updateMarquee(system, marquee.filename, streamImages), {\n            loading: \"Updating Marquee\",\n            success: \"Successfully Updated Marquee\",\n            error: \"Couldn't set the marquee\",\n        }, { id: \"marquee-update\" });\n    };\n    const { onClick = setMarquee } = props;\n    const showMarquee = () => {\n        switch (marquee.id) {\n            case \"bad\":\n                return <div />;\n            default:\n                return (\n                    <React.Fragment>\n                        {error ? (\n                            <div\n                                className=\"grid-item fade-in\"\n                                style={{\n                                    backgroundColor: \"#4c3ba2\",\n                                    flexDirection: \"column\",\n                                    justifyContent: \"center\",\n                                    cursor: \"pointer\",\n                                    userSelect: \"none\",\n                                    fontWeight: 600,\n                                    minHeight: 60,\n                                }}\n                                onClick={() => onClick()}\n                            >\n                                <p>{startCase(marquee.name)}</p>\n                                {marquee.id === \"user\" && (\n                                    <span\n                                        style={{\n                                            position: \"absolute\",\n                                            bottom: \"0px\",\n                                            right: \"0px\",\n                                            backgroundColor: \"rgba(0,0,0,.65)\",\n                                            padding: \"2px 4px\",\n                                            borderRadius: \"4px 0 0 0\",\n                                        }}\n                                    >\n                                        {startCase(marquee.systemName)}\n                                    </span>\n                                )}\n                            </div>\n                        ) : (\n                            <LazyLoad\n                                height={60}\n                                style={{ position: \"relative\" }}\n                            >\n                                <img\n                                    className=\"grid-item fade-in\"\n                                    src={`${getDeviceUrl(\"\")}${marquee.thumbnailPath || `/thumbnail/${marquee.filename}`}`}\n                                    alt={marquee.filename}\n                                    onError={() => setError(true)}\n                                    style={{\n                                        backgroundColor:\n                                            \"rgba(255, 255, 255, .05)\",\n                                        cursor: \"pointer\",\n                                        position: \"relative\",\n                                        minHeight: 40,\n                                    }}\n                                    onClick={() => onClick()}\n                                />\n                                {/* Video indicator badge */}\n                                {marquee.hasVideo && (\n                                    <div\n                                        style={{\n                                            position: \"absolute\",\n                                            top: \"4px\",\n                                            left: \"4px\",\n                                            backgroundColor: \"rgba(59, 130, 246, 0.9)\",\n                                            borderRadius: \"4px\",\n                                            padding: \"2px 6px\",\n                                            display: \"flex\",\n                                            alignItems: \"center\",\n                                            justifyContent: \"center\",\n                                        }}\n                                        title=\"Has video marquee\"\n                                    >\n                                        <Videocam style={{ color: \"#fff\", fontSize: 16 }} />\n                                    </div>\n                                )}\n                                {/* User upload badge */}\n                                {(marquee.storageType === \"usb\" || marquee.storageType === \"internal\") && (\n                                    <div\n                                        style={{\n                                            position: \"absolute\",\n                                            bottom: \"4px\",\n                                            left: \"4px\",\n                                            backgroundColor: \"rgba(16, 185, 129, 0.9)\",\n                                            borderRadius: \"4px\",\n                                            padding: \"2px 6px\",\n                                        }}\n                                        title={`User uploaded (${marquee.storageType})`}\n                                    >\n                                        <span style={{\n                                            color: \"#fff\",\n                                            fontSize: \"10px\",\n                                            fontWeight: \"bold\",\n                                        }}>\n                                            User\n                                        </span>\n                                    </div>\n                                )}\n                                {/* Favorite button */}\n                                <div\n                                    style={{\n                                        position: \"absolute\",\n                                        top: \"4px\",\n                                        right: \"32px\",\n                                        backgroundColor: isFavorite ? \"rgba(239, 68, 68, 0.9)\" : \"rgba(0,0,0,.7)\",\n                                        borderRadius: \"50%\",\n                                        width: \"24px\",\n                                        height: \"24px\",\n                                        display: \"flex\",\n                                        alignItems: \"center\",\n                                        justifyContent: \"center\",\n                                        cursor: \"pointer\",\n                                        border: isFavorite ? \"1px solid rgba(255,100,100,.5)\" : \"1px solid rgba(255,255,255,.3)\",\n                                        transition: \"all 0.2s ease\",\n                                    }}\n                                    onClick={toggleFavorite}\n                                    onMouseEnter={(e) => {\n                                        if (!isFavorite) {\n                                            e.currentTarget.style.backgroundColor = \"rgba(239, 68, 68, 0.7)\";\n                                        }\n                                        e.currentTarget.style.transform = \"scale(1.1)\";\n                                    }}\n                                    onMouseLeave={(e) => {\n                                        if (!isFavorite) {\n                                            e.currentTarget.style.backgroundColor = \"rgba(0,0,0,.7)\";\n                                        }\n                                        e.currentTarget.style.transform = \"scale(1)\";\n                                    }}\n                                    title={isFavorite ? \"Remove from slideshow\" : \"Add to slideshow\"}\n                                >\n                                    <span style={{\n                                        color: \"#fff\",\n                                        fontSize: \"14px\",\n                                    }}>\n                                        {isFavorite ? \"\" : \"\"}\n                                    </span>\n                                </div>\n                                {/* Info button */}\n                                <div\n                                    style={{\n                                        position: \"absolute\",\n                                        top: \"4px\",\n                                        right: \"4px\",\n                                        backgroundColor: \"rgba(0,0,0,.7)\",\n                                        borderRadius: \"50%\",\n                                        width: \"24px\",\n                                        height: \"24px\",\n                                        display: \"flex\",\n                                        alignItems: \"center\",\n                                        justifyContent: \"center\",\n                                        cursor: \"pointer\",\n                                        border: \"1px solid rgba(255,255,255,.3)\",\n                                        transition: \"all 0.2s ease\",\n                                    }}\n                                    onClick={(e) => {\n                                        e.stopPropagation();\n                                        setModalOpen(true);\n                                    }}\n                                    onMouseEnter={(e) => {\n                                        e.currentTarget.style.backgroundColor = \"rgba(107,0,120,1)\";\n                                        e.currentTarget.style.transform = \"scale(1.1)\";\n                                    }}\n                                    onMouseLeave={(e) => {\n                                        e.currentTarget.style.backgroundColor = \"rgba(0,0,0,.7)\";\n                                        e.currentTarget.style.transform = \"scale(1)\";\n                                    }}\n                                >\n                                    <span style={{\n                                        color: \"#fff\",\n                                        fontSize: \"14px\",\n                                        fontWeight: \"bold\",\n                                        fontStyle: \"italic\"\n                                    }}>\n                                        i\n                                    </span>\n                                </div>\n                                {marquee.id === \"user\" && (\n                                    <span\n                                        style={{\n                                            fontWeight: 600,\n                                            position: \"absolute\",\n                                            bottom: \"0px\",\n                                            right: \"0px\",\n                                            backgroundColor: \"rgba(0,0,0,.65)\",\n                                            padding: \"1px px\",\n                                            borderRadius: \"4px 0 0 0\",\n                                        }}\n                                    >\n                                        {startCase(marquee.systemName)}\n                                    </span>\n                                )}\n                            </LazyLoad>\n                        )}\n                    </React.Fragment>\n                );\n        }\n    };\n\n    return (\n        <React.Fragment>\n            {showMarquee()}\n            <MarqueeDetailsModal\n                open={modalOpen}\n                onClose={() => setModalOpen(false)}\n                marquee={marquee}\n                system={props.system}\n                onDelete={props.onDelete}\n            />\n        </React.Fragment>\n    );\n};\n\nexport default React.memo(MarqueeItem);\n","import { FormControlLabel, Switch, Button } from \"@material-ui/core\";\nimport { CloudUpload } from \"@material-ui/icons\";\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { useAppSettings } from \"../../App\";\nimport { useDebounce } from \"../../hooks/useDebounce\";\nimport { readFilesystemMarquees } from \"../../services\";\nimport { emptyMarquee, MarqueeInfo } from \"../../types/DeviceInfo.type\";\nimport Loading from \"../Loading\";\nimport MarqueeItem from \"../MarqueeItem\";\n\nconst MarqueeList: React.FC = () => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [marqueeData, setMarqueeData] = useState<MarqueeInfo[]>([]);\n    const { system } = useParams();\n    const [searchTerm, setSearchTerm] = useState<string>(\"\");\n    const debouncedSearchTerm = useDebounce(searchTerm, 350);\n    const { streamImages, setStreamImages } = useAppSettings();\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        if (system) {\n            setLoading(true);\n\n            // Fetch marquees from filesystem only\n            readFilesystemMarquees(system)\n                .then((data) => {\n                    const marquees = data.marquees || [];\n                    setMarqueeData(marquees);\n                })\n                .catch((error) => {\n                    console.error(\"Error fetching marquees:\", error);\n                    setMarqueeData([]);\n                })\n                .finally(() => {\n                    setLoading(false);\n                });\n        }\n    }, [system]);\n\n    const handleDelete = (filename: string) => {\n        // Remove the deleted marquee from state\n        setMarqueeData(prev => prev.filter(m => m.filename !== filename));\n    };\n\n    const filterdData = () => {\n        let data = marqueeData?.filter((marquee) => {\n            const regex = RegExp(`${debouncedSearchTerm}`, \"i\");\n            return regex.test(marquee.name.toLowerCase().trim());\n        });\n        if (!data) {\n            data = [];\n        }\n        while (data.length < 10) {\n            data.push(emptyMarquee());\n        }\n        return data;\n    };\n\n    return (\n        <React.Fragment>\n            <Loading isLoading={loading} />\n            {!loading && (\n                <div className=\"layout-grid fade-in\">\n                    <div style={{ display: \"flex\", gap: \"0.5rem\", alignItems: \"stretch\" }}>\n                        <input\n                            value={searchTerm}\n                            onChange={(e) => {\n                                setSearchTerm(e.target.value);\n                            }}\n                            placeholder=\"Search...\"\n                            type=\"text\"\n                            id=\"fname\"\n                            name=\"fname\"\n                            style={{\n                                minHeight: 54,\n                                border: \"none\",\n                                borderRadius: 4,\n                                backgroundColor: \"antiquewhite\",\n                                padding: \"0 1rem\",\n                                fontSize: \"1.2rem\",\n                                flex: 1,\n                                boxSizing: \"border-box\",\n                            }}\n                        />\n                        <Button\n                            variant=\"contained\"\n                            onClick={() => navigate(`/upload-artwork?system=${system}`)}\n                            style={{\n                                backgroundColor: \"#7c3aed\",\n                                color: \"#fff\",\n                                minWidth: \"auto\",\n                                padding: \"0 1rem\",\n                            }}\n                            title=\"Upload artwork for this system\"\n                        >\n                            <CloudUpload />\n                        </Button>\n                    </div>\n                     {/* <div\n                        style={{\n                            color: \" rgba(107,0,120,1)\",\n                            backgroundColor: \"antiquewhite\",\n                            padding: \".5rem 0 .5rem 1rem\",\n                            borderRadius: \"4px\",\n                        }}\n                    >\n                     <FormControlLabel\n                            control={\n                                <Switch\n                                    checked={streamImages}\n                                    onChange={() =>\n                                        setStreamImages(!streamImages)\n                                    }\n                                    color=\"primary\"\n                                />\n                            }\n                            label={<span>Stream Marquees to Panel</span>}\n                        /> \n                    </div>*/}\n                </div>\n            )}\n\n            <div className=\"layout-grid fade-in\">\n                {filterdData().map((marquee, index) => {\n                    return (\n                        <MarqueeItem\n                            key={marquee.filename || index}\n                            system={system!}\n                            marquee={marquee}\n                            onDelete={() => handleDelete(marquee.filename)}\n                        />\n                    );\n                })}\n            </div>\n        </React.Fragment>\n    );\n};\n\nexport default MarqueeList;\n\n","import { useState, useEffect } from 'react';\n\nexport function useDebounce(value: any, delay: number) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    // Cancel the timeout if value changes (also on delay change or unmount)\n    // This is how we prevent debounced value from updating if value is changed\n    // within the delay period. Timeout gets cleared and restarted.\n    return () => clearTimeout(handler);\n  }, [value, delay]); // Only re-call effect if value or delay changes\n\n  return debouncedValue;\n}\n","export interface DeviceInfo {\n  name: string;\n  hostname: string;\n  firmwareVersion: string;\n  artworkVersion: string;\n  resolution: Resolution;\n  isPaired: boolean;\n  hasJoinedNetwork: boolean;\n  pixelcadeGen: string;\n  oled: boolean;\n  miniLCD: boolean;\n  dotMatrix: boolean;\n  sevenSegment: boolean;\n}\n\nexport interface Resolution {\n  width: number;\n  height: number;\n}\n\n\nexport interface MarqueeInfo {\n  id: string\n  name: string\n  filename: string\n  apiSystem: string\n  systemName: string\n  hasVideo: boolean\n  numGIFs: number\n  systemManufacturer: string\n  year: number\n  thumbnailPath?: string\n  storageType?: string\n}\n\nexport const emptyMarquee = () => {\n  return {\n    id: \"bad\",\n    name: \"\",\n    filename: \"\",\n    apiSystem: \"\",\n    systemName: \"\",\n    hasVideo: false,\n    numGIFs: 0,\n    systemManufacturer: \"\",\n    year: 0\n  }\n}","import React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport PowerOff from \"@material-ui/icons/PowerSettingsNew\";\nimport Refresh from \"@material-ui/icons/Refresh\";\nimport SystemUpdateAlt from \"@material-ui/icons/SystemUpdateAlt\";\nimport { rebootSystem, shutdownSystem, checkForUpdates } from \"../../services\";\nimport toast from \"react-hot-toast\";\nimport { Settings, Widgets, Collections, TextFields, Wallpaper, Assignment, CloudUpload, Favorite } from \"@material-ui/icons\";\nimport \"./styles.css\";\n\nconst MainMenu: React.FC = () => {\n    const nav = useNavigate();\n    const [updateAvailable, setUpdateAvailable] = useState<boolean>(false);\n    const [checkingUpdate, setCheckingUpdate] = useState<boolean>(true);\n    const [checkFailed, setCheckFailed] = useState<boolean>(false);\n\n    useEffect(() => {\n        checkForUpdates()\n            .then((info) => {\n                setUpdateAvailable(info?.updateAvailable || false);\n                setCheckFailed(false);\n            })\n            .catch(() => {\n                setUpdateAvailable(false);\n                setCheckFailed(true); // USB-only or no internet\n            })\n            .finally(() => {\n                setCheckingUpdate(false);\n            });\n    }, []);\n\n    return (\n        <div className=\"fade-in main-menu\">\n            <div className=\"menu-grid\">\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/consoles`)}\n                >\n                    <Collections className=\"menu-icon\" />\n                    <span className=\"menu-label\">Browse Marquees</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/widgets`)}\n                >\n                    <Widgets className=\"menu-icon\" />\n                    <span className=\"menu-label\">Widgets</span>\n                </div>\n                <div\n                    className=\"menu-card favorites-card\"\n                    onClick={() => nav(`/favorites`)}\n                >\n                    <Favorite className=\"menu-icon\" style={{ color: \"#ef4444\" }} />\n                    <span className=\"menu-label\">Favorites</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/default-marquee`)}\n                >\n                    <Wallpaper className=\"menu-icon\" />\n                    <span className=\"menu-label\">Default Marquee</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/upload-artwork`)}\n                >\n                    <CloudUpload className=\"menu-icon\" />\n                    <span className=\"menu-label\">Upload Artwork</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/text`)}\n                >\n                    <TextFields className=\"menu-icon\" />\n                    <span className=\"menu-label\">Text</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/settings`)}\n                >\n                    <Settings className=\"menu-icon\" />\n                    <span className=\"menu-label\">Settings</span>\n                </div>\n                <div\n                    className=\"menu-card\"\n                    onClick={() => nav(`/log`)}\n                >\n                    <Assignment className=\"menu-icon\" />\n                    <span className=\"menu-label\">Log</span>\n                </div>\n                <div\n                    className={`menu-card ${updateAvailable ? 'update-available' : !checkingUpdate && !checkFailed ? 'up-to-date' : ''}`}\n                    onClick={() => nav(`/update`)}\n                >\n                    <SystemUpdateAlt className=\"menu-icon\" />\n                    <span className=\"menu-label\">\n                        {checkingUpdate ? 'Checking...' : updateAvailable ? 'Update Available!' : checkFailed ? 'Updates' : 'Up to Date'}\n                    </span>\n                    {updateAvailable && <span className=\"update-badge-dot\"></span>}\n                    {!checkingUpdate && !updateAvailable && !checkFailed && <span className=\"up-to-date-check\"></span>}\n                </div>\n                <div\n                    className=\"menu-card system-card\"\n                    onClick={(e) => {\n                        // Show submenu or handle inline\n                        const target = e.currentTarget;\n                        const submenu = target.querySelector('.system-submenu');\n                        if (submenu) {\n                            submenu.classList.toggle('visible');\n                        }\n                    }}\n                >\n                    <PowerOff className=\"menu-icon\" />\n                    <span className=\"menu-label\">System</span>\n                    <div className=\"system-submenu\">\n                        <button\n                            className=\"submenu-btn\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                toast.promise(shutdownSystem(), {\n                                    loading: \"Attempting Shutdown\",\n                                    success: \"Shutdown Succeeded\",\n                                    error: \"Shutdown Failed\",\n                                });\n                            }}\n                        >\n                            <PowerOff style={{ fontSize: 18, marginRight: 6 }} />\n                            Shutdown\n                        </button>\n                        <button\n                            className=\"submenu-btn\"\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                toast.promise(rebootSystem(), {\n                                    loading: \"Attempting to Reboot\",\n                                    success: \"Reboot Succeeded\",\n                                    error: \"Reboot Failed\",\n                                });\n                            }}\n                        >\n                            <Refresh style={{ fontSize: 18, marginRight: 6 }} />\n                            Reboot\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default MainMenu;\n","export default __webpack_public_path__ + \"static/media/default-01.b07219d2.png\";","export default __webpack_public_path__ + \"static/media/default-02.f12529b3.png\";","export default __webpack_public_path__ + \"static/media/default-03.64d2bd2a.png\";","import React, { useEffect, useState, useRef } from \"react\";\nimport toast from \"react-hot-toast\";\nimport DefaultOne from \"../../assets/default-01.png\";\nimport DefaultTwo from \"../../assets/default-02.png\";\nimport DefaultThree from \"../../assets/default-03.png\";\nimport { readConsoleMarquees, updateDefaultMarquee, updateMarquee } from \"../../services\";\nimport { MarqueeInfo } from \"../../types/DeviceInfo.type\";\nimport Loading from \"../Loading\";\nimport MarqueeItem from \"../MarqueeItem\";\nimport { useAppSettings } from \"../../App\";\n\ninterface Resolution {\n    width: number;\n    height: number;\n}\n\ninterface ContextMenuProps {\n    x: number;\n    y: number;\n    onDelete: () => void;\n    onClose: () => void;\n}\n\nconst ContextMenu: React.FC<ContextMenuProps> = ({ x, y, onDelete, onClose }) => {\n    useEffect(() => {\n        const handleClickOutside = () => onClose();\n        document.addEventListener('click', handleClickOutside);\n        return () => document.removeEventListener('click', handleClickOutside);\n    }, [onClose]);\n\n    return (\n        <div \n            className=\"fixed bg-white shadow-lg rounded-lg py-1 w-24 z-50\"\n            style={{ \n                left: x + 10, \n                top: y,\n                backgroundColor: 'rgb(255, 0, 0)',\n                border: '1px solid rgb(55, 65, 81)',\n                position: 'fixed'\n            }}\n            onClick={(e) => e.stopPropagation()}\n        >\n            <div \n                className=\"px-4 py-2 text-sm text-gray-200 hover:bg-gray-700 cursor-pointer\"\n                onClick={onDelete}\n            >\n                Delete\n            </div>\n        </div>\n    );\n};\n\nconst DefaultMarquee: React.FC = () => {\n    const [loading, setLoading] = useState<boolean>(false);\n    const [marqueeData, setMarqueeData] = useState<MarqueeInfo[]>([]);\n    const [resolution, setResolution] = useState<Resolution>({ width: 1920, height: 360 });\n    const [currentDefault, setCurrentDefault] = useState<string>(\"1\");\n    const { streamImages } = useAppSettings();\n    const fileInputRef = useRef<HTMLInputElement>(null);\n    const [contextMenu, setContextMenu] = useState<{ x: number; y: number; filename: string } | null>(null);\n\n    const fetchCurrentDefault = async () => {\n        try {\n            const hostname = window.location.hostname;\n            const response = await fetch(`http://${hostname}:8080/v2/utility/marquee/default`);\n            if (response.ok) {\n                const data = await response.json();\n                console.log('Fetched current default:', data.defaultMarquee);\n                setCurrentDefault(data.defaultMarquee || \"1\");\n            }\n        } catch (error) {\n            console.error('Error fetching current default:', error);\n        }\n    };\n\n    const fetchResolutionInfo = async () => {\n        try {\n            const hostname = window.location.hostname;\n            const response = await fetch(`http://${hostname}:8080/v2/info`);\n            if (!response.ok) throw new Error('Failed to fetch device info');\n            const data = await response.json();\n            if (data.resolution) {\n                const height = data.resolution.width === 1280 ? 390 : 360;\n                setResolution({ width: data.resolution.width, height });\n            }\n        } catch (error) {\n            console.error('Error fetching device info:', error);\n            setResolution({ width: 1920, height: 360 });\n        }\n    };\n\n    const fetchMarqueeData = async () => {\n        setLoading(true);\n        try {\n            const data = await readConsoleMarquees(\"user\");\n            const marquees = data?.marquees || [];\n            const filteredMarquees = marquees.filter((marquee: MarqueeInfo) =>\n                marquee.filename && marquee.systemName && !marquee.systemName.startsWith('._')\n            );\n            setMarqueeData(filteredMarquees);\n        } catch (error) {\n            console.error(\"Error loading marquees:\", error);\n            toast.error(\"Failed to load marquees\");\n        }\n        setLoading(false);\n    };\n\n    const handleContextMenu = (event: React.MouseEvent, filename: string) => {\n        event.preventDefault();\n        const rect = (event.currentTarget as HTMLElement).getBoundingClientRect();\n        const windowWidth = window.innerWidth;\n        \n        // Calculate x position - if too close to right edge, show menu to the left\n        let xPosition = rect.right + 10;\n        if (rect.right + 100 > windowWidth) { // 100px is approximate menu width\n            xPosition = rect.left - 110; // Position menu to the left of the element\n        }\n        \n        setContextMenu({\n            x: xPosition,\n            y: rect.top,\n            filename: filename\n        });\n    };\n\n    async function handleDeleteMarquee(filename: string) {\n        const hostname = window.location.hostname;\n        try {\n            console.log('Attempting to delete:', filename); // Debug log\n\n            // Check if we're deleting the current default (filename is \"default-al.jpg\", currentDefault is \"default-al\")\n            const filenameWithoutExt = filename.replace('.jpg', '');\n            const isDeletingDefault = currentDefault === filenameWithoutExt;\n\n            const response = await fetch(\n                `http://${hostname}:8080/v2/marquees/user?filename=${encodeURIComponent(filename)}`,\n                {\n                    method: 'DELETE',\n                    headers: {\n                        'Accept': 'application/json'\n                    }\n                }\n            );\n\n            console.log('Delete response status:', response.status); // Debug log\n            const responseText = await response.text();\n            console.log('Delete response:', responseText); // Debug log\n\n            if (!response.ok) {\n                throw new Error(`Delete failed: ${responseText}`);\n            }\n\n            toast.success('Marquee deleted successfully');\n            await fetchMarqueeData();\n\n            // If we deleted the current default, fall back to default #1\n            if (isDeletingDefault) {\n                console.log('Deleted marquee was the default, falling back to default #1');\n                await handleDefaultMarquee(1);\n            }\n        } catch (e) {\n            console.error('Delete error:', e);\n            toast.error('Failed to delete marquee');\n        }\n        setContextMenu(null);\n    }\n\n    const handleDefaultMarquee = async (value: number | MarqueeInfo) => {\n        if (typeof value === 'number') {\n            // Built-in default marquees (1, 2, 3)\n            await toast.promise(\n                updateDefaultMarquee(value),\n                {\n                    loading: \"Setting default marquee\",\n                    success: \"Default Marquee Set\",\n                    error: \"Couldn't set the default marquee\"\n                }\n            );\n            setCurrentDefault(String(value));\n            // Display the built-in default marquee (silently, no toast, no fuzzy matching)\n            await updateMarquee(\"user\", `default${value}`, streamImages, true);\n        } else {\n            // Custom user-uploaded marquee\n            const fullFilename = `${value.systemName}-${value.filename}`;\n            console.log('Setting default to:', fullFilename);\n            await toast.promise(\n                updateDefaultMarquee(fullFilename),\n                {\n                    loading: \"Setting default marquee\",\n                    success: \"Default Marquee Set\",\n                    error: \"Couldn't set the default marquee\"\n                }\n            );\n            setCurrentDefault(fullFilename);\n            // Display the custom marquee (silently, no toast, no fuzzy matching)\n            await updateMarquee(\"user\", fullFilename, streamImages, true);\n        }\n    };\n\n    const validateFilename = (filename: string) => {\n        const pattern = /^[a-zA-Z0-9]+-[a-zA-Z0-9]+\\.jpg$/i;\n        return pattern.test(filename);\n    };\n\n    const validateImage = (file: File): Promise<boolean> => {\n        return new Promise((resolve) => {\n            const img = new Image();\n            img.onload = () => resolve(img.width === resolution.width && img.height === resolution.height);\n            img.onerror = () => resolve(false);\n            img.src = URL.createObjectURL(file);\n        });\n    };\n\n    const handleFileUpload = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        if (!file) return;\n\n        if (!file.type.includes('jpeg') && !file.type.includes('jpg')) {\n            toast.error('Please upload a JPG file');\n            return;\n        }\n\n        if (!validateFilename(file.name)) {\n            toast.error('Filename must be in format x-y.jpg (e.g., default-sega.jpg)');\n            return;\n        }\n\n        const isValidDimensions = await validateImage(file);\n        if (!isValidDimensions) {\n            toast.error(`Image must be exactly ${resolution.width}x${resolution.height} pixels`);\n            return;\n        }\n\n        const formData = new FormData();\n        formData.append('file', file);\n\n        try {\n            const response = await fetch('/v2/marquees/user', {\n                method: 'POST',\n                body: formData\n            });\n\n            if (!response.ok) throw new Error('Upload failed');\n\n            await updateMarquee(\"user\", file.name.replace('.jpg', ''), streamImages);\n            await fetchMarqueeData();\n            toast.success('Marquee uploaded successfully');\n            event.target.value = '';\n        } catch (error) {\n            console.error('Upload error:', error);\n            toast.error('Failed to upload marquee');\n        }\n    };\n\n    useEffect(() => {\n        fetchResolutionInfo();\n        fetchMarqueeData();\n        fetchCurrentDefault();\n    }, []);\n\n    return (\n        <React.Fragment>\n            <div style={{ marginLeft: '30px', marginBottom: '10px' }}>\n                <button\n                    onClick={() => fileInputRef.current?.click()}\n                    style={{\n                        padding: '8px 16px',\n                        backgroundColor: '#4CAF50',\n                        color: 'white',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: 'pointer'\n                    }}\n                >\n                    Upload Marquee\n                </button>\n                <input\n                    ref={fileInputRef}\n                    type=\"file\"\n                    accept=\".jpg,.jpeg\"\n                    onChange={handleFileUpload}\n                    style={{ display: 'none' }}\n                />\n            </div>\n            <div style={{ marginLeft: '30px', marginBottom: '20px' }}>\n                <p style={{ color: '#d1d5db', fontSize: '14px' }}>\n                    Note: Custom marquee files must follow the naming convention: <span style={{ background: 'rgba(0,0,0,0.3)', padding: '4px 8px', borderRadius: '4px', fontFamily: 'monospace' }}>default-yourfilename.jpg</span>\n                </p>\n            </div>\n            <div style={{ marginLeft: '30px', marginBottom: '20px' }}>\n                <p style={{ color: '#d1d5db', fontSize: '14px' }}>\n                    Select desired marquee and it will appear by default on startup \n                </p>\n            </div>\n            <Loading isLoading={loading} />\n            <div className=\"layout-grid fade-in\">\n                <div style={{ position: \"relative\" }}>\n                    <img\n                        onClick={() => handleDefaultMarquee(1)}\n                        style={{\n                            backgroundColor: \"rgba(255, 255, 255, .05)\",\n                            cursor: \"pointer\",\n                            position: \"relative\",\n                            minHeight: 40,\n                            border: currentDefault === \"1\" ? \"3px solid #4CAF50\" : \"none\",\n                            borderRadius: \"4px\",\n                        }}\n                        src={DefaultOne}\n                        alt=\"marquee 1\"\n                        className=\"grid-item fade-in\"\n                    />\n                    {currentDefault === \"1\" && (\n                        <div style={{\n                            position: \"absolute\",\n                            top: \"4px\",\n                            left: \"4px\",\n                            backgroundColor: \"#4CAF50\",\n                            borderRadius: \"50%\",\n                            width: \"24px\",\n                            height: \"24px\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\",\n                        }}>\n                            <span style={{ color: \"#fff\", fontSize: \"14px\", fontWeight: \"bold\" }}></span>\n                        </div>\n                    )}\n                </div>\n                <div style={{ position: \"relative\" }}>\n                    <img\n                        onClick={() => handleDefaultMarquee(2)}\n                        style={{\n                            backgroundColor: \"rgba(255, 255, 255, .05)\",\n                            cursor: \"pointer\",\n                            position: \"relative\",\n                            minHeight: 40,\n                            border: currentDefault === \"2\" ? \"3px solid #4CAF50\" : \"none\",\n                            borderRadius: \"4px\",\n                        }}\n                        src={DefaultTwo}\n                        alt=\"marquee 2\"\n                        className=\"grid-item fade-in\"\n                    />\n                    {currentDefault === \"2\" && (\n                        <div style={{\n                            position: \"absolute\",\n                            top: \"4px\",\n                            left: \"4px\",\n                            backgroundColor: \"#4CAF50\",\n                            borderRadius: \"50%\",\n                            width: \"24px\",\n                            height: \"24px\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\",\n                        }}>\n                            <span style={{ color: \"#fff\", fontSize: \"14px\", fontWeight: \"bold\" }}></span>\n                        </div>\n                    )}\n                </div>\n                <div style={{ position: \"relative\" }}>\n                    <img\n                        onClick={() => handleDefaultMarquee(3)}\n                        style={{\n                            backgroundColor: \"rgba(255, 255, 255, .05)\",\n                            cursor: \"pointer\",\n                            position: \"relative\",\n                            minHeight: 40,\n                            border: currentDefault === \"3\" ? \"3px solid #4CAF50\" : \"none\",\n                            borderRadius: \"4px\",\n                        }}\n                        src={DefaultThree}\n                        alt=\"marquee 3\"\n                        className=\"grid-item fade-in\"\n                    />\n                    {currentDefault === \"3\" && (\n                        <div style={{\n                            position: \"absolute\",\n                            top: \"4px\",\n                            left: \"4px\",\n                            backgroundColor: \"#4CAF50\",\n                            borderRadius: \"50%\",\n                            width: \"24px\",\n                            height: \"24px\",\n                            display: \"flex\",\n                            alignItems: \"center\",\n                            justifyContent: \"center\",\n                        }}>\n                            <span style={{ color: \"#fff\", fontSize: \"14px\", fontWeight: \"bold\" }}></span>\n                        </div>\n                    )}\n                </div>\n                {marqueeData.map((item: MarqueeInfo) => {\n                    const fullFilename = `${item.systemName}-${item.filename}`;\n                    const isDefault = currentDefault === fullFilename;\n                    console.log(`Comparing: currentDefault=\"${currentDefault}\" vs fullFilename=\"${fullFilename}\" => isDefault=${isDefault}`);\n                    return (\n                        <div\n                            key={item.filename}\n                            style={{\n                                position: \"relative\",\n                                border: isDefault ? \"3px solid #4CAF50\" : \"none\",\n                                borderRadius: \"4px\",\n                            }}\n                            onContextMenu={(e) => {\n                                const completeFilename = `${item.systemName}-${item.filename}.jpg`;\n                                console.log('Full MarqueeInfo item:', item);\n                                console.log('Constructed filename for delete:', completeFilename);\n                                handleContextMenu(e, completeFilename);\n                            }}\n                        >\n                            <MarqueeItem\n                                system={\"user\"}\n                                marquee={item}\n                                onClick={() => handleDefaultMarquee(item)}\n                            />\n                            {isDefault && (\n                                <div style={{\n                                    position: \"absolute\",\n                                    top: \"4px\",\n                                    left: \"4px\",\n                                    backgroundColor: \"#4CAF50\",\n                                    borderRadius: \"50%\",\n                                    width: \"24px\",\n                                    height: \"24px\",\n                                    display: \"flex\",\n                                    alignItems: \"center\",\n                                    justifyContent: \"center\",\n                                    zIndex: 10,\n                                }}>\n                                    <span style={{ color: \"#fff\", fontSize: \"14px\", fontWeight: \"bold\" }}></span>\n                                </div>\n                            )}\n                            {/* Delete button */}\n                            <div\n                                style={{\n                                    position: \"absolute\",\n                                    top: \"4px\",\n                                    right: \"4px\",\n                                    backgroundColor: \"rgba(200, 0, 0, 0.8)\",\n                                    borderRadius: \"50%\",\n                                    width: \"24px\",\n                                    height: \"24px\",\n                                    display: \"flex\",\n                                    alignItems: \"center\",\n                                    justifyContent: \"center\",\n                                    cursor: \"pointer\",\n                                    zIndex: 10,\n                                    border: \"1px solid rgba(255,255,255,.3)\",\n                                    transition: \"all 0.2s ease\",\n                                }}\n                                onClick={(e) => {\n                                    e.stopPropagation();\n                                    const completeFilename = `${item.systemName}-${item.filename}.jpg`;\n                                    if (window.confirm(`Delete \"${completeFilename}\"?`)) {\n                                        handleDeleteMarquee(completeFilename);\n                                    }\n                                }}\n                                onMouseEnter={(e) => {\n                                    e.currentTarget.style.backgroundColor = \"rgba(255, 0, 0, 1)\";\n                                    e.currentTarget.style.transform = \"scale(1.1)\";\n                                }}\n                                onMouseLeave={(e) => {\n                                    e.currentTarget.style.backgroundColor = \"rgba(200, 0, 0, 0.8)\";\n                                    e.currentTarget.style.transform = \"scale(1)\";\n                                }}\n                            >\n                                <span style={{ color: \"#fff\", fontSize: \"14px\", fontWeight: \"bold\" }}></span>\n                            </div>\n                        </div>\n                    );\n                })}\n            </div>\n            {contextMenu && (\n                <ContextMenu\n                    x={contextMenu.x}\n                    y={contextMenu.y}\n                    onDelete={() => handleDeleteMarquee(contextMenu.filename)}\n                    onClose={() => setContextMenu(null)}\n                />\n            )}\n        </React.Fragment>\n    );\n};\n\nexport default DefaultMarquee;","export const FontList: string[] = [\n    \"LiberationSans-Bold\",\n    \"LiberationSans-Regular\",\n    \"Orbitron-SemiBold\",\n    \"Arial Narrow 7\",\n    \"Benegraphic\",\n    \"Casio FX-702P\",\n    \"Decoder\",\n    \"dotty\",\n    \"DPComic\",\n    \"Ghastly Panic\",\n    \"Gnuolane\",\n    \"Grinched\",\n    \"Handwriting\",\n    \"Harry P\",\n    \"Haunting Attraction\",\n    \"Minimal4\",\n    \"Morris Roman\",\n    \"MostlyMono\",\n    \"Neon 80s\",\n    \"Nintendo DS BIOS\",\n    \"Not So Stout Deco\",\n    \"Pixelated\",\n    \"Pixeled\",\n    \"RetroBoundmini\",\n    \"Samba Is Dead\",\n    \"Shlop\",\n    \"Space Patrol NF\",\n    \"Star Jedi Hollow\",\n    \"Star Jedi\",\n    \"Still Time\",\n    \"Tall Films Fine\",\n    \"techno overload (BRK)\",\n    \"TR2N\",\n    \"TRON\",\n    \"Vectroid\",\n    \"Videophreak\",\n];\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\nexport const toggleVideoMarquees = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=ImageMarqueesOnly&value=${value ? \"yes\" : \"no\"}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const toggleTextOnMainPanel = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=SubDisplayScrollingOnly&value=${value ? \"yes\" : \"no\"}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const disableVideoMarquees = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=ImageMarqueesOnly&value=yes`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const enableVideoMarquees = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=ImageMarqueesOnly&value=no`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const disableScrolling = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=SubDisplayScrollingOnly&value=yes`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const enableScrolling = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=SubDisplayScrollingOnly&value=no`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updateDeviceName = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=DisplayName&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updateDeviceFont = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=font&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updatePixelcadeDotTypeSPI = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=PixelcadeDotType&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updatePixelcadeMiniDisplayTypeI2C = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=PixelcadeMiniDisplayType&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updatePixelcadeDeviceOLEDMode = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=PixelcadeOLEDMode&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n\nexport const updateFontColor = (newName: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\n        \"\"\n    )}/settings?key=textColor&value=${newName}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const readSettings = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=getSettings`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const updateSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${encodeURIComponent(key)}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\nexport const toggleMarqueeOverlays = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=marqueeOverlays&value=${value ? 'yes' : 'no'}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const toggleVideoLoopMode = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=videoLoopMode&value=${value ? 'yes' : 'no'}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const toggleMiniOLEDGlitchMode = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=PixelcadeOLEDGlitch&value=${value ? 'yes' : 'no'}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const toggleFuzzyMatch = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=fuzzyMatch&value=${value ? 'yes' : 'no'}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const updateFuzzyMatchDistance = (distance: number): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=fuzzyMatchDistance&value=${distance}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const updateFirmware = (beta: boolean = false): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/update${beta ? '?beta=true' : ''}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const toggleDebugMode = (value: boolean): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=debug&value=${value ? 'yes' : 'no'}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const getWiFiConfig = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/wifisetup`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n  };\n\n  export const saveWiFiConfig = (ssid: string, password: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/wifisetup`;\n\n    return axios.post(requestUrl, { ssid, password }).then((value) => {\n        return value.data;\n    });\n  };\n\n","import { Button, FormControlLabel, Switch } from \"@material-ui/core\";\nimport React, { useEffect, useState, ReactElement } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { FontList } from \"../../const/fonts\";\nimport { readDeviceInfo } from \"../../services\";\nimport { DeviceInfo } from \"../../types/DeviceInfo.type\";\nimport {\n  readSettings,\n  toggleMarqueeOverlays,\n  toggleVideoLoopMode,\n  toggleFuzzyMatch,\n  updateFuzzyMatchDistance,\n  toggleTextOnMainPanel,\n  toggleVideoMarquees,\n  updateDeviceFont,\n  updatePixelcadeDotTypeSPI,\n  updatePixelcadeMiniDisplayTypeI2C,\n  updatePixelcadeDeviceOLEDMode,\n  // toggleMiniOLEDGlitchMode, // Not enabled yet\n  updateDeviceName,\n} from \"../../services/settings\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\n\nimport \"react-responsive-select/dist/react-responsive-select.css\";\n\ntype SettingType = {\n  font: string;\n  SubDisplayScrollingOnly: boolean;\n  ImageMarqueesOnly: boolean;\n  SubDisplayNumModules: number;\n  FontColor: string;\n  marqueeOverlays: boolean;\n  videoLoopMode: boolean;\n  fuzzyMatch: boolean;\n  fuzzyMatchDistance: number;\n  PixelcadeDotType: string;\n  PixelcadeMiniDisplayType: string;\n  PixelcadeOLEDMode: string;\n  PixelcadeOLEDGlitch: boolean;\n};\n\n// WiFi types\ninterface WiFiStatus {\n  connected: boolean;\n  ssid: string;\n  macAddress: string;\n  ipAddress: string;\n  hasInternet: boolean;\n  signalStrength: number;\n}\n\ninterface WiFiNetwork {\n  ssid: string;\n  signal: number;\n  security: string;\n  inUse: boolean;\n}\n\n// USB Storage types\ninterface USBStorageStatus {\n  usbDetected: boolean;\n  usbMounted: boolean;\n  usbDevice: string;\n  usbLabel: string;\n  usbMountPoint: string;\n  usbFileSystem: string;\n  usbFreeBytes: number;\n  usbTotalBytes: number;\n  hasLCDFolder: boolean;\n  hasMP4Folder: boolean;\n  readyForUse: boolean;\n  canFormat: boolean;\n  errorMessage: string;\n}\n\nconst DeviceSettings = (): ReactElement => {\n  const [deviceName, setDeviceName] = useState<string>(\"\");\n  const [settings, setSettings] = useState<SettingType | undefined>();\n  const [deviceInfo, setDeviceInfo] = useState<DeviceInfo>();\n\n  // WiFi state\n  const [wifiStatus, setWifiStatus] = useState<WiFiStatus | null>(null);\n  const [wifiNetworks, setWifiNetworks] = useState<WiFiNetwork[]>([]);\n  const [wifiScanning, setWifiScanning] = useState<boolean>(false);\n  const [wifiConnecting, setWifiConnecting] = useState<boolean>(false);\n  const [selectedNetwork, setSelectedNetwork] = useState<string>(\"\");\n  const [wifiPassword, setWifiPassword] = useState<string>(\"\");\n  const [showWifiPassword, setShowWifiPassword] = useState<boolean>(false);\n  const [showNetworkList, setShowNetworkList] = useState<boolean>(false);\n\n  // USB Storage state\n  const [usbStatus, setUsbStatus] = useState<USBStorageStatus | null>(null);\n  const [usbFormatting, setUsbFormatting] = useState<boolean>(false);\n\n  const hostname = window.location.hostname;\n\n  // Fetch WiFi status\n  const fetchWifiStatus = async () => {\n    try {\n      const response = await fetch(`http://${hostname}:8080/v2/wifi/status`);\n      if (response.ok) {\n        const data = await response.json();\n        setWifiStatus(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching WiFi status:\", error);\n    }\n  };\n\n  // Scan for WiFi networks\n  const scanWifiNetworks = async () => {\n    setWifiScanning(true);\n    try {\n      const response = await fetch(`http://${hostname}:8080/v2/wifi/scan`);\n      if (response.ok) {\n        const data = await response.json();\n        setWifiNetworks(data.networks || []);\n      }\n    } catch (error) {\n      console.error(\"Error scanning WiFi networks:\", error);\n    } finally {\n      setWifiScanning(false);\n    }\n  };\n\n  // Connect to WiFi network\n  const connectToWifi = async () => {\n    if (!selectedNetwork) {\n      toast.error(\"Please select a network\");\n      return;\n    }\n\n    setWifiConnecting(true);\n    try {\n      const response = await fetch(`http://${hostname}:8080/v2/wifi/connect`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ ssid: selectedNetwork, password: wifiPassword }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        toast.success(data.message);\n        setShowNetworkList(false);\n        setSelectedNetwork(\"\");\n        setWifiPassword(\"\");\n        // Refresh status after connection\n        setTimeout(fetchWifiStatus, 2000);\n      } else {\n        toast.error(data.message || \"Connection failed\");\n      }\n    } catch (error) {\n      toast.error(\"Failed to connect to network\");\n    } finally {\n      setWifiConnecting(false);\n    }\n  };\n\n  // Fetch USB storage status\n  const fetchUsbStatus = async () => {\n    try {\n      const response = await fetch(`http://${hostname}:8080/v2/usb/status`);\n      if (response.ok) {\n        const data = await response.json();\n        setUsbStatus(data);\n      }\n    } catch (error) {\n      console.error(\"Error fetching USB status:\", error);\n    }\n  };\n\n  // Format USB drive\n  const formatUsbDrive = async () => {\n    if (!usbStatus?.usbDevice) {\n      toast.error(\"No USB device detected\");\n      return;\n    }\n\n    if (!window.confirm(\"This will ERASE ALL DATA on the USB drive and format it for Pixelcade use. Continue?\")) {\n      return;\n    }\n\n    setUsbFormatting(true);\n    try {\n      const response = await fetch(`http://${hostname}:8080/v2/usb/format`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ device: usbStatus.usbDevice, label: \"PixelUSB\" }),\n      });\n\n      const data = await response.json();\n\n      if (data.success) {\n        toast.success(data.message);\n        // Refresh status after format\n        setTimeout(fetchUsbStatus, 2000);\n      } else {\n        toast.error(data.message || \"Format failed\");\n      }\n    } catch (error) {\n      toast.error(\"Failed to format USB drive\");\n    } finally {\n      setUsbFormatting(false);\n    }\n  };\n\n  // Helper to format bytes\n  const formatBytes = (bytes: number): string => {\n    if (bytes === 0) return \"0 B\";\n    const k = 1024;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n  };\n\n  useEffect(() => {\n    readDeviceInfo().then((data) => {\n      setDeviceName(data.name);\n      setDeviceInfo(data);\n    });\n    readSettings()\n      .then((data) => {\n        setSettings(data);\n      })\n      .catch();\n\n    // Load WiFi status\n    fetchWifiStatus();\n    // Load USB status\n    fetchUsbStatus();\n  }, []);\n\n\n    const getRebootMessage = (message: string) => {\n        return (\n            <div>\n                <p>{message}</p>\n            </div>\n        );\n    };\n    const updateImageMarqueesOnly = () => {\n        if (settings) {\n            toast.promise(\n                toggleVideoMarquees(!settings.ImageMarqueesOnly),\n                {\n                    loading: \"Updating video marquees settings\",\n                    success: () => {\n                        setSettings({\n                            ...settings,\n                            ImageMarqueesOnly: !settings.ImageMarqueesOnly,\n                        });\n                        return getRebootMessage(\n                            `Video marquees settings updated`\n                        );\n                    },\n                    error: \"Setting failed\",\n                },\n                { duration: 4000 }\n            );\n        }\n    };\n\n    // OLED Glitch Mode - not enabled yet, commented out\n    // const updateMiniOLEDGlitchMode = () => {\n    //   if (settings) {\n    //       toast.promise(\n    //         toggleMiniOLEDGlitchMode(!settings.PixelcadeOLEDGlitch),\n    //           {\n    //               loading: \"Updating Mini OLED Glitch Mode\",\n    //               success: () => {\n    //                   setSettings({\n    //                       ...settings,\n    //                       PixelcadeOLEDGlitch: !settings.PixelcadeOLEDGlitch,\n    //                   });\n    //                   return getRebootMessage(\n    //                       `Mini OLED Glitch Mode Updated`\n    //                   );\n    //               },\n    //               error: \"Mini OLED Glitch Mode Update Failed\",\n    //           },\n    //           { duration: 4000 }\n    //       );\n    //   }\n    // };\n    \n\n    const updateTextOnMainPanel = () => {\n        if (settings) {\n            toast.promise(\n                toggleTextOnMainPanel(!settings.SubDisplayScrollingOnly),\n                {\n                    loading: \"Updating Text scrolling settings\",\n                    success: () => {\n                        setSettings({\n                            ...settings,\n                            SubDisplayScrollingOnly:\n                                !settings.SubDisplayScrollingOnly,\n                        });\n                        return getRebootMessage(\n                            `Text scrolling settings updated`\n                        );\n                    },\n                    error: \"Setting failed\",\n                },\n                { duration: 4000 }\n            );\n        }\n    };\n\n    const updateName = () => {\n        toast.promise(\n            updateDeviceName(deviceName),\n            {\n                loading: \"Updating Device Name\",\n                success: () => {\n                    return getRebootMessage(`Device Name updated`);\n                },\n                error: \"Setting failed\",\n            },\n            { duration: 4000 }\n        );\n    };\n\n    const updateFont = () => {\n        if (settings) {\n            toast.promise(\n                updateDeviceFont(settings.font),\n                {\n                    loading: \"Updating Device Font\",\n                    success: \"Font updated\",\n                    error: \"Setting failed\",\n                },\n                { duration: 4000 }\n            );\n        }\n    };\n\n   const updatePixelcadeDotType = () => {\n      if (settings) {\n          toast.promise(\n              updatePixelcadeDotTypeSPI(settings.PixelcadeDotType),\n              {\n                  loading: \"Updating Pixelcade Sub-Display Type\",\n                  success: \"Sub-Display Type updated\",\n                  error: \"Sub-Display Type Updated Failed\",\n              },\n              { duration: 4000 }\n          );\n      }\n  }; \n\n  const updatePixelcadeMiniDisplayType = () => {\n    if (settings) {\n        toast.promise(\n          updatePixelcadeMiniDisplayTypeI2C(settings.PixelcadeMiniDisplayType),\n            {\n                loading: \"Updating Pixelcade Mini Display Type\",\n                success: \"Pixelcade Mini Display Type Updated\",\n                error: \"Pixelcade Mini Display Updated Failed\",\n            },\n            { duration: 4000 }\n        );\n    }\n}; \n\nconst updatePixelcadeOLEDMode = () => {\n  if (settings) {\n      toast.promise(\n        updatePixelcadeDeviceOLEDMode(settings.PixelcadeOLEDMode),\n          {\n              loading: \"Updating Pixelcade Mini OLED Mode\",\n              success: \"Pixelcade Mini OLED Mode Updated\",\n              error: \"Pixelcade Mini OLED Mode Update Failed\",\n          },\n          { duration: 4000 }\n      );\n  }\n}; \n\n  const getFonts = () => {\n    return FontList.map((font) => {\n      return {\n        value: font,\n        text: font,\n      };\n    });\n  };\n\n  const updateMarqueeOverlay = () => {\n    if (settings) {\n      toast.promise(\n        toggleMarqueeOverlays(!settings.marqueeOverlays),\n        {\n          loading: \"Updating Marquee Overlay settings\",\n          success: () => {\n            setSettings({\n              ...settings,\n              marqueeOverlays: !settings.marqueeOverlays,\n            });\n            return getRebootMessage(`Marquee Overlay settings updated`);\n          },\n          error: \"Setting failed\",\n        },\n        { duration: 4000 }\n      );\n    }\n  };\n\n  const updateVideoLoopMode = () => {\n    if (settings) {\n      toast.promise(\n        toggleVideoLoopMode(!settings.videoLoopMode),\n        {\n          loading: \"Updating Video Loop Mode\",\n          success: () => {\n            setSettings({\n              ...settings,\n              videoLoopMode: !settings.videoLoopMode,\n            });\n            return getRebootMessage(`Video Loop Mode ${!settings.videoLoopMode ? 'enabled' : 'disabled'}`);\n          },\n          error: \"Setting failed\",\n        },\n        { duration: 4000 }\n      );\n    }\n  };\n\n  const updateFuzzyMatch = () => {\n    if (settings) {\n      toast.promise(\n        toggleFuzzyMatch(!settings.fuzzyMatch),\n        {\n          loading: \"Updating Fuzzy Matching settings\",\n          success: () => {\n            setSettings({\n              ...settings,\n              fuzzyMatch: !settings.fuzzyMatch,\n            });\n            return getRebootMessage(`Fuzzy Matching settings updated`);\n          },\n          error: \"Setting failed\",\n        },\n        { duration: 4000 }\n      );\n    }\n  };\n\n  const handleFuzzyMatchDistanceChange = (newDistance: number) => {\n    if (settings) {\n      toast.promise(\n        updateFuzzyMatchDistance(newDistance),\n        {\n          loading: \"Updating Fuzzy Match Distance\",\n          success: () => {\n            setSettings({\n              ...settings,\n              fuzzyMatchDistance: newDistance,\n            });\n            return `Fuzzy Match Distance set to ${newDistance}`;\n          },\n          error: \"Setting failed\",\n        },\n        { duration: 4000 }\n      );\n    }\n  };\n\n  // Helper to get signal strength indicator\n  const getSignalIcon = (signal: number): string => {\n    if (signal >= 70) return \"\";\n    if (signal >= 50) return \"\";\n    if (signal >= 30) return \"\";\n    return \"\";\n  };\n\n  return (\n    <div className=\"fade-in\">\n      {settings && (\n        <div className=\"layout-grid\" style={{ marginTop: \"0.5rem\", gap: \"2rem\" }}>\n          {/* Device Name Section */}\n          <div className=\"settings\">\n            <label style={{ margin: \"1rem 0 .5rem 0\" }}>Device Name</label>\n            <input\n              style={{\n                height: 36,\n                fontSize: \"1.2rem\",\n                padding: \"0 0.4rem\",\n              }}\n              type=\"text\"\n              id=\"fname\"\n              name=\"fname\"\n              value={deviceName}\n              onChange={(event) => {\n                setDeviceName(event.target.value);\n              }}\n            />\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 2fr\",\n                gridGap: \"1rem\",\n              }}\n            >\n              <div />\n              <Button\n                style={{ marginTop: \"1.2rem\" }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => updateName()}\n              >\n                Update\n              </Button>\n            </div>\n          </div>\n\n          {/* Device Info Section */}\n        <div className=\"settings\">\n          <label style={{ margin: \"1rem 0 .5rem 0\", fontWeight: \"bold\" }}>Device Info</label>\n          {deviceInfo && (\n            <div style={{ fontSize: \"1rem\", lineHeight: \"1.6\" }}>\n              <p><strong>Name:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>{deviceInfo.name}</span></p>\n              <p><strong>Hostname:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>{deviceInfo.hostname}</span></p>\n              <p><strong>Firmware:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>v{deviceInfo.firmwareVersion}</span></p>\n              <p><strong>Artwork Version:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>{deviceInfo.artworkVersion}</span></p>\n              <p><strong>Resolution:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>{deviceInfo.resolution.width}x{deviceInfo.resolution.height}</span></p>\n              <p><strong>Generation:</strong> <span style={{ color: \"#666\", fontWeight: \"normal\" }}>{deviceInfo.pixelcadeGen}</span></p>\n              <p><strong>Connected Sub-Displays:</strong></p>\n              <ul style={{ marginLeft: \"1.5rem\", marginTop: \"0.5rem\", color: \"#666\", fontWeight: \"normal\" }}>\n                {deviceInfo.oled && <li>OLED Display</li>}\n                {deviceInfo.miniLCD && <li>Mini LCD</li>}\n                {deviceInfo.dotMatrix && <li>Dot Matrix</li>}\n                {deviceInfo.sevenSegment && <li>Seven Segment</li>}\n              </ul>\n              <p><strong>Network Status:</strong> <span style={{ color: deviceInfo.hasJoinedNetwork ? \"green\" : \"red\", fontWeight: \"normal\" }}>\n                {deviceInfo.hasJoinedNetwork ? \"Connected\" : \"Not Connected\"}\n              </span></p>\n              <p><strong>Pairing Status:</strong> <span style={{ color: deviceInfo.isPaired ? \"green\" : \"red\", fontWeight: \"normal\" }}>\n                {deviceInfo.isPaired ? \"Paired\" : \"Not Paired\"}\n              </span></p>\n            </div>\n          )}\n        </div>\n\n          {/* WiFi Setup Section */}\n          <div className=\"settings\">\n            <label style={{ margin: \"1rem 0 .5rem 0\", fontWeight: \"bold\" }}>WiFi Setup</label>\n            <p style={{ marginBottom: \"1rem\" }}>\n              Connect to your home WiFi to enable widgets, updates, and other features that require internet access.\n            </p>\n\n            {/* Connection Status */}\n            {wifiStatus && (\n              <div style={{\n                marginBottom: \"1rem\",\n                padding: \"0.75rem\",\n                background: wifiStatus.connected ? (wifiStatus.hasInternet ? \"#e8f5e9\" : \"#fff3e0\") : \"#ffebee\",\n                borderRadius: \"4px\",\n                border: `1px solid ${wifiStatus.connected ? (wifiStatus.hasInternet ? \"#4caf50\" : \"#ff9800\") : \"#f44336\"}`\n              }}>\n                <p style={{ margin: 0, fontWeight: \"bold\", color: wifiStatus.connected ? (wifiStatus.hasInternet ? \"#2e7d32\" : \"#e65100\") : \"#c62828\" }}>\n                  {wifiStatus.connected\n                    ? (wifiStatus.hasInternet ? \" Connected with Internet\" : \" Connected (No Internet)\")\n                    : \" Not Connected\"}\n                </p>\n                {wifiStatus.connected && (\n                  <>\n                    <p style={{ margin: \"0.5rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                      <strong>Network:</strong> {wifiStatus.ssid}\n                    </p>\n                    <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                      <strong>IP Address:</strong> {wifiStatus.ipAddress}\n                    </p>\n                    <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                      <strong>Signal:</strong> {getSignalIcon(wifiStatus.signalStrength)} ({wifiStatus.signalStrength}%)\n                    </p>\n                  </>\n                )}\n              </div>\n            )}\n\n            {/* MAC Address Display */}\n            {wifiStatus && (\n              <p style={{ margin: \"0 0 1rem 0\", fontSize: \"0.9rem\" }}>\n                <strong>MAC Address:</strong> <span style={{ fontFamily: \"monospace\", color: \"#666\" }}>{wifiStatus.macAddress || \"Unknown\"}</span>\n              </p>\n            )}\n\n            {/* Change Network / Connect Button */}\n            {!showNetworkList ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  setShowNetworkList(true);\n                  scanWifiNetworks();\n                }}\n                style={{ marginBottom: \"1rem\" }}\n              >\n                {wifiStatus?.connected ? \"Change WiFi Network\" : \"Connect to WiFi\"}\n              </Button>\n            ) : (\n              <div style={{ marginBottom: \"1rem\" }}>\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", marginBottom: \"0.5rem\" }}>\n                  <label style={{ fontWeight: \"bold\" }}>Available Networks</label>\n                  <div>\n                    <Button\n                      variant=\"outlined\"\n                      size=\"small\"\n                      onClick={scanWifiNetworks}\n                      disabled={wifiScanning}\n                      style={{ marginRight: \"0.5rem\" }}\n                    >\n                      {wifiScanning ? \"Scanning...\" : \"Refresh\"}\n                    </Button>\n                    <Button\n                      variant=\"outlined\"\n                      size=\"small\"\n                      onClick={() => {\n                        setShowNetworkList(false);\n                        setSelectedNetwork(\"\");\n                        setWifiPassword(\"\");\n                      }}\n                    >\n                      Cancel\n                    </Button>\n                  </div>\n                </div>\n\n                {/* Network List */}\n                <div style={{\n                  maxHeight: \"200px\",\n                  overflowY: \"auto\",\n                  border: \"1px solid #ddd\",\n                  borderRadius: \"4px\",\n                  marginBottom: \"1rem\"\n                }}>\n                  {wifiScanning ? (\n                    <p style={{ padding: \"1rem\", textAlign: \"center\", color: \"#666\" }}>Scanning for networks...</p>\n                  ) : wifiNetworks.length === 0 ? (\n                    <p style={{ padding: \"1rem\", textAlign: \"center\", color: \"#666\" }}>No networks found</p>\n                  ) : (\n                    wifiNetworks.map((network, index) => (\n                      <div\n                        key={`${network.ssid}-${index}`}\n                        onClick={() => setSelectedNetwork(network.ssid)}\n                        style={{\n                          padding: \"0.75rem\",\n                          cursor: \"pointer\",\n                          background: selectedNetwork === network.ssid ? \"#e3f2fd\" : (index % 2 === 0 ? \"#fafafa\" : \"#fff\"),\n                          borderBottom: index < wifiNetworks.length - 1 ? \"1px solid #eee\" : \"none\",\n                          display: \"flex\",\n                          justifyContent: \"space-between\",\n                          alignItems: \"center\"\n                        }}\n                      >\n                        <span>\n                          {network.inUse && <span style={{ color: \"#4caf50\", marginRight: \"0.5rem\" }}></span>}\n                          {network.ssid}\n                        </span>\n                        <span style={{ color: \"#666\", fontSize: \"0.85rem\" }}>\n                          {getSignalIcon(network.signal)} {network.security !== \"\" && \"\"}\n                        </span>\n                      </div>\n                    ))\n                  )}\n                </div>\n\n                {/* Password Input */}\n                {selectedNetwork && (\n                  <div style={{ marginBottom: \"1rem\" }}>\n                    <label style={{ display: \"block\", marginBottom: \"0.5rem\", color: \"#666\" }}>\n                      Password for \"{selectedNetwork}\"\n                    </label>\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: \"0.5rem\" }}>\n                      <input\n                        style={{\n                          height: 36,\n                          fontSize: \"1rem\",\n                          padding: \"0 0.6rem\",\n                          width: \"100%\",\n                          maxWidth: \"250px\",\n                        }}\n                        type={showWifiPassword ? \"text\" : \"password\"}\n                        placeholder=\"Enter WiFi password\"\n                        value={wifiPassword}\n                        onChange={(e) => setWifiPassword(e.target.value)}\n                      />\n                      <Button\n                        variant=\"outlined\"\n                        size=\"small\"\n                        onClick={() => setShowWifiPassword(!showWifiPassword)}\n                        style={{ minWidth: \"80px\" }}\n                      >\n                        {showWifiPassword ? \"Hide\" : \"Show\"}\n                      </Button>\n                    </div>\n                  </div>\n                )}\n\n                {/* Connect Button */}\n                {selectedNetwork && (\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={connectToWifi}\n                    disabled={wifiConnecting}\n                  >\n                    {wifiConnecting ? \"Connecting...\" : `Connect to ${selectedNetwork}`}\n                  </Button>\n                )}\n              </div>\n            )}\n\n            {/* Refresh Status Button */}\n            <Button\n              variant=\"outlined\"\n              size=\"small\"\n              onClick={fetchWifiStatus}\n              style={{ marginTop: showNetworkList ? \"0\" : \"0.5rem\" }}\n            >\n              Refresh Status\n            </Button>\n          </div>\n\n          {/* USB Storage Section */}\n          <div className=\"settings\">\n            <label style={{ margin: \"1rem 0 .5rem 0\", fontWeight: \"bold\" }}>USB Storage</label>\n            <p style={{ marginBottom: \"1rem\" }}>\n              Plug in a USB drive to expand your marquee storage. USB storage takes priority over internal storage.\n            </p>\n\n            {usbStatus ? (\n              <>\n                {/* USB Status Display */}\n                <div style={{\n                  marginBottom: \"1rem\",\n                  padding: \"0.75rem\",\n                  background: usbStatus.readyForUse ? \"#e8f5e9\" : (usbStatus.usbDetected ? \"#fff3e0\" : \"#f5f5f5\"),\n                  borderRadius: \"4px\",\n                  border: `1px solid ${usbStatus.readyForUse ? \"#4caf50\" : (usbStatus.usbDetected ? \"#ff9800\" : \"#ddd\")}`\n                }}>\n                  {usbStatus.readyForUse ? (\n                    <>\n                      <p style={{ margin: 0, fontWeight: \"bold\", color: \"#2e7d32\" }}>\n                         USB Storage Ready\n                      </p>\n                      <p style={{ margin: \"0.5rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                        <strong>Label:</strong> {usbStatus.usbLabel || \"PixelUSB\"}\n                      </p>\n                      <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                        <strong>Free Space:</strong> {formatBytes(usbStatus.usbFreeBytes)} / {formatBytes(usbStatus.usbTotalBytes)}\n                      </p>\n                      <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                        <strong>Mount Point:</strong> <span style={{ fontFamily: \"monospace\" }}>{usbStatus.usbMountPoint}</span>\n                      </p>\n                    </>\n                  ) : usbStatus.usbMounted ? (\n                    <>\n                      <p style={{ margin: 0, fontWeight: \"bold\", color: \"#e65100\" }}>\n                         USB Mounted (Missing Folders)\n                      </p>\n                      <p style={{ margin: \"0.5rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                        The USB drive is mounted but missing required folders.\n                      </p>\n                      <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\", color: \"#666\" }}>\n                        {!usbStatus.hasLCDFolder && \" Missing lcdmarquees folder\"}\n                        {!usbStatus.hasLCDFolder && !usbStatus.hasMP4Folder && <br />}\n                        {!usbStatus.hasMP4Folder && \" Missing mp4marquees folder\"}\n                      </p>\n                    </>\n                  ) : usbStatus.usbDetected ? (\n                    <>\n                      <p style={{ margin: 0, fontWeight: \"bold\", color: \"#e65100\" }}>\n                         USB Detected (Not Mounted)\n                      </p>\n                      <p style={{ margin: \"0.5rem 0 0 0\", fontSize: \"0.9rem\" }}>\n                        <strong>Device:</strong> <span style={{ fontFamily: \"monospace\" }}>{usbStatus.usbDevice}</span>\n                      </p>\n                      <p style={{ margin: \"0.25rem 0 0 0\", fontSize: \"0.9rem\", color: \"#666\" }}>\n                        This USB drive can be formatted for Pixelcade use.\n                      </p>\n                    </>\n                  ) : (\n                    <p style={{ margin: 0, color: \"#666\" }}>\n                      No USB drive detected. Plug in a USB drive to use external storage.\n                    </p>\n                  )}\n                </div>\n\n                {/* Format Button - only show if USB detected but not ready */}\n                {usbStatus.canFormat && (\n                  <Button\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    onClick={formatUsbDrive}\n                    disabled={usbFormatting}\n                    style={{ marginBottom: \"1rem\" }}\n                  >\n                    {usbFormatting ? \"Formatting...\" : \"Format USB for Pixelcade\"}\n                  </Button>\n                )}\n\n                {/* Refresh Button */}\n                <Button\n                  variant=\"outlined\"\n                  size=\"small\"\n                  onClick={fetchUsbStatus}\n                >\n                  Refresh Status\n                </Button>\n              </>\n            ) : (\n              <p style={{ color: \"#666\" }}>Loading USB status...</p>\n            )}\n          </div>\n\n          {/* Rest of the existing sections stay exactly the same */}\n          <div className=\"settings\">\n            <p>\n              When enabled, Pixelcade will only display static JPG marquees and skip any video marquees.\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.ImageMarqueesOnly}\n                  onChange={() => updateImageMarqueesOnly()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Static Marquees Only (Skip Videos)\"\n            />\n          </div>\n\n          {/* Video Loop Mode Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <p>\n              When enabled, video marquees will continue to loop indefinitely and no longer land on the static marquee.\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.videoLoopMode}\n                  onChange={() => updateVideoLoopMode()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Loop Video Marquees Indefinitely\"\n            />\n          </div>\n\n          {/* Splash Screens Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <p>\n              Disabling splash screens means Pixelcade will not display now playing splash screens, high scores, or marquee overlays. <br></br><br></br>Only a Pixelcade LED marquee\n              (if connected) or a Pixelcade Dot sub-display (if connected) will\n              display scrolling text for now playing game launches and high scores.\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.SubDisplayScrollingOnly}\n                  onChange={() => updateTextOnMainPanel()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Disable Splash Screens\"\n            />\n          </div>\n  \n          {/* Font Settings */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <label style={{ margin: \".5rem 0 .5rem 0\" }}>Font</label>\n            <Select\n              selectedValue={settings.font}\n              name=\"font\"\n              options={getFonts()}\n              caretIcon={<CaretIcon />}\n              modalCloseButton={<ModalCloseButton />}\n              onChange={(changes: any) => {\n                const font = changes.value;\n                setSettings({ ...settings, font });\n              }}\n            />\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 2fr\",\n                gridGap: \"1rem\",\n              }}\n            >\n              <div />\n              <Button\n                style={{ marginTop: \"1.2rem\" }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => updateFont()}\n              >\n                Update\n              </Button>\n            </div>\n          </div>\n  \n          {/* Marquee Overlays Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <p>\n              When disabled, Pixelcade will not show overlays such as high\n              scores in a small bar on the bottom of game marquees.\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.marqueeOverlays}\n                  onChange={() => updateMarqueeOverlay()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Show Marquee Overlays\"\n            />\n          </div>\n\n          {/* Fuzzy Matching Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <p>\n              When enabled, will attempt to match artwork when there is not an exact file match. Ex. mame-game.jpg will match with mame-gamex(USA).jpg\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.fuzzyMatch}\n                  onChange={() => updateFuzzyMatch()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Fuzzy Matching\"\n            />\n            {settings.fuzzyMatch && (\n              <div style={{ marginTop: \"1.5rem\", paddingLeft: \"1rem\" }}>\n                <label style={{ display: \"block\", marginBottom: \"0.5rem\", color: \"#666\" }}>\n                  Fuzzy Match Distance (0-10): {settings.fuzzyMatchDistance}\n                </label>\n                <input\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"10\"\n                  value={settings.fuzzyMatchDistance}\n                  onChange={(e) => handleFuzzyMatchDistanceChange(Number(e.target.value))}\n                  style={{ width: \"100%\", maxWidth: \"300px\" }}\n                />\n                <p style={{ fontSize: \"0.9rem\", color: \"#666\", marginTop: \"0.5rem\" }}>\n                  Lower values require closer matches. Higher values allow more variation.\n                </p>\n              </div>\n            )}\n          </div>\n\n          {/* Dot Sub-Display Type Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <label style={{ margin: \".5rem 0 .5rem 0\" }}>Pixelcade Dot Sub-Display Type</label>\n            <label style={{ margin: \".5rem 0 .5rem 0\", display: \"block\", color: \"#666\" }}>Please Select Manually</label>\n            <Select\n              selectedValue={settings.PixelcadeDotType}\n              name=\"PixelcadeDotType\"\n              options={[\n                { text: \"Matrix\", value: \"matrix\" },\n                { text: \"7 Segment\", value: \"7segment\" },\n                { text: \"None\", value: \"none\" }\n              ]}\n              caretIcon={<CaretIcon />}\n              modalCloseButton={<ModalCloseButton />}\n              onChange={(changes: any) => {\n                const PixelcadeDotType = changes.value;\n                setSettings({ ...settings, PixelcadeDotType });\n              }}\n            />\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 2fr\",\n                gridGap: \"1rem\",\n              }}\n            >\n              <div />\n              <Button\n                style={{ marginTop: \"1.2rem\" }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => updatePixelcadeDotType()}\n              >\n                Update\n              </Button>\n            </div>\n          </div>\n  \n          {/* Mini Dot Sub-Display Type Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <label style={{ margin: \".5rem 0 .5rem 0\" }}>Pixelcade Mini Dot Sub-Display Type</label>\n            <label style={{ margin: \".5rem 0 .5rem 0\", display: \"block\", color: \"#666\" }}>Auto Detected</label>\n            <Select\n              selectedValue={settings.PixelcadeMiniDisplayType}\n              name=\"PixelcadeMiniDisplayType\"\n              options={[\n                { text: \"Mini OLED\", value: \"oled\" },\n                { text: \"Mini LCD 4 Lines\", value: \"lcd4line\" },\n                { text: \"Mini LCD 2 Lines\", value: \"lcd2line\" },\n                { text: \"None\", value: \"none\" }\n              ]}\n              caretIcon={<CaretIcon />}\n              modalCloseButton={<ModalCloseButton />}\n              onChange={(changes: any) => {\n                const PixelcadeMiniDisplayType = changes.value;\n                setSettings({ ...settings, PixelcadeMiniDisplayType });\n              }}\n            />\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 2fr\",\n                gridGap: \"1rem\",\n              }}\n            >\n              <div />\n              <Button\n                style={{ marginTop: \"1.2rem\" }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => updatePixelcadeMiniDisplayType()}\n              >\n                Update\n              </Button>\n            </div>\n          </div>\n  \n          {/* OLED Mode Setting */}\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <label style={{ margin: \".5rem 0 .5rem 0\" }}>Pixelcade Mini OLED Mode</label>\n            <Select\n              selectedValue={settings.PixelcadeOLEDMode}\n              name=\"PixelcadeOLEDMode\"\n              options={[\n                { text: \"Marquee Mode\", value: \"marquee\" },\n                { text: \"Metadata Mode\", value: \"metadata\" }\n              ]}\n              caretIcon={<CaretIcon />}\n              modalCloseButton={<ModalCloseButton />}\n              onChange={(changes: any) => {\n                const PixelcadeOLEDMode = changes.value;\n                setSettings({ ...settings, PixelcadeOLEDMode });\n              }}\n            />\n            <div\n              style={{\n                display: \"grid\",\n                gridTemplateColumns: \"1fr 2fr\",\n                gridGap: \"1rem\",\n              }}\n            >\n              <div />\n              <Button\n                style={{ marginTop: \"1.2rem\" }}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => updatePixelcadeOLEDMode()}\n              >\n                Update\n              </Button>\n            </div>\n          </div>\n  \n          {/* OLED Glitch Mode Setting - Not enabled yet, commented out\n          <div className=\"settings\" style={{ marginTop: \"2rem\" }}>\n            <p>\n              Pixelcade Mini OLED Glitch Mode\n            </p>\n            <FormControlLabel\n              style={{ marginTop: \"1.2rem\" }}\n              control={\n                <Switch\n                  checked={settings.PixelcadeOLEDGlitch}\n                  onChange={() => updateMiniOLEDGlitchMode()}\n                  color=\"primary\"\n                />\n              }\n              label=\"Enable Pixelcade Mini OLED Glitch Mode\"\n            />\n          </div>\n          */}\n\n        </div>\n      )}\n\n    </div>\n  );\n\n};\n\nexport default DeviceSettings;\n","import { Button } from \"@material-ui/core\";\nimport React, { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { setScrollingText } from \"../../services\";\n\nconst SendText: React.FC = () => {\n    const [text, setText] = useState<string>(\"\");\n    return (\n        <div className=\"layout-grid fade-in\" style={{ marginTop: \"0.5rem\" }}>\n            <div\n                className=\"settings\"\n                style={{ display: \"flex\", flexDirection: \"column\" }}\n            >\n                <label style={{ margin: \"1rem 0 .5rem 0\" }}>\n                    Scrolling Text\n                </label>\n\n                <input\n                    style={{\n                        height: 36,\n                        fontSize: \"1.2rem\",\n                        padding: \"0 0.4rem\",\n                    }}\n                    type=\"text\"\n                    id=\"fname\"\n                    name=\"fname\"\n                    value={text}\n                    onChange={(event) => {\n                        setText(event.target.value);\n                    }}\n                />\n                <div\n                    style={{\n                        display: \"grid\",\n                        gridTemplateColumns: \"1fr 2fr\",\n                        gridGap: \"1rem\",\n                    }}\n                >\n                    <div />\n                    <Button\n                        style={{ marginTop: \"1.2rem\" }}\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={() => {\n                            toast.promise(\n                                setScrollingText(text),\n                                {\n                                    loading: \"Sending message to marquee\",\n                                    success: \"Message sent\",\n                                    error: \"Failed\",\n                                },\n                                { duration: 4000 }\n                            );\n                        }}\n                    >\n                        Send Text\n                    </Button>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default SendText;\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\n// Start the sports ticker\nexport const startSportsTicker = (\n    league: string,\n    teams: string[] = [],\n    refresh: number = 5,\n    speed: number = 5\n): Promise<any> => {\n    const teamsParam = teams.length > 0 ? teams.join(\",\") : \"\";\n    const requestUrl = `${getDeviceUrl(\"\")}/sports/start?league=${encodeURIComponent(league)}&teams=${encodeURIComponent(teamsParam)}&refresh=${refresh}&speed=${speed}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Stop the sports ticker\nexport const stopSportsTicker = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/sports/stop`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get sports ticker status\nexport const getSportsTickerStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/sports/status`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get sports scores without starting the ticker\nexport const getSportsScores = (league: string, teams: string[] = []): Promise<any> => {\n    const teamsParam = teams.length > 0 ? teams.join(\",\") : \"\";\n    const requestUrl = `${getDeviceUrl(\"\")}/sports/scores?league=${encodeURIComponent(league)}&teams=${encodeURIComponent(teamsParam)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Update a sports ticker setting\nexport const updateSportsSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${key}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Start the favorites ticker (multi-league)\nexport const startFavoritesTicker = (\n    favoriteTeams: string,\n    refresh: number = 5,\n    speed: number = 5\n): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/sports/start-favorites?favorites=${encodeURIComponent(favoriteTeams)}&refresh=${refresh}&speed=${speed}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n","// Ticker event system to coordinate button states between widgets\n\nexport type TickerType = 'sports' | 'stocks' | 'weather' | 'news' | 'clock' | 'slideshow';\n\n// Custom event for when a ticker starts (which stops others)\nexport const TICKER_STARTED_EVENT = 'tickerStarted';\n\n// Dispatch event when a ticker starts\nexport const dispatchTickerStarted = (tickerType: TickerType) => {\n    window.dispatchEvent(new CustomEvent(TICKER_STARTED_EVENT, {\n        detail: { tickerType }\n    }));\n};\n\n// Subscribe to ticker started events\nexport const onTickerStarted = (\n    callback: (tickerType: TickerType) => void\n): (() => void) => {\n    const handler = (event: Event) => {\n        const customEvent = event as CustomEvent<{ tickerType: TickerType }>;\n        callback(customEvent.detail.tickerType);\n    };\n    window.addEventListener(TICKER_STARTED_EVENT, handler);\n    // Return unsubscribe function\n    return () => window.removeEventListener(TICKER_STARTED_EVENT, handler);\n};\n","import React, { useState, useEffect } from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport { Button, CircularProgress } from \"@material-ui/core\";\nimport {\n    SportsBasketball,\n    TrendingUp,\n    WbSunny,\n    RssFeed,\n    Schedule,\n    Settings,\n    Stop,\n    WifiOff,\n} from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { readSettings } from \"../../services/settings\";\nimport { startSportsTicker, stopSportsTicker, getSportsTickerStatus, startFavoritesTicker } from \"../../services/sports\";\nimport { getDeviceUrl, getInternetStatus } from \"../../services\";\nimport axios from \"axios\";\nimport { dispatchTickerStarted, onTickerStarted, TickerType } from \"../../services/tickerEvents\";\nimport \"./styles.css\";\n\ntype TickerStatus = {\n    sports: boolean;\n    stocks: boolean;\n    weather: boolean;\n    news: boolean;\n    clock: boolean;\n};\n\ntype LoadingState = {\n    sports: boolean;\n    stocks: boolean;\n    weather: boolean;\n    news: boolean;\n    clock: boolean;\n};\n\nconst WidgetsMenu: React.FC = () => {\n    const nav = useNavigate();\n    const [tickerStatus, setTickerStatus] = useState<TickerStatus>({\n        sports: false,\n        stocks: false,\n        weather: false,\n        news: false,\n        clock: false,\n    });\n    const [loading, setLoading] = useState<LoadingState>({\n        sports: false,\n        stocks: false,\n        weather: false,\n        news: false,\n        clock: false,\n    });\n    const [settings, setSettings] = useState<any>(null);\n    const [hasInternet, setHasInternet] = useState<boolean>(true); // Assume true until checked\n\n    // Fetch all ticker statuses on mount\n    useEffect(() => {\n        const fetchStatuses = async () => {\n            try {\n                // Check internet status first\n                const internetStatus = await getInternetStatus();\n                setHasInternet(internetStatus.hasInternet);\n\n                // Load settings first\n                const settingsData = await readSettings();\n                setSettings(settingsData);\n\n                // Check sports status\n                const sportsStatus = await getSportsTickerStatus();\n\n                // Check stocks status\n                const stocksRes = await axios.get(`${getDeviceUrl(\"\")}/stocks/status`);\n\n                // Check weather status\n                const weatherRes = await axios.get(`${getDeviceUrl(\"\")}/weather/status`);\n\n                // Check news status\n                const newsRes = await axios.get(`${getDeviceUrl(\"\")}/news/status`);\n\n                // Check clock status\n                const clockRes = await axios.get(`${getDeviceUrl(\"\")}/clock/status`);\n\n                setTickerStatus({\n                    sports: sportsStatus?.running || false,\n                    stocks: stocksRes.data?.running || false,\n                    weather: weatherRes.data?.running || false,\n                    news: newsRes.data?.running || false,\n                    clock: clockRes.data?.running || false,\n                });\n            } catch (err) {\n                console.error(\"Error fetching ticker statuses:\", err);\n            }\n        };\n\n        fetchStatuses();\n\n        // Listen for ticker started events from other components\n        const unsubscribe = onTickerStarted((tickerType: TickerType) => {\n            // Reset all to false, then set the started one to true\n            setTickerStatus({\n                sports: tickerType === 'sports',\n                stocks: tickerType === 'stocks',\n                weather: tickerType === 'weather',\n                news: tickerType === 'news',\n                clock: tickerType === 'clock',\n            });\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // Generic ticker start/stop handlers\n    const handleSportsTicker = async () => {\n        if (tickerStatus.sports) {\n            // Stop\n            try {\n                await stopSportsTicker();\n                setTickerStatus(prev => ({ ...prev, sports: false }));\n                toast.success(\"Sports Ticker Stopped\");\n            } catch (err) {\n                toast.error(\"Failed to stop Sports Ticker\");\n            }\n        } else {\n            // Start with saved settings\n            setLoading(prev => ({ ...prev, sports: true }));\n            try {\n                const mode = settings?.sportTickerMode || \"league\";\n                const refreshMinutes = (settings?.sportTickerRefresh || 60) / 60;\n                const speed = settings?.sportScrollSpeed || 5;\n\n                if (mode === \"favorites\" && settings?.sportFavoriteTeams) {\n                    await startFavoritesTicker(settings.sportFavoriteTeams, refreshMinutes, speed);\n                } else if (settings?.sportLeagues) {\n                    const teams = settings?.sportTeamCodes ? settings.sportTeamCodes.split(\",\") : [];\n                    await startSportsTicker(settings.sportLeagues, teams, refreshMinutes, speed);\n                } else {\n                    toast.error(\"Please configure Sports settings first\");\n                    setLoading(prev => ({ ...prev, sports: false }));\n                    return;\n                }\n                setTickerStatus({ sports: true, stocks: false, weather: false, news: false, clock: false });\n                dispatchTickerStarted('sports');\n                toast.success(\"Sports Ticker Started!\");\n            } catch (err) {\n                toast.error(\"Failed to start Sports Ticker\");\n            } finally {\n                setLoading(prev => ({ ...prev, sports: false }));\n            }\n        }\n    };\n\n    const handleStocksTicker = async () => {\n        if (tickerStatus.stocks) {\n            try {\n                await axios.get(`${getDeviceUrl(\"\")}/stocks/stop`);\n                setTickerStatus(prev => ({ ...prev, stocks: false }));\n                toast.success(\"Stocks Ticker Stopped\");\n            } catch (err) {\n                toast.error(\"Failed to stop Stocks Ticker\");\n            }\n        } else {\n            setLoading(prev => ({ ...prev, stocks: true }));\n            try {\n                const symbols = settings?.stockSymbols || \"MSFT,GOOG,AMZN\";\n                const refresh = settings?.stockTickerRefresh || 5;\n                const speed = settings?.stockScrollSpeed || 5;\n                const font = settings?.stockFont || \"LiberationSans-Bold\";\n                await axios.get(`${getDeviceUrl(\"\")}/stocks/start?symbols=${encodeURIComponent(symbols)}&refresh=${refresh}&speed=${speed}&font=${encodeURIComponent(font)}`);\n                setTickerStatus({ sports: false, stocks: true, weather: false, news: false, clock: false });\n                dispatchTickerStarted('stocks');\n                toast.success(\"Stocks Ticker Started!\");\n            } catch (err) {\n                toast.error(\"Failed to start Stocks Ticker\");\n            } finally {\n                setLoading(prev => ({ ...prev, stocks: false }));\n            }\n        }\n    };\n\n    const handleWeatherWidget = async () => {\n        if (tickerStatus.weather) {\n            try {\n                await axios.get(`${getDeviceUrl(\"\")}/weather/stop`);\n                setTickerStatus(prev => ({ ...prev, weather: false }));\n                toast.success(\"Weather Widget Stopped\");\n            } catch (err) {\n                toast.error(\"Failed to stop Weather Widget\");\n            }\n        } else {\n            setLoading(prev => ({ ...prev, weather: true }));\n            try {\n                const location = settings?.weatherLocation || \"95050\";\n                const units = settings?.weatherUnits || \"fahrenheit\";\n                const forecast = settings?.weatherForecast || \"1day\";\n                await axios.get(`${getDeviceUrl(\"\")}/weather/start?location=${encodeURIComponent(location)}&units=${units}&forecast=${forecast}`);\n                setTickerStatus({ sports: false, stocks: false, weather: true, news: false, clock: false });\n                dispatchTickerStarted('weather');\n                toast.success(\"Weather Widget Started!\");\n            } catch (err) {\n                toast.error(\"Failed to start Weather Widget\");\n            } finally {\n                setLoading(prev => ({ ...prev, weather: false }));\n            }\n        }\n    };\n\n    const handleNewsTicker = async () => {\n        if (tickerStatus.news) {\n            try {\n                await axios.get(`${getDeviceUrl(\"\")}/news/stop`);\n                setTickerStatus(prev => ({ ...prev, news: false }));\n                toast.success(\"News Ticker Stopped\");\n            } catch (err) {\n                toast.error(\"Failed to stop News Ticker\");\n            }\n        } else {\n            setLoading(prev => ({ ...prev, news: true }));\n            try {\n                const sources = settings?.newsSources || \"bbc\";\n                const refresh = settings?.newsTickerRefresh || 5;\n                const speed = settings?.newsScrollSpeed || 5;\n                await axios.get(`${getDeviceUrl(\"\")}/news/start?sources=${encodeURIComponent(sources)}&refresh=${refresh}&speed=${speed}`);\n                setTickerStatus({ sports: false, stocks: false, weather: false, news: true, clock: false });\n                dispatchTickerStarted('news');\n                toast.success(\"News Ticker Started!\");\n            } catch (err) {\n                toast.error(\"Failed to start News Ticker\");\n            } finally {\n                setLoading(prev => ({ ...prev, news: false }));\n            }\n        }\n    };\n\n    const handleClockWidget = async () => {\n        if (tickerStatus.clock) {\n            try {\n                await axios.get(`${getDeviceUrl(\"\")}/clock/stop`);\n                setTickerStatus(prev => ({ ...prev, clock: false }));\n                toast.success(\"Clock Widget Stopped\");\n            } catch (err) {\n                toast.error(\"Failed to stop Clock Widget\");\n            }\n        } else {\n            setLoading(prev => ({ ...prev, clock: true }));\n            try {\n                const face = settings?.clockFace || \"cyberpunk\";\n                const use12Hour = settings?.clockUse12Hour === \"yes\";\n                const showSeconds = settings?.clockShowSeconds === \"yes\";\n                await axios.get(`${getDeviceUrl(\"\")}/clock/start?face=${face}&use12Hour=${use12Hour}&showSeconds=${showSeconds}`);\n                setTickerStatus({ sports: false, stocks: false, weather: false, news: false, clock: true });\n                dispatchTickerStarted('clock');\n                toast.success(\"Clock Widget Started!\");\n            } catch (err) {\n                toast.error(\"Failed to start Clock Widget\");\n            } finally {\n                setLoading(prev => ({ ...prev, clock: false }));\n            }\n        }\n    };\n\n    // Helper to check if widget requires internet\n    const requiresInternet = (widget: 'sports' | 'stocks' | 'weather' | 'news') => {\n        return !hasInternet && !tickerStatus[widget]; // Only disable if not already running\n    };\n\n    return (\n        <div className=\"widgets-menu fade-in\">\n            {/* Offline Warning Banner */}\n            {!hasInternet && (\n                <div className=\"offline-banner\">\n                    <WifiOff style={{ marginRight: \"0.5rem\" }} />\n                    <span>\n                        No internet connection. Some widgets require internet.{\" \"}\n                        <Link to=\"/settings\" className=\"offline-link\">Configure WiFi in Settings</Link>\n                    </span>\n                </div>\n            )}\n\n            <div className=\"widgets-grid\">\n                {/* Sports Ticker */}\n                <Button\n                    variant=\"contained\"\n                    className={`widget-button ${tickerStatus.sports ? 'active' : ''} ${requiresInternet('sports') ? 'no-internet' : ''}`}\n                    onClick={handleSportsTicker}\n                    disabled={loading.sports || requiresInternet('sports')}\n                    title={requiresInternet('sports') ? \"Requires internet connection\" : \"\"}\n                >\n                    {loading.sports ? (\n                        <CircularProgress size={24} style={{ color: \"#fff\" }} />\n                    ) : tickerStatus.sports ? (\n                        <Stop className=\"widget-icon\" />\n                    ) : (\n                        <SportsBasketball className=\"widget-icon\" />\n                    )}\n                    <span className=\"widget-label\">\n                        {tickerStatus.sports ? \"Stop Sports\" : \"Sports Scoreboard\"}\n                    </span>\n                    {requiresInternet('sports') && <span className=\"requires-internet\">Requires Internet</span>}\n                </Button>\n\n                {/* Stocks Ticker */}\n                <Button\n                    variant=\"contained\"\n                    className={`widget-button ${tickerStatus.stocks ? 'active' : ''} ${requiresInternet('stocks') ? 'no-internet' : ''}`}\n                    onClick={handleStocksTicker}\n                    disabled={loading.stocks || requiresInternet('stocks')}\n                    title={requiresInternet('stocks') ? \"Requires internet connection\" : \"\"}\n                >\n                    {loading.stocks ? (\n                        <CircularProgress size={24} style={{ color: \"#fff\" }} />\n                    ) : tickerStatus.stocks ? (\n                        <Stop className=\"widget-icon\" />\n                    ) : (\n                        <TrendingUp className=\"widget-icon\" />\n                    )}\n                    <span className=\"widget-label\">\n                        {tickerStatus.stocks ? \"Stop Stocks\" : \"Stocks & Crypto\"}\n                    </span>\n                    {requiresInternet('stocks') && <span className=\"requires-internet\">Requires Internet</span>}\n                </Button>\n\n                {/* Weather Widget */}\n                <Button\n                    variant=\"contained\"\n                    className={`widget-button ${tickerStatus.weather ? 'active' : ''} ${requiresInternet('weather') ? 'no-internet' : ''}`}\n                    onClick={handleWeatherWidget}\n                    disabled={loading.weather || requiresInternet('weather')}\n                    title={requiresInternet('weather') ? \"Requires internet connection\" : \"\"}\n                >\n                    {loading.weather ? (\n                        <CircularProgress size={24} style={{ color: \"#fff\" }} />\n                    ) : tickerStatus.weather ? (\n                        <Stop className=\"widget-icon\" />\n                    ) : (\n                        <WbSunny className=\"widget-icon\" />\n                    )}\n                    <span className=\"widget-label\">\n                        {tickerStatus.weather ? \"Stop Weather\" : \"Weather\"}\n                    </span>\n                    {requiresInternet('weather') && <span className=\"requires-internet\">Requires Internet</span>}\n                </Button>\n\n                {/* News Ticker */}\n                <Button\n                    variant=\"contained\"\n                    className={`widget-button ${tickerStatus.news ? 'active' : ''} ${requiresInternet('news') ? 'no-internet' : ''}`}\n                    onClick={handleNewsTicker}\n                    disabled={loading.news || requiresInternet('news')}\n                    title={requiresInternet('news') ? \"Requires internet connection\" : \"\"}\n                >\n                    {loading.news ? (\n                        <CircularProgress size={24} style={{ color: \"#fff\" }} />\n                    ) : tickerStatus.news ? (\n                        <Stop className=\"widget-icon\" />\n                    ) : (\n                        <RssFeed className=\"widget-icon\" />\n                    )}\n                    <span className=\"widget-label\">\n                        {tickerStatus.news ? \"Stop News\" : \"News\"}\n                    </span>\n                    {requiresInternet('news') && <span className=\"requires-internet\">Requires Internet</span>}\n                </Button>\n\n                {/* Clock Widget - works offline */}\n                <Button\n                    variant=\"contained\"\n                    className={`widget-button ${tickerStatus.clock ? 'active' : ''}`}\n                    onClick={handleClockWidget}\n                    disabled={loading.clock}\n                >\n                    {loading.clock ? (\n                        <CircularProgress size={24} style={{ color: \"#fff\" }} />\n                    ) : tickerStatus.clock ? (\n                        <Stop className=\"widget-icon\" />\n                    ) : (\n                        <Schedule className=\"widget-icon\" />\n                    )}\n                    <span className=\"widget-label\">\n                        {tickerStatus.clock ? \"Stop Clock\" : \"Clock\"}\n                    </span>\n                </Button>\n\n                {/* Widget Settings */}\n                <Button\n                    variant=\"contained\"\n                    className=\"widget-button settings-button\"\n                    onClick={() => nav('/widget-settings')}\n                >\n                    <Settings className=\"widget-icon\" />\n                    <span className=\"widget-label\">Widget Settings</span>\n                </Button>\n            </div>\n        </div>\n    );\n};\n\nexport default WidgetsMenu;\n","import React, { useState, useEffect } from \"react\";\nimport { Button, CircularProgress, Switch, FormControlLabel } from \"@material-ui/core\";\nimport { PlayArrow, Stop, SportsBasketball } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { readSettings } from \"../../services/settings\";\nimport {\n    startSportsTicker,\n    stopSportsTicker,\n    getSportsTickerStatus,\n    updateSportsSetting,\n    startFavoritesTicker,\n} from \"../../services/sports\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype SportsSettings = {\n    sportLeagues: string;\n    sportTeamCodes: string;\n    sportTickerRefresh: number;\n    sportScrollSpeed: number;\n    sportFavoriteTeams: string;\n    sportTickerMode: \"league\" | \"favorites\";\n    sportDarkMode: boolean;\n};\n\n// Available leagues\nconst leagueOptions = [\n    { text: \"NFL\", value: \"nfl\", sport: \"football\" },\n    { text: \"NBA\", value: \"nba\", sport: \"basketball\" },\n    { text: \"MLB\", value: \"mlb\", sport: \"baseball\" },\n    { text: \"NHL\", value: \"nhl\", sport: \"hockey\" },\n    { text: \"NCAAF (College Football)\", value: \"college-football\", sport: \"football\" },\n    { text: \"NCAAB (College Basketball)\", value: \"mens-college-basketball\", sport: \"basketball\" },\n    { text: \"NCAAW (Women's Basketball)\", value: \"womens-college-basketball\", sport: \"basketball\" },\n    { text: \"WNBA\", value: \"wnba\", sport: \"basketball\" },\n    { text: \"MLS\", value: \"usa.1\", sport: \"soccer\" },\n    { text: \"EPL (Premier League)\", value: \"eng.1\", sport: \"soccer\" },\n    { text: \"La Liga (Spain)\", value: \"esp.1\", sport: \"soccer\" },\n    { text: \"Bundesliga (Germany)\", value: \"ger.1\", sport: \"soccer\" },\n    { text: \"Serie A (Italy)\", value: \"ita.1\", sport: \"soccer\" },\n    { text: \"Ligue 1 (France)\", value: \"fra.1\", sport: \"soccer\" },\n];\n\n// Team abbreviations by league (common teams)\nconst teamsByLeague: { [key: string]: { text: string; value: string }[] } = {\n    nfl: [\n        { text: \"Arizona Cardinals\", value: \"ARI\" },\n        { text: \"Atlanta Falcons\", value: \"ATL\" },\n        { text: \"Baltimore Ravens\", value: \"BAL\" },\n        { text: \"Buffalo Bills\", value: \"BUF\" },\n        { text: \"Carolina Panthers\", value: \"CAR\" },\n        { text: \"Chicago Bears\", value: \"CHI\" },\n        { text: \"Cincinnati Bengals\", value: \"CIN\" },\n        { text: \"Cleveland Browns\", value: \"CLE\" },\n        { text: \"Dallas Cowboys\", value: \"DAL\" },\n        { text: \"Denver Broncos\", value: \"DEN\" },\n        { text: \"Detroit Lions\", value: \"DET\" },\n        { text: \"Green Bay Packers\", value: \"GB\" },\n        { text: \"Houston Texans\", value: \"HOU\" },\n        { text: \"Indianapolis Colts\", value: \"IND\" },\n        { text: \"Jacksonville Jaguars\", value: \"JAX\" },\n        { text: \"Kansas City Chiefs\", value: \"KC\" },\n        { text: \"Las Vegas Raiders\", value: \"LV\" },\n        { text: \"Los Angeles Chargers\", value: \"LAC\" },\n        { text: \"Los Angeles Rams\", value: \"LAR\" },\n        { text: \"Miami Dolphins\", value: \"MIA\" },\n        { text: \"Minnesota Vikings\", value: \"MIN\" },\n        { text: \"New England Patriots\", value: \"NE\" },\n        { text: \"New Orleans Saints\", value: \"NO\" },\n        { text: \"New York Giants\", value: \"NYG\" },\n        { text: \"New York Jets\", value: \"NYJ\" },\n        { text: \"Philadelphia Eagles\", value: \"PHI\" },\n        { text: \"Pittsburgh Steelers\", value: \"PIT\" },\n        { text: \"San Francisco 49ers\", value: \"SF\" },\n        { text: \"Seattle Seahawks\", value: \"SEA\" },\n        { text: \"Tampa Bay Buccaneers\", value: \"TB\" },\n        { text: \"Tennessee Titans\", value: \"TEN\" },\n        { text: \"Washington Commanders\", value: \"WAS\" },\n    ],\n    nba: [\n        { text: \"Atlanta Hawks\", value: \"ATL\" },\n        { text: \"Boston Celtics\", value: \"BOS\" },\n        { text: \"Brooklyn Nets\", value: \"BKN\" },\n        { text: \"Charlotte Hornets\", value: \"CHA\" },\n        { text: \"Chicago Bulls\", value: \"CHI\" },\n        { text: \"Cleveland Cavaliers\", value: \"CLE\" },\n        { text: \"Dallas Mavericks\", value: \"DAL\" },\n        { text: \"Denver Nuggets\", value: \"DEN\" },\n        { text: \"Detroit Pistons\", value: \"DET\" },\n        { text: \"Golden State Warriors\", value: \"GS\" },\n        { text: \"Houston Rockets\", value: \"HOU\" },\n        { text: \"Indiana Pacers\", value: \"IND\" },\n        { text: \"Los Angeles Clippers\", value: \"LAC\" },\n        { text: \"Los Angeles Lakers\", value: \"LAL\" },\n        { text: \"Memphis Grizzlies\", value: \"MEM\" },\n        { text: \"Miami Heat\", value: \"MIA\" },\n        { text: \"Milwaukee Bucks\", value: \"MIL\" },\n        { text: \"Minnesota Timberwolves\", value: \"MIN\" },\n        { text: \"New Orleans Pelicans\", value: \"NO\" },\n        { text: \"New York Knicks\", value: \"NYK\" },\n        { text: \"Oklahoma City Thunder\", value: \"OKC\" },\n        { text: \"Orlando Magic\", value: \"ORL\" },\n        { text: \"Philadelphia 76ers\", value: \"PHI\" },\n        { text: \"Phoenix Suns\", value: \"PHX\" },\n        { text: \"Portland Trail Blazers\", value: \"POR\" },\n        { text: \"Sacramento Kings\", value: \"SAC\" },\n        { text: \"San Antonio Spurs\", value: \"SAS\" },\n        { text: \"Toronto Raptors\", value: \"TOR\" },\n        { text: \"Utah Jazz\", value: \"UTA\" },\n        { text: \"Washington Wizards\", value: \"WAS\" },\n    ],\n    mlb: [\n        { text: \"Arizona Diamondbacks\", value: \"ARI\" },\n        { text: \"Atlanta Braves\", value: \"ATL\" },\n        { text: \"Baltimore Orioles\", value: \"BAL\" },\n        { text: \"Boston Red Sox\", value: \"BOS\" },\n        { text: \"Chicago Cubs\", value: \"CHC\" },\n        { text: \"Chicago White Sox\", value: \"CHW\" },\n        { text: \"Cincinnati Reds\", value: \"CIN\" },\n        { text: \"Cleveland Guardians\", value: \"CLE\" },\n        { text: \"Colorado Rockies\", value: \"COL\" },\n        { text: \"Detroit Tigers\", value: \"DET\" },\n        { text: \"Houston Astros\", value: \"HOU\" },\n        { text: \"Kansas City Royals\", value: \"KC\" },\n        { text: \"Los Angeles Angels\", value: \"LAA\" },\n        { text: \"Los Angeles Dodgers\", value: \"LAD\" },\n        { text: \"Miami Marlins\", value: \"MIA\" },\n        { text: \"Milwaukee Brewers\", value: \"MIL\" },\n        { text: \"Minnesota Twins\", value: \"MIN\" },\n        { text: \"New York Mets\", value: \"NYM\" },\n        { text: \"New York Yankees\", value: \"NYY\" },\n        { text: \"Oakland Athletics\", value: \"OAK\" },\n        { text: \"Philadelphia Phillies\", value: \"PHI\" },\n        { text: \"Pittsburgh Pirates\", value: \"PIT\" },\n        { text: \"San Diego Padres\", value: \"SD\" },\n        { text: \"San Francisco Giants\", value: \"SF\" },\n        { text: \"Seattle Mariners\", value: \"SEA\" },\n        { text: \"St. Louis Cardinals\", value: \"STL\" },\n        { text: \"Tampa Bay Rays\", value: \"TB\" },\n        { text: \"Texas Rangers\", value: \"TEX\" },\n        { text: \"Toronto Blue Jays\", value: \"TOR\" },\n        { text: \"Washington Nationals\", value: \"WAS\" },\n    ],\n    nhl: [\n        { text: \"Anaheim Ducks\", value: \"ANA\" },\n        { text: \"Utah Hockey Club\", value: \"UTA\" },\n        { text: \"Boston Bruins\", value: \"BOS\" },\n        { text: \"Buffalo Sabres\", value: \"BUF\" },\n        { text: \"Calgary Flames\", value: \"CGY\" },\n        { text: \"Carolina Hurricanes\", value: \"CAR\" },\n        { text: \"Chicago Blackhawks\", value: \"CHI\" },\n        { text: \"Colorado Avalanche\", value: \"COL\" },\n        { text: \"Columbus Blue Jackets\", value: \"CBJ\" },\n        { text: \"Dallas Stars\", value: \"DAL\" },\n        { text: \"Detroit Red Wings\", value: \"DET\" },\n        { text: \"Edmonton Oilers\", value: \"EDM\" },\n        { text: \"Florida Panthers\", value: \"FLA\" },\n        { text: \"Los Angeles Kings\", value: \"LA\" },\n        { text: \"Minnesota Wild\", value: \"MIN\" },\n        { text: \"Montreal Canadiens\", value: \"MTL\" },\n        { text: \"Nashville Predators\", value: \"NSH\" },\n        { text: \"New Jersey Devils\", value: \"NJ\" },\n        { text: \"New York Islanders\", value: \"NYI\" },\n        { text: \"New York Rangers\", value: \"NYR\" },\n        { text: \"Ottawa Senators\", value: \"OTT\" },\n        { text: \"Philadelphia Flyers\", value: \"PHI\" },\n        { text: \"Pittsburgh Penguins\", value: \"PIT\" },\n        { text: \"San Jose Sharks\", value: \"SJ\" },\n        { text: \"Seattle Kraken\", value: \"SEA\" },\n        { text: \"St. Louis Blues\", value: \"STL\" },\n        { text: \"Tampa Bay Lightning\", value: \"TB\" },\n        { text: \"Toronto Maple Leafs\", value: \"TOR\" },\n        { text: \"Vancouver Canucks\", value: \"VAN\" },\n        { text: \"Vegas Golden Knights\", value: \"VGK\" },\n        { text: \"Washington Capitals\", value: \"WSH\" },\n        { text: \"Winnipeg Jets\", value: \"WPG\" },\n    ],\n    wnba: [\n        { text: \"Atlanta Dream\", value: \"ATL\" },\n        { text: \"Chicago Sky\", value: \"CHI\" },\n        { text: \"Connecticut Sun\", value: \"CONN\" },\n        { text: \"Dallas Wings\", value: \"DAL\" },\n        { text: \"Golden State Valkyries\", value: \"GS\" },\n        { text: \"Indiana Fever\", value: \"IND\" },\n        { text: \"Las Vegas Aces\", value: \"LV\" },\n        { text: \"Los Angeles Sparks\", value: \"LA\" },\n        { text: \"Minnesota Lynx\", value: \"MIN\" },\n        { text: \"New York Liberty\", value: \"NY\" },\n        { text: \"Phoenix Mercury\", value: \"PHX\" },\n        { text: \"Seattle Storm\", value: \"SEA\" },\n        { text: \"Washington Mystics\", value: \"WAS\" },\n    ],\n    \"usa.1\": [\n        { text: \"Atlanta United\", value: \"ATL\" },\n        { text: \"Austin FC\", value: \"ATX\" },\n        { text: \"Charlotte FC\", value: \"CLT\" },\n        { text: \"Chicago Fire\", value: \"CHI\" },\n        { text: \"FC Cincinnati\", value: \"CIN\" },\n        { text: \"Colorado Rapids\", value: \"COL\" },\n        { text: \"Columbus Crew\", value: \"CLB\" },\n        { text: \"D.C. United\", value: \"DC\" },\n        { text: \"FC Dallas\", value: \"DAL\" },\n        { text: \"Houston Dynamo\", value: \"HOU\" },\n        { text: \"Inter Miami\", value: \"MIA\" },\n        { text: \"LA Galaxy\", value: \"LA\" },\n        { text: \"Los Angeles FC\", value: \"LAFC\" },\n        { text: \"Minnesota United\", value: \"MIN\" },\n        { text: \"CF Montreal\", value: \"MTL\" },\n        { text: \"Nashville SC\", value: \"NSH\" },\n        { text: \"New England Revolution\", value: \"NE\" },\n        { text: \"New York City FC\", value: \"NYC\" },\n        { text: \"New York Red Bulls\", value: \"RBNY\" },\n        { text: \"Orlando City\", value: \"ORL\" },\n        { text: \"Philadelphia Union\", value: \"PHI\" },\n        { text: \"Portland Timbers\", value: \"POR\" },\n        { text: \"Real Salt Lake\", value: \"RSL\" },\n        { text: \"San Jose Earthquakes\", value: \"SJ\" },\n        { text: \"Seattle Sounders\", value: \"SEA\" },\n        { text: \"Sporting Kansas City\", value: \"SKC\" },\n        { text: \"St. Louis City SC\", value: \"STL\" },\n        { text: \"Toronto FC\", value: \"TOR\" },\n        { text: \"Vancouver Whitecaps\", value: \"VAN\" },\n    ],\n    \"eng.1\": [\n        { text: \"Arsenal\", value: \"ARS\" },\n        { text: \"Aston Villa\", value: \"AVL\" },\n        { text: \"Bournemouth\", value: \"BOU\" },\n        { text: \"Brentford\", value: \"BRE\" },\n        { text: \"Brighton\", value: \"BHA\" },\n        { text: \"Chelsea\", value: \"CHE\" },\n        { text: \"Crystal Palace\", value: \"CRY\" },\n        { text: \"Everton\", value: \"EVE\" },\n        { text: \"Fulham\", value: \"FUL\" },\n        { text: \"Ipswich Town\", value: \"IPS\" },\n        { text: \"Leicester City\", value: \"LEI\" },\n        { text: \"Liverpool\", value: \"LIV\" },\n        { text: \"Manchester City\", value: \"MCI\" },\n        { text: \"Manchester United\", value: \"MUN\" },\n        { text: \"Newcastle United\", value: \"NEW\" },\n        { text: \"Nottingham Forest\", value: \"NFO\" },\n        { text: \"Southampton\", value: \"SOU\" },\n        { text: \"Tottenham Hotspur\", value: \"TOT\" },\n        { text: \"West Ham United\", value: \"WHU\" },\n        { text: \"Wolverhampton\", value: \"WOL\" },\n    ],\n    \"esp.1\": [\n        { text: \"Athletic Bilbao\", value: \"ATH\" },\n        { text: \"Atltico Madrid\", value: \"ATM\" },\n        { text: \"Barcelona\", value: \"BAR\" },\n        { text: \"Celta Vigo\", value: \"CEL\" },\n        { text: \"Espanyol\", value: \"ESP\" },\n        { text: \"Getafe\", value: \"GET\" },\n        { text: \"Girona\", value: \"GIR\" },\n        { text: \"Las Palmas\", value: \"LPA\" },\n        { text: \"Legans\", value: \"LEG\" },\n        { text: \"Mallorca\", value: \"MLL\" },\n        { text: \"Osasuna\", value: \"OSA\" },\n        { text: \"Rayo Vallecano\", value: \"RAY\" },\n        { text: \"Real Betis\", value: \"BET\" },\n        { text: \"Real Madrid\", value: \"RMA\" },\n        { text: \"Real Sociedad\", value: \"RSO\" },\n        { text: \"Real Valladolid\", value: \"VLL\" },\n        { text: \"Sevilla\", value: \"SEV\" },\n        { text: \"Valencia\", value: \"VAL\" },\n        { text: \"Villarreal\", value: \"VIL\" },\n    ],\n    \"ger.1\": [\n        { text: \"Augsburg\", value: \"AUG\" },\n        { text: \"Bayern Munich\", value: \"BAY\" },\n        { text: \"Bochum\", value: \"BOC\" },\n        { text: \"Borussia Dortmund\", value: \"DOR\" },\n        { text: \"Borussia M'gladbach\", value: \"BMG\" },\n        { text: \"Eintracht Frankfurt\", value: \"SGE\" },\n        { text: \"Freiburg\", value: \"FRE\" },\n        { text: \"Heidenheim\", value: \"HDH\" },\n        { text: \"Hoffenheim\", value: \"TSG\" },\n        { text: \"Holstein Kiel\", value: \"KIE\" },\n        { text: \"Mainz 05\", value: \"MAI\" },\n        { text: \"RB Leipzig\", value: \"RBL\" },\n        { text: \"St. Pauli\", value: \"STP\" },\n        { text: \"Stuttgart\", value: \"VFB\" },\n        { text: \"Union Berlin\", value: \"FCU\" },\n        { text: \"Werder Bremen\", value: \"WER\" },\n        { text: \"Wolfsburg\", value: \"WOB\" },\n    ],\n    \"ita.1\": [\n        { text: \"AC Milan\", value: \"MIL\" },\n        { text: \"Atalanta\", value: \"ATA\" },\n        { text: \"Bologna\", value: \"BOL\" },\n        { text: \"Cagliari\", value: \"CAG\" },\n        { text: \"Como\", value: \"COM\" },\n        { text: \"Empoli\", value: \"EMP\" },\n        { text: \"Fiorentina\", value: \"FIO\" },\n        { text: \"Genoa\", value: \"GEN\" },\n        { text: \"Inter Milan\", value: \"INT\" },\n        { text: \"Juventus\", value: \"JUV\" },\n        { text: \"Lazio\", value: \"LAZ\" },\n        { text: \"Lecce\", value: \"LEC\" },\n        { text: \"Monza\", value: \"MON\" },\n        { text: \"Napoli\", value: \"NAP\" },\n        { text: \"Parma\", value: \"PAR\" },\n        { text: \"Roma\", value: \"ROM\" },\n        { text: \"Torino\", value: \"TOR\" },\n        { text: \"Udinese\", value: \"UDI\" },\n        { text: \"Venezia\", value: \"VEN\" },\n        { text: \"Verona\", value: \"VER\" },\n    ],\n    \"fra.1\": [\n        { text: \"Angers\", value: \"ANG\" },\n        { text: \"Auxerre\", value: \"AUX\" },\n        { text: \"Brest\", value: \"BRE\" },\n        { text: \"Le Havre\", value: \"HAV\" },\n        { text: \"Lens\", value: \"LEN\" },\n        { text: \"Lille\", value: \"LIL\" },\n        { text: \"Lyon\", value: \"LYO\" },\n        { text: \"Marseille\", value: \"MAR\" },\n        { text: \"Monaco\", value: \"MON\" },\n        { text: \"Montpellier\", value: \"MTP\" },\n        { text: \"Nantes\", value: \"NAN\" },\n        { text: \"Nice\", value: \"NIC\" },\n        { text: \"Paris Saint-Germain\", value: \"PSG\" },\n        { text: \"Reims\", value: \"REI\" },\n        { text: \"Rennes\", value: \"REN\" },\n        { text: \"Saint-tienne\", value: \"STE\" },\n        { text: \"Strasbourg\", value: \"STR\" },\n        { text: \"Toulouse\", value: \"TOU\" },\n    ],\n};\n\n// Refresh presets - values are in SECONDS to match backend storage\nconst refreshPresets = [\n    { text: \"15 seconds\", value: \"15\" },\n    { text: \"30 seconds\", value: \"30\" },\n    { text: \"1 minute\", value: \"60\" },\n    { text: \"2 minutes\", value: \"120\" },\n    { text: \"3 minutes\", value: \"180\" },\n    { text: \"4 minutes\", value: \"240\" },\n    { text: \"5 minutes\", value: \"300\" },\n    { text: \"15 minutes\", value: \"900\" },\n    { text: \"30 minutes\", value: \"1800\" },\n    { text: \"1 hour\", value: \"3600\" },\n    { text: \"2 hours\", value: \"7200\" },\n];\n\n// Scroll speed presets (same as stock ticker)\nconst scrollSpeedPresets = [\n    { text: \"Slow\", value: \"2\" },\n    { text: \"Normal\", value: \"5\" },\n    { text: \"Fast\", value: \"10\" },\n    { text: \"Very Fast\", value: \"15\" },\n];\n\n// Favorite team type\ntype FavoriteTeam = {\n    league: string;\n    team: string;\n};\n\ninterface SportsTickerWidgetProps {\n    onTickerStart?: () => void;\n}\n\nconst SportsTickerWidget: React.FC<SportsTickerWidgetProps> = ({ onTickerStart }) => {\n    const [settings, setSettings] = useState<SportsSettings>({\n        sportLeagues: \"\",\n        sportTeamCodes: \"\",\n        sportTickerRefresh: 60, // Default 1 minute (stored in seconds)\n        sportScrollSpeed: 5,    // Default \"Normal\" speed\n        sportFavoriteTeams: \"\",\n        sportTickerMode: \"league\",\n        sportDarkMode: false,\n    });\n    const [isTickerRunning, setIsTickerRunning] = useState(false);\n    const [selectedLeague, setSelectedLeague] = useState<string>(\"\");\n    const [selectedTeams, setSelectedTeams] = useState<string[]>([]);\n    const [scrollSpeed, setScrollSpeed] = useState<number>(5); // Default \"Normal\" speed\n    const [favoriteTeams, setFavoriteTeams] = useState<FavoriteTeam[]>([]);\n    const [mode, setMode] = useState<\"league\" | \"favorites\">(\"league\");\n    const [favLeagueSelect, setFavLeagueSelect] = useState<string>(\"\");\n    const [isLoading, setIsLoading] = useState<boolean>(false);\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n\n    // Parse favorite teams string into array\n    const parseFavoriteTeams = (str: string): FavoriteTeam[] => {\n        if (!str) return [];\n        return str.split(\",\").map(part => {\n            const [league, team] = part.split(\":\");\n            return { league: league?.toLowerCase() || \"\", team: team?.toUpperCase() || \"\" };\n        }).filter(f => f.league && f.team);\n    };\n\n    // Convert favorite teams array to string\n    const favoritesToString = (favs: FavoriteTeam[]): string => {\n        return favs.map(f => `${f.league}:${f.team}`).join(\",\");\n    };\n\n    // Convert seconds to dropdown value string - presets are now in seconds\n    const secondsToValueString = (seconds: number): string => {\n        // Match to closest preset (all in seconds now)\n        const presets = [15, 30, 60, 120, 180, 240, 300, 900, 1800, 3600, 7200];\n        const closest = presets.reduce((prev, curr) =>\n            Math.abs(curr - seconds) < Math.abs(prev - seconds) ? curr : prev\n        );\n        return closest.toString();\n    };\n\n    // Load settings on mount\n    useEffect(() => {\n        // First load saved settings, then check ticker status\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    const sportLeagues = data.sportLeagues || \"\";\n                    const sportTeamCodes = data.sportTeamCodes || \"\";\n                    const sportFavoriteTeams = data.sportFavoriteTeams || \"\";\n                    const sportScrollSpeed = data.sportScrollSpeed || 5;  // Default \"Normal\" speed\n                    const sportTickerRefresh = data.sportTickerRefresh || 60;  // Default 1 minute (seconds)\n                    const sportTickerMode = (data.sportTickerMode === \"favorites\" ? \"favorites\" : \"league\") as \"league\" | \"favorites\";\n                    const sportDarkMode = data.sportDarkMode === true;\n\n                    console.log(\"[SportsTickerWidget] Loaded settings:\", {\n                        sportLeagues,\n                        sportTeamCodes,\n                        sportScrollSpeed,\n                        sportTickerRefresh,\n                        sportTickerMode,\n                        sportFavoriteTeams,\n                        sportDarkMode\n                    });\n\n                    setSettings({\n                        sportLeagues,\n                        sportTeamCodes,\n                        sportTickerRefresh,\n                        sportScrollSpeed,\n                        sportFavoriteTeams,\n                        sportTickerMode,\n                        sportDarkMode,\n                    });\n                    setSelectedLeague(sportLeagues);\n                    setScrollSpeed(sportScrollSpeed);\n                    setMode(sportTickerMode);\n                    if (sportTeamCodes) {\n                        setSelectedTeams(sportTeamCodes.split(\",\").map((s: string) => s.trim()).filter((s: string) => s));\n                    }\n                    if (sportFavoriteTeams) {\n                        setFavoriteTeams(parseFavoriteTeams(sportFavoriteTeams));\n                    }\n                    setSettingsLoaded(true);\n                }\n\n                // After loading settings, check ticker running status (don't override settings)\n                return getSportsTickerStatus();\n            })\n            .then((statusData: any) => {\n                if (statusData) {\n                    setIsTickerRunning(statusData.running || false);\n                }\n            })\n            .catch((err) => {\n                console.error(\"[SportsTickerWidget] Error loading settings:\", err);\n                setIsTickerRunning(false);\n            });\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'sports') {\n                setIsTickerRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // Get teams for selected league\n    const getTeamOptions = () => {\n        if (!selectedLeague) return [];\n        const teams = teamsByLeague[selectedLeague];\n        if (!teams) return [];\n        return [{ text: \"All Teams (Show All Games)\", value: \"\" }, ...teams];\n    };\n\n    // Get teams for favorite league selection\n    const getFavTeamOptions = () => {\n        if (!favLeagueSelect) return [];\n        const teams = teamsByLeague[favLeagueSelect];\n        if (!teams) return [];\n        return [{ text: \"Select a Team...\", value: \"\" }, ...teams];\n    };\n\n    // Restart ticker with current settings\n    // Note: refresh is in seconds, but API expects minutes\n    const restartTicker = async (league: string, teams: string[], refreshSeconds: number, speed?: number) => {\n        if (!league) return;\n\n        try {\n            const refreshMinutes = refreshSeconds / 60;\n            await startSportsTicker(league, teams, refreshMinutes, speed ?? scrollSpeed);\n            setIsTickerRunning(true);\n            dispatchTickerStarted('sports');\n        } catch (error) {\n            console.error(\"Failed to restart sports ticker\", error);\n        }\n    };\n\n    // Poll for ready status - returns when ticker is ready or times out\n    const waitForReady = async (maxWaitMs: number = 30000): Promise<boolean> => {\n        const pollInterval = 500; // Poll every 500ms\n        const maxAttempts = Math.floor(maxWaitMs / pollInterval);\n\n        for (let i = 0; i < maxAttempts; i++) {\n            try {\n                const status = await getSportsTickerStatus();\n                if (status.ready) {\n                    return true;\n                }\n            } catch (err) {\n                // Ignore errors during polling\n            }\n            await new Promise(resolve => setTimeout(resolve, pollInterval));\n        }\n        return false; // Timed out\n    };\n\n    const handleStartTicker = async () => {\n        // Convert settings.sportTickerRefresh (seconds) to minutes for API\n        const refreshMinutes = settings.sportTickerRefresh / 60;\n\n        if (mode === \"favorites\") {\n            if (favoriteTeams.length === 0) {\n                toast.error(\"Please add at least one favorite team\");\n                return;\n            }\n            const favsStr = favoritesToString(favoriteTeams);\n            setIsLoading(true);\n            try {\n                await startFavoritesTicker(favsStr, refreshMinutes, scrollSpeed);\n                setIsTickerRunning(true);\n                dispatchTickerStarted('sports');\n                onTickerStart?.();\n                // Wait for pre-render to complete\n                await waitForReady();\n                toast.success(\"Sports Ticker Started!\");\n            } catch (error) {\n                toast.error(\"Failed to start ticker\");\n            } finally {\n                setIsLoading(false);\n            }\n        } else {\n            if (!selectedLeague) {\n                toast.error(\"Please select a league\");\n                return;\n            }\n\n            setIsLoading(true);\n            try {\n                await startSportsTicker(selectedLeague, selectedTeams, refreshMinutes, scrollSpeed);\n                setIsTickerRunning(true);\n                dispatchTickerStarted('sports');\n                onTickerStart?.();\n                // Wait for pre-render to complete\n                await waitForReady();\n                toast.success(\"Sports Ticker Started!\");\n            } catch (error) {\n                toast.error(\"Failed to start ticker\");\n            } finally {\n                setIsLoading(false);\n            }\n        }\n    };\n\n    const handleStopTicker = () => {\n        toast.promise(stopSportsTicker(), {\n            loading: \"Stopping Sports Ticker...\",\n            success: () => {\n                setIsTickerRunning(false);\n                return \"Sports Ticker Stopped\";\n            },\n            error: \"Failed to stop ticker\",\n        });\n    };\n\n    const updateSetting = (key: string, value: string) => {\n        return updateSportsSetting(key, value);\n    };\n\n    // Handle league change\n    const handleLeagueChange = (changes: any) => {\n        const league = changes.value;\n        setSelectedLeague(league);\n        setSelectedTeams([]); // Clear teams when league changes\n\n        const newSettings = { ...settings, sportLeagues: league };\n        setSettings(newSettings);\n        updateSetting(\"sportLeagues\", league);\n        updateSetting(\"sportTeamCodes\", \"\");\n\n        // Auto-restart if running\n        if (isTickerRunning && mode === \"league\") {\n            restartTicker(league, [], settings.sportTickerRefresh);\n        }\n    };\n\n    // Handle team selection\n    const handleTeamChange = (changes: any) => {\n        const team = changes.value;\n        if (!team) {\n            // \"All Teams\" selected\n            setSelectedTeams([]);\n            const newSettings = { ...settings, sportTeamCodes: \"\" };\n            setSettings(newSettings);\n            updateSetting(\"sportTeamCodes\", \"\");\n\n            if (isTickerRunning && mode === \"league\") {\n                restartTicker(selectedLeague, [], settings.sportTickerRefresh);\n            }\n            return;\n        }\n\n        // Add team if not already in list\n        if (selectedTeams.includes(team)) {\n            toast.error(\"Team already selected\");\n            return;\n        }\n\n        const newTeams = [...selectedTeams, team];\n        setSelectedTeams(newTeams);\n\n        const teamsStr = newTeams.join(\",\");\n        const newSettings = { ...settings, sportTeamCodes: teamsStr };\n        setSettings(newSettings);\n        updateSetting(\"sportTeamCodes\", teamsStr);\n\n        // Auto-restart if running\n        if (isTickerRunning && mode === \"league\") {\n            restartTicker(selectedLeague, newTeams, settings.sportTickerRefresh);\n        }\n    };\n\n    // Remove a team\n    const handleRemoveTeam = (team: string) => {\n        const newTeams = selectedTeams.filter((t) => t !== team);\n        setSelectedTeams(newTeams);\n\n        const teamsStr = newTeams.join(\",\");\n        const newSettings = { ...settings, sportTeamCodes: teamsStr };\n        setSettings(newSettings);\n        updateSetting(\"sportTeamCodes\", teamsStr);\n\n        // Auto-restart if running\n        if (isTickerRunning && selectedLeague && mode === \"league\") {\n            restartTicker(selectedLeague, newTeams, settings.sportTickerRefresh);\n        }\n    };\n\n    // Handle refresh change - values are already in seconds from preset\n    const handleRefreshChange = (changes: any) => {\n        const refreshSeconds = parseInt(changes.value, 10);\n        const newSettings = { ...settings, sportTickerRefresh: refreshSeconds };\n        setSettings(newSettings);\n        // Save as seconds to backend\n        updateSetting(\"sportTickerRefresh\", refreshSeconds.toString());\n\n        // Auto-restart if running - convert seconds to minutes for API\n        if (isTickerRunning) {\n            const refreshMinutes = refreshSeconds / 60;\n            if (mode === \"favorites\") {\n                const favsStr = favoritesToString(favoriteTeams);\n                startFavoritesTicker(favsStr, refreshMinutes, scrollSpeed);\n            } else if (selectedLeague) {\n                restartTicker(selectedLeague, selectedTeams, refreshMinutes);\n            }\n        }\n    };\n\n    // Handle scroll speed change (from dropdown)\n    // Note: Speed change is applied in real-time by the backend without restart\n    const handleScrollSpeedChange = (changes: any) => {\n        const speed = parseInt(changes.value, 10);\n        setScrollSpeed(speed);\n        const newSettings = { ...settings, sportScrollSpeed: speed };\n        setSettings(newSettings);\n        updateSetting(\"sportScrollSpeed\", changes.value);\n        // No restart needed - backend reads scroll speed dynamically from config\n    };\n\n    // Get scroll speed display value for dropdown\n    const getScrollSpeedValue = (speed: number): string => {\n        // Find closest preset\n        const presets = [2, 5, 10, 15];\n        const closest = presets.reduce((prev, curr) =>\n            Math.abs(curr - speed) < Math.abs(prev - speed) ? curr : prev\n        );\n        return closest.toString();\n    };\n\n    // Add favorite team\n    const handleAddFavorite = (changes: any) => {\n        const team = changes.value;\n        if (!team || !favLeagueSelect) return;\n\n        // Check if already exists\n        const exists = favoriteTeams.some(f => f.league === favLeagueSelect && f.team === team);\n        if (exists) {\n            toast.error(\"Team already in favorites\");\n            return;\n        }\n\n        const newFavorites = [...favoriteTeams, { league: favLeagueSelect, team }];\n        setFavoriteTeams(newFavorites);\n\n        const favsStr = favoritesToString(newFavorites);\n        setSettings({ ...settings, sportFavoriteTeams: favsStr });\n        updateSetting(\"sportFavoriteTeams\", favsStr);\n    };\n\n    // Remove favorite team\n    const handleRemoveFavorite = (fav: FavoriteTeam) => {\n        const newFavorites = favoriteTeams.filter(f => !(f.league === fav.league && f.team === fav.team));\n        setFavoriteTeams(newFavorites);\n\n        const favsStr = favoritesToString(newFavorites);\n        setSettings({ ...settings, sportFavoriteTeams: favsStr });\n        updateSetting(\"sportFavoriteTeams\", favsStr);\n    };\n\n    // Get team name for display\n    const getTeamDisplayName = (teamCode: string, league?: string): string => {\n        const leagueToUse = league || selectedLeague;\n        if (!leagueToUse) return teamCode;\n        const teams = teamsByLeague[leagueToUse];\n        if (!teams) return teamCode;\n        const team = teams.find((t) => t.value === teamCode);\n        return team ? team.text : teamCode;\n    };\n\n    // Get league display name\n    const getLeagueDisplayName = (leagueCode: string): string => {\n        const league = leagueOptions.find(l => l.value === leagueCode);\n        return league ? league.text : leagueCode.toUpperCase();\n    };\n\n    // Handle dark mode toggle\n    const handleDarkModeChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const enabled = event.target.checked;\n        const newSettings = { ...settings, sportDarkMode: enabled };\n        setSettings(newSettings);\n        updateSetting(\"sportDarkMode\", enabled ? \"yes\" : \"no\");\n    };\n\n    // Is single team mode (for scroll speed slider disable state)\n    // Only true when EXACTLY 1 team is selected - multiple teams should use scrolling cards view\n    const isSingleTeamMode = mode === \"league\" && selectedTeams.length === 1;\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <SportsBasketball style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                Live Sports Scores\n            </h3>\n\n            {/* Mode Toggle */}\n            <div className=\"setting-row\" style={{ marginBottom: \"1rem\" }}>\n                <div style={{ display: \"flex\", gap: \"1rem\" }}>\n                    <Button\n                        variant={mode === \"league\" ? \"contained\" : \"outlined\"}\n                        onClick={() => {\n                            setMode(\"league\");\n                            setSettings({ ...settings, sportTickerMode: \"league\" });\n                            updateSetting(\"sportTickerMode\", \"league\");\n                        }}\n                        style={{\n                            backgroundColor: mode === \"league\" ? \"#4169E1\" : \"transparent\",\n                            color: \"#fff\",\n                            borderColor: \"#4169E1\",\n                        }}\n                    >\n                        Single League\n                    </Button>\n                    <Button\n                        variant={mode === \"favorites\" ? \"contained\" : \"outlined\"}\n                        onClick={() => {\n                            setMode(\"favorites\");\n                            setSettings({ ...settings, sportTickerMode: \"favorites\" });\n                            updateSetting(\"sportTickerMode\", \"favorites\");\n                        }}\n                        style={{\n                            backgroundColor: mode === \"favorites\" ? \"#4169E1\" : \"transparent\",\n                            color: \"#fff\",\n                            borderColor: \"#4169E1\",\n                        }}\n                    >\n                        My Favorite Teams\n                    </Button>\n                </div>\n            </div>\n\n            {mode === \"league\" ? (\n                <>\n                    {/* League and Team Selection on same row */}\n                    <div className=\"setting-row\" style={{ display: \"flex\", gap: \"1rem\", flexWrap: \"wrap\" }}>\n                        <div style={{ flex: 1, minWidth: \"180px\" }}>\n                            <label className=\"setting-label\">Select League</label>\n                            <Select\n                                key={`league-select-${settingsLoaded}-${selectedLeague}`}\n                                name=\"league\"\n                                options={[\n                                    { text: \"Select a League...\", value: \"\" },\n                                    ...leagueOptions.map((l) => ({ text: l.text, value: l.value })),\n                                ]}\n                                caretIcon={<CaretIcon />}\n                                modalCloseButton={<ModalCloseButton />}\n                                onChange={handleLeagueChange}\n                                selectedValue={selectedLeague}\n                            />\n                        </div>\n\n                        {/* Team Selection (only show if league is selected) */}\n                        {selectedLeague && teamsByLeague[selectedLeague] && (\n                            <div style={{ flex: 1, minWidth: \"180px\" }}>\n                                <label className=\"setting-label\">Filter by Team (optional)</label>\n                                <Select\n                                    key={`team-select-${selectedLeague}`}\n                                    name=\"team\"\n                                    options={getTeamOptions()}\n                                    caretIcon={<CaretIcon />}\n                                    modalCloseButton={<ModalCloseButton />}\n                                    onChange={handleTeamChange}\n                                    selectedValue=\"\"\n                                />\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Selected Teams Chips */}\n                    {selectedTeams.length > 0 && (\n                        <div className=\"symbol-chips\">\n                            {selectedTeams.map((team) => (\n                                <div key={team} className=\"symbol-chip stock\">\n                                    {getTeamDisplayName(team)}\n                                    <span\n                                        onClick={() => handleRemoveTeam(team)}\n                                        className=\"chip-close\"\n                                        style={{ marginLeft: 8, cursor: \"pointer\" }}\n                                    >\n                                        &times;\n                                    </span>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n                </>\n            ) : (\n                <>\n                    {/* Favorites Mode */}\n                    <div className=\"setting-row\">\n                        <label className=\"setting-label\">Add Favorite Teams (across any league)</label>\n                        <div style={{ display: \"flex\", gap: \"0.5rem\", flexWrap: \"wrap\" }}>\n                            <div style={{ flex: 1, minWidth: \"150px\" }}>\n                                <Select\n                                    name=\"favLeague\"\n                                    options={[\n                                        { text: \"Select League...\", value: \"\" },\n                                        ...leagueOptions.filter(l => teamsByLeague[l.value]).map((l) => ({ text: l.text, value: l.value })),\n                                    ]}\n                                    caretIcon={<CaretIcon />}\n                                    modalCloseButton={<ModalCloseButton />}\n                                    onChange={(changes: any) => setFavLeagueSelect(changes.value)}\n                                    selectedValue={favLeagueSelect}\n                                />\n                            </div>\n                            {favLeagueSelect && (\n                                <div style={{ flex: 1, minWidth: \"150px\" }}>\n                                    <Select\n                                        key={`fav-team-select-${favLeagueSelect}`}\n                                        name=\"favTeam\"\n                                        options={getFavTeamOptions()}\n                                        caretIcon={<CaretIcon />}\n                                        modalCloseButton={<ModalCloseButton />}\n                                        onChange={handleAddFavorite}\n                                        selectedValue=\"\"\n                                    />\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Favorite Teams Chips */}\n                    {favoriteTeams.length > 0 && (\n                        <div className=\"symbol-chips\">\n                            {favoriteTeams.map((fav, idx) => (\n                                <div key={`${fav.league}-${fav.team}-${idx}`} className=\"symbol-chip crypto\">\n                                    <span style={{ fontSize: \"0.7rem\", opacity: 0.7 }}>\n                                        {getLeagueDisplayName(fav.league)}:\n                                    </span>{\" \"}\n                                    {getTeamDisplayName(fav.team, fav.league)}\n                                    <span\n                                        onClick={() => handleRemoveFavorite(fav)}\n                                        className=\"chip-close\"\n                                        style={{ marginLeft: 8, cursor: \"pointer\" }}\n                                    >\n                                        &times;\n                                    </span>\n                                </div>\n                            ))}\n                        </div>\n                    )}\n\n                    {/* Note about game availability */}\n                    <p style={{ fontSize: \"0.8rem\", color: \"#aaa\", marginTop: \"0.5rem\", fontStyle: \"italic\" }}>\n                        Note: Teams will only appear if they have a game today or an upcoming game\n                    </p>\n                </>\n            )}\n\n            {/* Settings Row - Refresh Interval, Scroll Speed, and Dark Mode */}\n            <div className=\"setting-row\" style={{ display: \"flex\", gap: \"1rem\", flexWrap: \"wrap\", alignItems: \"flex-end\" }}>\n                {/* Refresh Interval */}\n                <div style={{ flex: 1, minWidth: \"150px\" }}>\n                    <label className=\"setting-label\">Refresh Interval</label>\n                    <Select\n                        key={`refresh-select-${settingsLoaded}-${settings.sportTickerRefresh}`}\n                        selectedValue={secondsToValueString(settings.sportTickerRefresh)}\n                        name=\"refreshInterval\"\n                        options={refreshPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleRefreshChange}\n                    />\n                </div>\n\n                {/* Scroll Speed (only show if not single team mode) */}\n                {!isSingleTeamMode && (\n                    <div style={{ flex: 1, minWidth: \"150px\" }}>\n                        <label className=\"setting-label\">Scroll Speed</label>\n                        <Select\n                            key={`scroll-select-${settingsLoaded}-${scrollSpeed}`}\n                            selectedValue={getScrollSpeedValue(scrollSpeed)}\n                            name=\"scrollSpeed\"\n                            options={scrollSpeedPresets}\n                            caretIcon={<CaretIcon />}\n                            modalCloseButton={<ModalCloseButton />}\n                            onChange={handleScrollSpeedChange}\n                        />\n                    </div>\n                )}\n\n                {/* Dark Mode Toggle */}\n                <div style={{ minWidth: \"120px\" }}>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={settings.sportDarkMode}\n                                onChange={handleDarkModeChange}\n                                color=\"primary\"\n                            />\n                        }\n                        label=\"Dark Mode\"\n                        style={{ color: \"#fff\", marginLeft: 0 }}\n                    />\n                </div>\n            </div>\n\n            {/* Start Button */}\n            <Button\n                variant=\"contained\"\n                onClick={isTickerRunning ? handleStopTicker : handleStartTicker}\n                disabled={isLoading || (mode === \"league\" ? !selectedLeague : favoriteTeams.length === 0)}\n                className={`start-button ${isTickerRunning ? \"stop\" : \"\"}`}\n            >\n                {isLoading ? (\n                    <CircularProgress size={24} style={{ color: \"#fff\", marginRight: 8 }} />\n                ) : isTickerRunning ? (\n                    <Stop />\n                ) : (\n                    <PlayArrow />\n                )}\n                {isLoading ? \"PLEASE WAIT...\" : isTickerRunning ? \"STOP SPORTS TICKER\" : \"START SPORTS TICKER\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default SportsTickerWidget;\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\n// Start the stock ticker\nexport const startStockTicker = (\n    symbols: string[],\n    speed: number = 3,\n    fps: number = 60,\n    refresh: number = 5,\n    color: string = \"FFFFFF\",\n    font: string = \"LiberationSans-Bold\"\n): Promise<any> => {\n    const symbolsParam = symbols.join(\",\");\n    const requestUrl = `${getDeviceUrl(\"\")}/stocks/start?symbols=${encodeURIComponent(symbolsParam)}&speed=${speed}&fps=${fps}&refresh=${refresh}&color=${color}&font=${encodeURIComponent(font)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Stop the stock ticker\nexport const stopStockTicker = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/stocks/stop`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get stock ticker status\nexport const getStockTickerStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/stocks/status`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get stock quotes without starting the ticker\nexport const getStockQuotes = (symbols: string[]): Promise<any> => {\n    const symbolsParam = symbols.join(\",\");\n    const requestUrl = `${getDeviceUrl(\"\")}/stocks/quotes?symbols=${encodeURIComponent(symbolsParam)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Update a stock ticker setting\nexport const updateStockSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${key}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport { Close, PlayArrow, TrendingUp } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { FontList } from \"../../const/fonts\";\nimport { readSettings } from \"../../services/settings\";\nimport {\n    startStockTicker,\n    stopStockTicker,\n    getStockTickerStatus,\n    updateStockSetting,\n} from \"../../services/stocks\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype StockSettings = {\n    stockSymbols: string;\n    stockTickerRefresh: number;\n    stockTickerColor: string;\n    stockTickerFont: string;\n    stockScrollSpeed: number;\n};\n\n// Popular crypto options\nconst popularCrypto = [\n    { text: \"Bitcoin (BTC)\", value: \"BTC-USD\" },\n    { text: \"Ethereum (ETH)\", value: \"ETH-USD\" },\n    { text: \"Tether (USDT)\", value: \"USDT-USD\" },\n    { text: \"Binance Coin (BNB)\", value: \"BNB-USD\" },\n    { text: \"Solana (SOL)\", value: \"SOL-USD\" },\n    { text: \"Ripple (XRP)\", value: \"XRP-USD\" },\n    { text: \"USD Coin (USDC)\", value: \"USDC-USD\" },\n    { text: \"Cardano (ADA)\", value: \"ADA-USD\" },\n    { text: \"Avalanche (AVAX)\", value: \"AVAX-USD\" },\n    { text: \"Dogecoin (DOGE)\", value: \"DOGE-USD\" },\n];\n\n// List of crypto symbols for chip styling\nconst cryptoSymbols = popularCrypto.map(c => c.value);\n\n// Helper to check if symbol is crypto\nconst isCryptoSymbol = (symbol: string): boolean => {\n    return symbol.includes(\"-USD\") || cryptoSymbols.includes(symbol.toUpperCase());\n};\n\n// Popular stock options\nconst popularStocks = [\n    { text: \"Apple (AAPL)\", value: \"AAPL\" },\n    { text: \"Microsoft (MSFT)\", value: \"MSFT\" },\n    { text: \"Google (GOOG)\", value: \"GOOG\" },\n    { text: \"Amazon (AMZN)\", value: \"AMZN\" },\n    { text: \"Tesla (TSLA)\", value: \"TSLA\" },\n    { text: \"Meta (META)\", value: \"META\" },\n    { text: \"NVIDIA (NVDA)\", value: \"NVDA\" },\n    { text: \"Netflix (NFLX)\", value: \"NFLX\" },\n    { text: \"AMD (AMD)\", value: \"AMD\" },\n    { text: \"Intel (INTC)\", value: \"INTC\" },\n];\n\n// Color presets matching the screenshot style\nconst colorPresets = [\n    { name: \"White\", value: \"FFFFFF\" },\n    { name: \"Red\", value: \"FF0000\" },\n    { name: \"Green\", value: \"00FF00\" },\n    { name: \"Blue\", value: \"0000FF\" },\n    { name: \"Yellow\", value: \"FFFF00\" },\n    { name: \"Cyan\", value: \"00FFFF\" },\n    { name: \"Magenta\", value: \"FF00FF\" },\n    { name: \"Orange\", value: \"FFA500\" },\n];\n\n// Speed presets matching the screenshot\nconst speedPresets = [\n    { text: \"Slow\", value: \"2\" },\n    { text: \"Normal\", value: \"5\" },\n    { text: \"Fast\", value: \"10\" },\n    { text: \"Very Fast\", value: \"15\" },\n];\n\n// Refresh presets matching the screenshot\nconst refreshPresets = [\n    { text: \"1 minute\", value: \"1\" },\n    { text: \"5 minutes\", value: \"5\" },\n    { text: \"15 minutes\", value: \"15\" },\n    { text: \"30 minutes\", value: \"30\" },\n];\n\ninterface StockTickerWidgetProps {\n    onTickerStart?: () => void;\n}\n\nconst StockTickerWidget: React.FC<StockTickerWidgetProps> = ({ onTickerStart }) => {\n    const [settings, setSettings] = useState<StockSettings>({\n        stockSymbols: \"MSFT,GOOG,AMZN,BTC-USD\",\n        stockTickerRefresh: 5,\n        stockTickerColor: \"FFFFFF\",\n        stockTickerFont: \"LiberationSans-Bold\",\n        stockScrollSpeed: 5,\n    });\n    const [isTickerRunning, setIsTickerRunning] = useState(false);\n    const [symbolInput, setSymbolInput] = useState(\"\");\n    const [symbols, setSymbols] = useState<string[]>([]);\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n\n    // Load settings on mount\n    useEffect(() => {\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    const stockSymbols = data.stockSymbols || \"MSFT,GOOG,AMZN,BTC-USD\";\n                    setSettings({\n                        stockSymbols,\n                        stockTickerRefresh: data.stockTickerRefresh || 5,\n                        stockTickerColor: data.stockTickerColor || \"FFFFFF\",\n                        stockTickerFont: data.stockTickerFont || \"LiberationSans-Bold\",\n                        stockScrollSpeed: data.stockScrollSpeed || 5,\n                    });\n                    setSymbols(stockSymbols.split(\",\").map((s: string) => s.trim()).filter((s: string) => s));\n                    setSettingsLoaded(true);\n                }\n            })\n            .catch(console.error);\n\n        // Check ticker status\n        getStockTickerStatus()\n            .then((data: any) => {\n                setIsTickerRunning(data.running || false);\n            })\n            .catch(() => setIsTickerRunning(false));\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'stocks') {\n                setIsTickerRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // Get font options for dropdown\n    const getFontOptions = () => {\n        return FontList.map((font) => ({\n            value: font,\n            text: font,\n        }));\n    };\n\n    // Restart ticker with current settings\n    const restartTicker = async (newSettings: StockSettings, newSymbols?: string[]) => {\n        const syms = newSymbols || symbols;\n        if (syms.length === 0) return;\n\n        try {\n            await startStockTicker(\n                syms,\n                newSettings.stockScrollSpeed,\n                60,\n                newSettings.stockTickerRefresh,\n                newSettings.stockTickerColor,\n                newSettings.stockTickerFont\n            );\n            setIsTickerRunning(true);\n            dispatchTickerStarted('stocks');\n        } catch (error) {\n            console.error(\"Failed to restart ticker\", error);\n        }\n    };\n\n    const handleStartTicker = () => {\n        if (symbols.length === 0) {\n            toast.error(\"Please add at least one stock symbol\");\n            return;\n        }\n\n        toast.promise(\n            startStockTicker(\n                symbols,\n                settings.stockScrollSpeed,\n                60,\n                settings.stockTickerRefresh,\n                settings.stockTickerColor,\n                settings.stockTickerFont\n            ),\n            {\n                loading: \"Starting Stock Ticker...\",\n                success: () => {\n                    setIsTickerRunning(true);\n                    dispatchTickerStarted('stocks');\n                    onTickerStart?.();\n                    return \"Stock Ticker Started!\";\n                },\n                error: \"Failed to start ticker\",\n            }\n        );\n    };\n\n    const handleStopTicker = () => {\n        toast.promise(stopStockTicker(), {\n            loading: \"Stopping Stock Ticker...\",\n            success: () => {\n                setIsTickerRunning(false);\n                return \"Stock Ticker Stopped\";\n            },\n            error: \"Failed to stop ticker\",\n        });\n    };\n\n    const updateSetting = (key: string, value: string) => {\n        return updateStockSetting(key, value);\n    };\n\n    // Add a symbol (from input or dropdown)\n    const addSymbol = (newSymbol: string) => {\n        if (!newSymbol) return;\n        const symbol = newSymbol.trim().toUpperCase();\n        if (symbols.includes(symbol)) {\n            toast.error(\"Symbol already added\");\n            return;\n        }\n\n        const newSymbols = [...symbols, symbol];\n        setSymbols(newSymbols);\n\n        const symbolsStr = newSymbols.join(\",\");\n        setSettings({ ...settings, stockSymbols: symbolsStr });\n        updateSetting(\"stockSymbols\", symbolsStr);\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(settings, newSymbols);\n        }\n    };\n\n    // Add a new symbol from input\n    const handleAddSymbol = () => {\n        addSymbol(symbolInput);\n        setSymbolInput(\"\");\n    };\n\n    // Handle crypto dropdown selection\n    const handleAddCrypto = (changes: any) => {\n        if (changes.value) {\n            addSymbol(changes.value);\n        }\n    };\n\n    // Handle stock dropdown selection\n    const handleAddStock = (changes: any) => {\n        if (changes.value) {\n            addSymbol(changes.value);\n        }\n    };\n\n    // Remove a symbol\n    const handleRemoveSymbol = (symbol: string) => {\n        const newSymbols = symbols.filter((s) => s !== symbol);\n        setSymbols(newSymbols);\n\n        const symbolsStr = newSymbols.join(\",\");\n        setSettings({ ...settings, stockSymbols: symbolsStr });\n        updateSetting(\"stockSymbols\", symbolsStr);\n\n        // Auto-restart if running\n        if (isTickerRunning && newSymbols.length > 0) {\n            restartTicker(settings, newSymbols);\n        } else if (newSymbols.length === 0) {\n            handleStopTicker();\n        }\n    };\n\n    // Handle speed change from dropdown\n    const handleSpeedChange = (changes: any) => {\n        const speed = parseInt(changes.value, 10);\n        const newSettings = { ...settings, stockScrollSpeed: speed };\n        setSettings(newSettings);\n        updateSetting(\"stockScrollSpeed\", speed.toString());\n        // No restart needed - backend reads scroll speed dynamically from config\n    };\n\n    // Handle refresh change from dropdown\n    const handleRefreshChange = (changes: any) => {\n        const refresh = parseInt(changes.value, 10);\n        const newSettings = { ...settings, stockTickerRefresh: refresh };\n        setSettings(newSettings);\n        updateSetting(\"stockTickerRefresh\", refresh.toString());\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle color change from dropdown\n    const handleColorChange = (changes: any) => {\n        const color = changes.value;\n        const newSettings = { ...settings, stockTickerColor: color };\n        setSettings(newSettings);\n        updateSetting(\"stockTickerColor\", color);\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle font change from dropdown\n    const handleFontChange = (changes: any) => {\n        const font = changes.value;\n        const newSettings = { ...settings, stockTickerFont: font };\n        setSettings(newSettings);\n        updateSetting(\"stockTickerFont\", font);\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle keypress on input\n    const handleKeyPress = (e: React.KeyboardEvent) => {\n        if (e.key === \"Enter\") {\n            handleAddSymbol();\n        }\n    };\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <TrendingUp style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                Stocks & Crypto\n            </h3>\n\n            {/* Dropdowns Row */}\n            <div className=\"dropdown-row\">\n                <div className=\"dropdown-item\">\n                    <Select\n                        name=\"addCrypto\"\n                        options={[\n                            { text: \"Add Popular Crypto\", value: \"\" },\n                            ...popularCrypto,\n                        ]}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleAddCrypto}\n                        selectedValue=\"\"\n                    />\n                </div>\n                <div className=\"dropdown-item\">\n                    <Select\n                        name=\"addStock\"\n                        options={[\n                            { text: \"Add Popular Stock\", value: \"\" },\n                            ...popularStocks,\n                        ]}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleAddStock}\n                        selectedValue=\"\"\n                    />\n                </div>\n            </div>\n\n            {/* Symbol Input Row */}\n            <div className=\"input-row\">\n                <input\n                    type=\"text\"\n                    value={symbolInput}\n                    onChange={(e) => setSymbolInput(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Enter stock or crypto symbol\"\n                    className=\"symbol-input\"\n                />\n                <Button\n                    variant=\"contained\"\n                    onClick={handleAddSymbol}\n                    className=\"add-button\"\n                >\n                    ADD\n                </Button>\n            </div>\n\n            {/* Symbol Chips */}\n            <div className=\"symbol-chips\">\n                {symbols.map((symbol) => (\n                    <div\n                        key={symbol}\n                        className={`symbol-chip ${isCryptoSymbol(symbol) ? \"crypto\" : \"stock\"}`}\n                    >\n                        {symbol}\n                        <Close\n                            onClick={() => handleRemoveSymbol(symbol)}\n                            className=\"chip-close\"\n                        />\n                    </div>\n                ))}\n            </div>\n\n            {/* Settings Row */}\n            <div className=\"settings-grid\">\n                {/* Refresh Interval */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Refresh Interval</label>\n                    <Select\n                        key={`stock-refresh-${settingsLoaded}-${settings.stockTickerRefresh}`}\n                        selectedValue={settings.stockTickerRefresh.toString()}\n                        name=\"refreshInterval\"\n                        options={refreshPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleRefreshChange}\n                    />\n                </div>\n\n                {/* Text Color */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Text Color</label>\n                    <Select\n                        key={`stock-color-${settingsLoaded}-${settings.stockTickerColor}`}\n                        selectedValue={settings.stockTickerColor}\n                        name=\"textColor\"\n                        options={colorPresets.map((c) => ({\n                            value: c.value,\n                            text: c.name,\n                            markup: (\n                                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <div\n                                        style={{\n                                            width: 16,\n                                            height: 16,\n                                            backgroundColor: `#${c.value}`,\n                                            marginRight: 8,\n                                            borderRadius: 2,\n                                            border: c.value === \"FFFFFF\" ? \"1px solid #666\" : \"none\",\n                                        }}\n                                    />\n                                    {c.name}\n                                </div>\n                            ),\n                        }))}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleColorChange}\n                    />\n                </div>\n\n                {/* Scrolling Speed */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Scrolling Speed</label>\n                    <Select\n                        key={`stock-speed-${settingsLoaded}-${settings.stockScrollSpeed}`}\n                        selectedValue={settings.stockScrollSpeed.toString()}\n                        name=\"scrollSpeed\"\n                        options={speedPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleSpeedChange}\n                    />\n                </div>\n\n                {/* Font */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Font</label>\n                    <Select\n                        key={`stock-font-${settingsLoaded}-${settings.stockTickerFont}`}\n                        selectedValue={settings.stockTickerFont}\n                        name=\"tickerFont\"\n                        options={getFontOptions()}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleFontChange}\n                    />\n                </div>\n            </div>\n\n            {/* Start Button */}\n            <Button\n                variant=\"contained\"\n                onClick={isTickerRunning ? handleStopTicker : handleStartTicker}\n                disabled={symbols.length === 0}\n                className={`start-button ${isTickerRunning ? \"stop\" : \"\"}`}\n            >\n                <PlayArrow />\n                {isTickerRunning ? \"STOP STOCKS & CRYPTO\" : \"START STOCKS & CRYPTO\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default StockTickerWidget;\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\n// Start the weather widget\nexport const startWeatherWidget = (\n    location: string,\n    units: string = \"fahrenheit\",\n    showUnits: boolean = true,\n    forecast: string = \"1day\",\n    refresh: number = 1800\n): Promise<any> => {\n    const params = new URLSearchParams({\n        location: location,\n        units: units,\n        showUnits: showUnits ? \"yes\" : \"no\",\n        forecast: forecast,\n        refresh: refresh.toString(),\n    });\n    const requestUrl = `${getDeviceUrl(\"\")}/weather/start?${params.toString()}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Stop the weather widget\nexport const stopWeatherWidget = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/weather/stop`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get weather widget status\nexport const getWeatherStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/weather/status`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Fetch weather data without starting the widget\nexport const fetchWeatherData = (location: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/weather/fetch?location=${encodeURIComponent(location)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Update a weather setting\nexport const updateWeatherSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${key}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Button, Switch } from \"@material-ui/core\";\nimport { Close, PlayArrow, Cloud } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { readSettings } from \"../../services/settings\";\nimport {\n    startWeatherWidget,\n    stopWeatherWidget,\n    getWeatherStatus,\n    updateWeatherSetting,\n} from \"../../services/weather\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype WeatherSettings = {\n    weatherLocation: string;\n    weatherUnits: string;\n    weatherShowUnits: boolean;\n    weatherForecast: string;\n    weatherRefresh: number;\n};\n\n// Refresh presets - values in seconds\nconst refreshPresets = [\n    { text: \"5 minutes\", value: \"300\" },\n    { text: \"15 minutes\", value: \"900\" },\n    { text: \"30 minutes\", value: \"1800\" },\n    { text: \"1 hour\", value: \"3600\" },\n    { text: \"2 hours\", value: \"7200\" },\n    { text: \"8 hours\", value: \"28800\" },\n];\n\n// Forecast mode presets\nconst forecastPresets = [\n    { text: \"Today (Hourly)\", value: \"1day\" },\n    { text: \"3-Day Forecast\", value: \"3day\" },\n];\n\n// Unit presets\nconst unitPresets = [\n    { text: \"Fahrenheit (F)\", value: \"fahrenheit\" },\n    { text: \"Celsius (C)\", value: \"celsius\" },\n];\n\ninterface WeatherWidgetProps {\n    onTickerStart?: () => void;\n}\n\nconst WeatherWidget: React.FC<WeatherWidgetProps> = ({ onTickerStart }) => {\n    const [settings, setSettings] = useState<WeatherSettings>({\n        weatherLocation: \"\",\n        weatherUnits: \"fahrenheit\",\n        weatherShowUnits: true,\n        weatherForecast: \"1day\",\n        weatherRefresh: 1800,\n    });\n    const [isWidgetRunning, setIsWidgetRunning] = useState(false);\n    const [locationInput, setLocationInput] = useState(\"\");\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n    const [isLoading, setIsLoading] = useState(false);\n\n    // Load settings on mount\n    useEffect(() => {\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    const weatherLocation = data.weatherLocation || \"\";\n                    setSettings({\n                        weatherLocation,\n                        weatherUnits: data.weatherUnits || \"fahrenheit\",\n                        weatherShowUnits: data.weatherShowUnits !== false,\n                        weatherForecast: data.weatherForecast || \"1day\",\n                        weatherRefresh: data.weatherRefresh || 1800,\n                    });\n                    setLocationInput(weatherLocation);\n                    setSettingsLoaded(true);\n                }\n            })\n            .catch(console.error);\n\n        // Check widget status\n        getWeatherStatus()\n            .then((data: any) => {\n                setIsWidgetRunning(data.running || false);\n            })\n            .catch(() => setIsWidgetRunning(false));\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'weather') {\n                setIsWidgetRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // Convert seconds to dropdown value string\n    const secondsToValueString = (seconds: number): string => {\n        const presets = [300, 900, 1800, 3600, 7200, 28800];\n        const closest = presets.reduce((prev, curr) =>\n            Math.abs(curr - seconds) < Math.abs(prev - seconds) ? curr : prev\n        );\n        return closest.toString();\n    };\n\n    const handleStartWidget = async () => {\n        const location = locationInput.trim();\n        if (!location) {\n            toast.error(\"Please enter a location (city name or ZIP code)\");\n            return;\n        }\n\n        setIsLoading(true);\n        try {\n            await startWeatherWidget(\n                location,\n                settings.weatherUnits,\n                settings.weatherShowUnits,\n                settings.weatherForecast,\n                settings.weatherRefresh\n            );\n            setIsWidgetRunning(true);\n            dispatchTickerStarted('weather');\n            onTickerStart?.();\n\n            // Save location\n            setSettings({ ...settings, weatherLocation: location });\n            toast.success(\"Weather Widget Started!\");\n        } catch (error) {\n            toast.error(\"Failed to start weather widget\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleStopWidget = async () => {\n        setIsLoading(true);\n        try {\n            await stopWeatherWidget();\n            setIsWidgetRunning(false);\n            toast.success(\"Weather Widget Stopped\");\n        } catch (error) {\n            toast.error(\"Failed to stop weather widget\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleSetLocation = () => {\n        const location = locationInput.trim();\n        if (!location) {\n            toast.error(\"Please enter a location\");\n            return;\n        }\n\n        updateWeatherSetting(\"weatherLocation\", location);\n        setSettings({ ...settings, weatherLocation: location });\n        toast.success(\"Location saved!\");\n\n        // If widget is running, restart with new location\n        if (isWidgetRunning) {\n            handleStartWidget();\n        }\n    };\n\n    const handleUnitsChange = (changes: any) => {\n        const units = changes.value;\n        const newSettings = { ...settings, weatherUnits: units };\n        setSettings(newSettings);\n        updateWeatherSetting(\"weatherUnits\", units);\n\n        // If widget is running, restart with new units\n        if (isWidgetRunning) {\n            startWeatherWidget(\n                settings.weatherLocation,\n                units,\n                settings.weatherShowUnits,\n                settings.weatherForecast,\n                settings.weatherRefresh\n            );\n        }\n    };\n\n    const handleShowUnitsToggle = () => {\n        const newShowUnits = !settings.weatherShowUnits;\n        const newSettings = { ...settings, weatherShowUnits: newShowUnits };\n        setSettings(newSettings);\n        updateWeatherSetting(\"weatherShowUnits\", newShowUnits ? \"yes\" : \"no\");\n\n        // If widget is running, restart\n        if (isWidgetRunning) {\n            startWeatherWidget(\n                settings.weatherLocation,\n                settings.weatherUnits,\n                newShowUnits,\n                settings.weatherForecast,\n                settings.weatherRefresh\n            );\n        }\n    };\n\n    const handleForecastChange = (changes: any) => {\n        const forecast = changes.value;\n        const newSettings = { ...settings, weatherForecast: forecast };\n        setSettings(newSettings);\n        updateWeatherSetting(\"weatherForecast\", forecast);\n\n        // If widget is running, restart with new forecast mode\n        if (isWidgetRunning) {\n            startWeatherWidget(\n                settings.weatherLocation,\n                settings.weatherUnits,\n                settings.weatherShowUnits,\n                forecast,\n                settings.weatherRefresh\n            );\n        }\n    };\n\n    const handleRefreshChange = (changes: any) => {\n        const refreshSeconds = parseInt(changes.value, 10);\n        const newSettings = { ...settings, weatherRefresh: refreshSeconds };\n        setSettings(newSettings);\n        updateWeatherSetting(\"weatherRefresh\", refreshSeconds.toString());\n\n        // If widget is running, restart with new refresh\n        if (isWidgetRunning) {\n            startWeatherWidget(\n                settings.weatherLocation,\n                settings.weatherUnits,\n                settings.weatherShowUnits,\n                settings.weatherForecast,\n                refreshSeconds\n            );\n        }\n    };\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <Cloud style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                Weather Widget\n            </h3>\n\n            {/* All settings on one row */}\n            <div className=\"settings-grid\">\n                {/* Location Input */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">\n                        {settings.weatherLocation\n                            ? `Location: ${settings.weatherLocation}`\n                            : \"Location\"}\n                    </label>\n                    <input\n                        type=\"text\"\n                        className=\"symbol-input\"\n                        placeholder=\"ZIP or city\"\n                        value={locationInput}\n                        onChange={(e) => setLocationInput(e.target.value)}\n                        onKeyPress={(e) => {\n                            if (e.key === \"Enter\") {\n                                handleSetLocation();\n                            }\n                        }}\n                    />\n                </div>\n\n                {/* Temperature Unit */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Unit</label>\n                    <Select\n                        key={`units-select-${settingsLoaded}`}\n                        selectedValue={settings.weatherUnits}\n                        name=\"temperatureUnits\"\n                        options={unitPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleUnitsChange}\n                    />\n                </div>\n\n                {/* Display Units Toggle */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Show F/C</label>\n                    <Switch\n                        checked={settings.weatherShowUnits}\n                        onChange={handleShowUnitsToggle}\n                        color=\"primary\"\n                    />\n                </div>\n\n                {/* Forecast Mode */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Forecast</label>\n                    <Select\n                        key={`forecast-select-${settingsLoaded}`}\n                        selectedValue={settings.weatherForecast}\n                        name=\"forecastMode\"\n                        options={forecastPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleForecastChange}\n                    />\n                </div>\n\n                {/* Refresh Interval */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Refresh</label>\n                    <Select\n                        key={`refresh-select-${settingsLoaded}-${settings.weatherRefresh}`}\n                        selectedValue={secondsToValueString(settings.weatherRefresh)}\n                        name=\"refreshInterval\"\n                        options={refreshPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleRefreshChange}\n                    />\n                </div>\n            </div>\n\n            {/* Start/Stop Button */}\n            <Button\n                variant=\"contained\"\n                className={`start-button ${isWidgetRunning ? \"stop\" : \"\"}`}\n                onClick={isWidgetRunning ? handleStopWidget : handleStartWidget}\n                disabled={isLoading || (!isWidgetRunning && !locationInput.trim())}\n            >\n                {isWidgetRunning ? (\n                    <Close />\n                ) : (\n                    <PlayArrow />\n                )}\n                {isLoading\n                    ? \"PLEASE WAIT...\"\n                    : isWidgetRunning\n                    ? \"STOP WEATHER\"\n                    : \"START WEATHER\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default WeatherWidget;\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\n// Start the news ticker\nexport const startNewsTicker = (\n    sources: string, // comma-separated list of source keys\n    customURL: string = \"\",\n    speed: number = 5,\n    fps: number = 60,\n    refresh: number = 5,\n    color: string = \"FFFFFF\",\n    font: string = \"LiberationSans-Regular\"\n): Promise<any> => {\n    let requestUrl = `${getDeviceUrl(\"\")}/news/start?sources=${encodeURIComponent(sources)}&speed=${speed}&fps=${fps}&refresh=${refresh}&color=${color}&font=${encodeURIComponent(font)}`;\n\n    if (sources.includes(\"custom\") && customURL) {\n        requestUrl += `&customURL=${encodeURIComponent(customURL)}`;\n    }\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Stop the news ticker\nexport const stopNewsTicker = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/news/stop`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get news ticker status\nexport const getNewsTickerStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/news/status`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get available news sources\nexport const getNewsSources = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/news/sources`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Fetch news without starting the ticker\nexport const fetchNews = (source: string, customURL: string = \"\"): Promise<any> => {\n    let requestUrl = `${getDeviceUrl(\"\")}/news/fetch?source=${encodeURIComponent(source)}`;\n\n    if (source === \"custom\" && customURL) {\n        requestUrl += `&customURL=${encodeURIComponent(customURL)}`;\n    }\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Update a news ticker setting\nexport const updateNewsSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${key}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Button, CircularProgress } from \"@material-ui/core\";\nimport { Close, PlayArrow, RssFeed, Stop } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { FontList } from \"../../const/fonts\";\nimport { readSettings } from \"../../services/settings\";\nimport {\n    startNewsTicker,\n    stopNewsTicker,\n    getNewsTickerStatus,\n    updateNewsSetting,\n} from \"../../services/news\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype NewsSettings = {\n    newsSources: string[]; // Array of source keys\n    newsCustomURL: string;\n    newsTickerRefresh: number;\n    newsTickerColor: string;\n    newsTickerFont: string;\n    newsScrollSpeed: number;\n};\n\n// News source categories and options\nconst newsSourceCategories = {\n    \"World News\": [\n        { text: \"BBC News\", value: \"bbc\" },\n        { text: \"Reuters\", value: \"reuters\" },\n        { text: \"AP News\", value: \"ap\" },\n        { text: \"NPR News\", value: \"npr\" },\n        { text: \"The Guardian\", value: \"guardian\" },\n    ],\n    \"US News\": [\n        { text: \"CNN\", value: \"cnn\" },\n        { text: \"Fox News\", value: \"foxnews\" },\n        { text: \"NY Times\", value: \"nytimes\" },\n        { text: \"Washington Post\", value: \"washpost\" },\n        { text: \"USA Today\", value: \"usatoday\" },\n    ],\n    \"Tech News\": [\n        { text: \"Hacker News\", value: \"hackernews\" },\n        { text: \"TechCrunch\", value: \"techcrunch\" },\n        { text: \"The Verge\", value: \"theverge\" },\n        { text: \"Ars Technica\", value: \"arstechnica\" },\n        { text: \"Wired\", value: \"wired\" },\n    ],\n    \"Gaming News\": [\n        { text: \"IGN\", value: \"ign\" },\n        { text: \"Kotaku\", value: \"kotaku\" },\n        { text: \"Polygon\", value: \"polygon\" },\n        { text: \"GameSpot\", value: \"gamespot\" },\n    ],\n    \"Finance News\": [\n        { text: \"MarketWatch\", value: \"marketwatch\" },\n        { text: \"CNBC\", value: \"cnbc\" },\n        { text: \"Bloomberg\", value: \"bloomberg\" },\n    ],\n    \"Custom\": [\n        { text: \"Custom RSS Feed\", value: \"custom\" },\n    ],\n};\n\n// Flatten for dropdown - only show sources not already selected\nconst getAvailableSourceOptions = (selectedSources: string[]) => {\n    const options: { text: string; value: string }[] = [];\n    Object.entries(newsSourceCategories).forEach(([category, sources]) => {\n        sources.forEach((source) => {\n            if (!selectedSources.includes(source.value)) {\n                options.push({\n                    text: `${source.text}`,\n                    value: source.value,\n                });\n            }\n        });\n    });\n    return options;\n};\n\n// Get source display name\nconst getSourceName = (sourceKey: string): string => {\n    for (const sources of Object.values(newsSourceCategories)) {\n        const source = sources.find((s) => s.value === sourceKey);\n        if (source) return source.text;\n    }\n    return sourceKey;\n};\n\n// Color presets\nconst colorPresets = [\n    { name: \"White\", value: \"FFFFFF\" },\n    { name: \"Red\", value: \"FF0000\" },\n    { name: \"Green\", value: \"00FF00\" },\n    { name: \"Blue\", value: \"0000FF\" },\n    { name: \"Yellow\", value: \"FFFF00\" },\n    { name: \"Cyan\", value: \"00FFFF\" },\n    { name: \"Magenta\", value: \"FF00FF\" },\n    { name: \"Orange\", value: \"FFA500\" },\n];\n\n// Speed presets\nconst speedPresets = [\n    { text: \"Slow\", value: \"2\" },\n    { text: \"Normal\", value: \"5\" },\n    { text: \"Fast\", value: \"10\" },\n    { text: \"Very Fast\", value: \"15\" },\n];\n\n// Refresh presets (in minutes)\nconst refreshPresets = [\n    { text: \"1 minute\", value: \"1\" },\n    { text: \"5 minutes\", value: \"5\" },\n    { text: \"15 minutes\", value: \"15\" },\n    { text: \"30 minutes\", value: \"30\" },\n];\n\ninterface NewsWidgetProps {\n    onTickerStart?: () => void;\n}\n\nconst NewsWidget: React.FC<NewsWidgetProps> = ({ onTickerStart }) => {\n    const [settings, setSettings] = useState<NewsSettings>({\n        newsSources: [\"bbc\"],\n        newsCustomURL: \"\",\n        newsTickerRefresh: 5,\n        newsTickerColor: \"FFFFFF\",\n        newsTickerFont: \"LiberationSans-Regular\",\n        newsScrollSpeed: 5,\n    });\n    const [isTickerRunning, setIsTickerRunning] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [customURLInput, setCustomURLInput] = useState(\"\");\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n\n    // Load settings on mount\n    useEffect(() => {\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    // Parse newsSources from comma-separated string\n                    const sourcesStr = data.newsSources || \"bbc\";\n                    const sourcesArray = sourcesStr.split(\",\").map((s: string) => s.trim()).filter((s: string) => s);\n                    const newsCustomURL = data.newsCustomURL || \"\";\n                    setSettings({\n                        newsSources: sourcesArray.length > 0 ? sourcesArray : [\"bbc\"],\n                        newsCustomURL,\n                        newsTickerRefresh: data.newsTickerRefresh || 5,\n                        newsTickerColor: data.newsTickerColor || \"FFFFFF\",\n                        newsTickerFont: data.newsTickerFont || \"LiberationSans-Regular\",\n                        newsScrollSpeed: data.newsScrollSpeed || 5,\n                    });\n                    setCustomURLInput(newsCustomURL);\n                    setSettingsLoaded(true);\n                }\n            })\n            .catch(console.error);\n\n        // Check ticker status\n        getNewsTickerStatus()\n            .then((data: any) => {\n                setIsTickerRunning(data.running || false);\n            })\n            .catch(() => setIsTickerRunning(false));\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'news') {\n                setIsTickerRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    // Get font options for dropdown\n    const getFontOptions = () => {\n        return FontList.map((font) => ({\n            value: font,\n            text: font,\n        }));\n    };\n\n    // Convert sources array to comma-separated string\n    const sourcesToString = (sources: string[]): string => {\n        return sources.join(\",\");\n    };\n\n    // Restart ticker with current settings\n    const restartTicker = async (newSettings: NewsSettings) => {\n        try {\n            const customURL = newSettings.newsSources.includes(\"custom\") ? newSettings.newsCustomURL : \"\";\n            await startNewsTicker(\n                sourcesToString(newSettings.newsSources),\n                customURL,\n                newSettings.newsScrollSpeed,\n                60,\n                newSettings.newsTickerRefresh,\n                newSettings.newsTickerColor,\n                newSettings.newsTickerFont\n            );\n            setIsTickerRunning(true);\n            dispatchTickerStarted('news');\n        } catch (error) {\n            console.error(\"Failed to restart ticker\", error);\n        }\n    };\n\n    const handleStartTicker = async () => {\n        if (settings.newsSources.length === 0) {\n            toast.error(\"Please add at least one news source\");\n            return;\n        }\n\n        if (settings.newsSources.includes(\"custom\") && !customURLInput.trim()) {\n            toast.error(\"Please enter a custom RSS feed URL\");\n            return;\n        }\n\n        const customURL = settings.newsSources.includes(\"custom\") ? customURLInput.trim() : \"\";\n\n        setIsLoading(true);\n\n        try {\n            await startNewsTicker(\n                sourcesToString(settings.newsSources),\n                customURL,\n                settings.newsScrollSpeed,\n                60,\n                settings.newsTickerRefresh,\n                settings.newsTickerColor,\n                settings.newsTickerFont\n            );\n            setIsTickerRunning(true);\n            setIsLoading(false);\n            dispatchTickerStarted('news');\n            onTickerStart?.();\n            toast.success(\"News Ticker Started!\");\n        } catch (error) {\n            setIsLoading(false);\n            toast.error(\"Failed to start ticker\");\n        }\n    };\n\n    const handleStopTicker = () => {\n        toast.promise(stopNewsTicker(), {\n            loading: \"Stopping News Ticker...\",\n            success: () => {\n                setIsTickerRunning(false);\n                return \"News Ticker Stopped\";\n            },\n            error: \"Failed to stop ticker\",\n        });\n    };\n\n    const updateSetting = (key: string, value: string) => {\n        return updateNewsSetting(key, value);\n    };\n\n    // Handle adding a new source from dropdown\n    const handleAddSource = (changes: any) => {\n        const sourceKey = changes.value;\n        if (!sourceKey || settings.newsSources.includes(sourceKey)) return;\n\n        const newSources = [...settings.newsSources, sourceKey];\n        const newSettings = { ...settings, newsSources: newSources };\n        setSettings(newSettings);\n        updateSetting(\"newsSources\", sourcesToString(newSources));\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle removing a source\n    const handleRemoveSource = (sourceKey: string) => {\n        const newSources = settings.newsSources.filter((s) => s !== sourceKey);\n        if (newSources.length === 0) {\n            toast.error(\"Must have at least one news source\");\n            return;\n        }\n        const newSettings = { ...settings, newsSources: newSources };\n        setSettings(newSettings);\n        updateSetting(\"newsSources\", sourcesToString(newSources));\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle custom URL change\n    const handleSetCustomURL = () => {\n        const url = customURLInput.trim();\n        if (!url) {\n            toast.error(\"Please enter a URL\");\n            return;\n        }\n\n        updateSetting(\"newsCustomURL\", url);\n        const newSettings = { ...settings, newsCustomURL: url };\n        setSettings(newSettings);\n        toast.success(\"Custom URL saved!\");\n\n        // If ticker is running with custom source, restart\n        if (isTickerRunning && settings.newsSources.includes(\"custom\")) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle speed change from dropdown\n    const handleSpeedChange = (changes: any) => {\n        const speed = parseInt(changes.value, 10);\n        const newSettings = { ...settings, newsScrollSpeed: speed };\n        setSettings(newSettings);\n        updateSetting(\"newsScrollSpeed\", speed.toString());\n        // No restart needed - backend reads scroll speed dynamically from config\n    };\n\n    // Handle refresh change from dropdown\n    const handleRefreshChange = (changes: any) => {\n        const refresh = parseInt(changes.value, 10);\n        const newSettings = { ...settings, newsTickerRefresh: refresh };\n        setSettings(newSettings);\n        updateSetting(\"newsTickerRefresh\", refresh.toString());\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle color change from dropdown\n    const handleColorChange = (changes: any) => {\n        const color = changes.value;\n        const newSettings = { ...settings, newsTickerColor: color };\n        setSettings(newSettings);\n        updateSetting(\"newsTickerColor\", color);\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    // Handle font change from dropdown\n    const handleFontChange = (changes: any) => {\n        const font = changes.value;\n        const newSettings = { ...settings, newsTickerFont: font };\n        setSettings(newSettings);\n        updateSetting(\"newsTickerFont\", font);\n\n        // Auto-restart if running\n        if (isTickerRunning) {\n            restartTicker(newSettings);\n        }\n    };\n\n    const availableOptions = getAvailableSourceOptions(settings.newsSources);\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <RssFeed style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                News Ticker\n            </h3>\n\n            {/* Selected Sources as Chips */}\n            <div className=\"setting-row\">\n                <label className=\"setting-label\">Selected Sources</label>\n                <div className=\"chip-container\">\n                    {settings.newsSources.map((sourceKey) => (\n                        <div key={sourceKey} className=\"source-chip\">\n                            <span>{getSourceName(sourceKey)}</span>\n                            <button\n                                className=\"chip-remove\"\n                                onClick={() => handleRemoveSource(sourceKey)}\n                                title=\"Remove source\"\n                            >\n                                <Close style={{ fontSize: 14 }} />\n                            </button>\n                        </div>\n                    ))}\n                </div>\n            </div>\n\n            {/* Add Source Dropdown */}\n            {availableOptions.length > 0 && (\n                <div className=\"setting-row\">\n                    <label className=\"setting-label\">Add News Source</label>\n                    <Select\n                        key={`add-source-${settingsLoaded}-${settings.newsSources.length}`}\n                        selectedValue=\"\"\n                        name=\"addSource\"\n                        options={[{ text: \"+ Select a source to add...\", value: \"\" }, ...availableOptions]}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleAddSource}\n                    />\n                </div>\n            )}\n\n            {/* Custom URL Input (only show when custom is selected) */}\n            {settings.newsSources.includes(\"custom\") && (\n                <div className=\"input-row\">\n                    <input\n                        type=\"text\"\n                        value={customURLInput}\n                        onChange={(e) => setCustomURLInput(e.target.value)}\n                        onKeyPress={(e) => {\n                            if (e.key === \"Enter\") {\n                                handleSetCustomURL();\n                            }\n                        }}\n                        placeholder=\"Enter RSS feed URL\"\n                        className=\"symbol-input\"\n                    />\n                    <Button\n                        variant=\"contained\"\n                        onClick={handleSetCustomURL}\n                        className=\"add-button\"\n                    >\n                        SET URL\n                    </Button>\n                </div>\n            )}\n\n            {/* Settings Row */}\n            <div className=\"settings-grid\">\n                {/* Refresh Interval */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Refresh Interval</label>\n                    <Select\n                        key={`news-refresh-${settingsLoaded}-${settings.newsTickerRefresh}`}\n                        selectedValue={settings.newsTickerRefresh.toString()}\n                        name=\"refreshInterval\"\n                        options={refreshPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleRefreshChange}\n                    />\n                </div>\n\n                {/* Text Color */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Text Color</label>\n                    <Select\n                        key={`news-color-${settingsLoaded}-${settings.newsTickerColor}`}\n                        selectedValue={settings.newsTickerColor}\n                        name=\"textColor\"\n                        options={colorPresets.map((c) => ({\n                            value: c.value,\n                            text: c.name,\n                            markup: (\n                                <div style={{ display: \"flex\", alignItems: \"center\" }}>\n                                    <div\n                                        style={{\n                                            width: 16,\n                                            height: 16,\n                                            backgroundColor: `#${c.value}`,\n                                            marginRight: 8,\n                                            borderRadius: 2,\n                                            border: c.value === \"FFFFFF\" ? \"1px solid #666\" : \"none\",\n                                        }}\n                                    />\n                                    {c.name}\n                                </div>\n                            ),\n                        }))}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleColorChange}\n                    />\n                </div>\n\n                {/* Scrolling Speed */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Scrolling Speed</label>\n                    <Select\n                        key={`news-speed-${settingsLoaded}-${settings.newsScrollSpeed}`}\n                        selectedValue={settings.newsScrollSpeed.toString()}\n                        name=\"scrollSpeed\"\n                        options={speedPresets}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleSpeedChange}\n                    />\n                </div>\n\n                {/* Font */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Font</label>\n                    <Select\n                        key={`news-font-${settingsLoaded}-${settings.newsTickerFont}`}\n                        selectedValue={settings.newsTickerFont}\n                        name=\"tickerFont\"\n                        options={getFontOptions()}\n                        caretIcon={<CaretIcon />}\n                        modalCloseButton={<ModalCloseButton />}\n                        onChange={handleFontChange}\n                    />\n                </div>\n            </div>\n\n            {/* Start Button */}\n            <Button\n                variant=\"contained\"\n                onClick={isTickerRunning ? handleStopTicker : handleStartTicker}\n                disabled={isLoading || (settings.newsSources.includes(\"custom\") && !customURLInput.trim()) || settings.newsSources.length === 0}\n                className={`start-button ${isTickerRunning ? \"stop\" : \"\"}`}\n            >\n                {isLoading ? (\n                    <CircularProgress size={24} style={{ color: \"#fff\", marginRight: 8 }} />\n                ) : isTickerRunning ? (\n                    <Stop />\n                ) : (\n                    <PlayArrow />\n                )}\n                {isLoading ? \"PLEASE WAIT...\" : isTickerRunning ? \"STOP NEWS TICKER\" : \"START NEWS TICKER\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default NewsWidget;\n","import axios from \"axios\";\nimport { getDeviceUrl } from \".\";\n\n// Start the clock widget\nexport const startClock = (\n    face: string = \"cyberpunk\",\n    use12Hour: boolean = true,\n    showSeconds: boolean = true\n): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/clock/start?face=${face}&use12Hour=${use12Hour}&showSeconds=${showSeconds}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Stop the clock widget\nexport const stopClock = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/clock/stop`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get clock status\nexport const getClockStatus = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/clock/status`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Get available clock faces\nexport const getClockFaces = (): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/clock/faces`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n\n// Update a clock setting\nexport const updateClockSetting = (key: string, value: string): Promise<any> => {\n    const requestUrl = `${getDeviceUrl(\"\")}/settings?key=${key}&value=${encodeURIComponent(value)}`;\n\n    return axios.get(requestUrl).then((value) => {\n        return value.data;\n    });\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Button, CircularProgress, Switch, FormControlLabel } from \"@material-ui/core\";\nimport { PlayArrow, Stop, Schedule } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { readSettings } from \"../../services/settings\";\nimport {\n    startClock,\n    stopClock,\n    getClockStatus,\n    updateClockSetting,\n} from \"../../services/clock\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype ClockSettings = {\n    clockFace: string;\n    clockUse12Hour: boolean;\n    clockShowSeconds: boolean;\n};\n\n// Clock face options\nconst clockFaceOptions = [\n    { text: \"Cyberpunk Neon\", value: \"cyberpunk\" },\n    { text: \"Synthwave\", value: \"synthwave\" },\n    { text: \"Tron Grid\", value: \"tron\" },\n    { text: \"Digital Waves\", value: \"waves\" },\n    { text: \"Word Clock\", value: \"word\" },\n    { text: \"Linear Timeline\", value: \"linear\" },\n    { text: \"Swatch .Beats\", value: \"swatch\" },\n    { text: \"7-Segment LED\", value: \"segment\" },\n];\n\n\ninterface ClockWidgetProps {\n    onClockStart?: () => void;\n}\n\nconst ClockWidget: React.FC<ClockWidgetProps> = ({ onClockStart }) => {\n    const [settings, setSettings] = useState<ClockSettings>({\n        clockFace: \"cyberpunk\",\n        clockUse12Hour: true,\n        clockShowSeconds: true,\n    });\n    const [isClockRunning, setIsClockRunning] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n\n    // Load settings on mount\n    useEffect(() => {\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    setSettings({\n                        clockFace: data.clockFace || \"cyberpunk\",\n                        clockUse12Hour: data.clockUse12Hour !== false,\n                        clockShowSeconds: data.clockShowSeconds !== false,\n                    });\n                    setSettingsLoaded(true);\n                }\n            })\n            .catch(console.error);\n\n        // Check clock status\n        getClockStatus()\n            .then((data: any) => {\n                setIsClockRunning(data.running || false);\n            })\n            .catch(() => setIsClockRunning(false));\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'clock') {\n                setIsClockRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const handleStartClock = async () => {\n        setIsLoading(true);\n\n        try {\n            await startClock(\n                settings.clockFace,\n                settings.clockUse12Hour,\n                settings.clockShowSeconds\n            );\n            setIsClockRunning(true);\n            setIsLoading(false);\n            dispatchTickerStarted('clock');\n            onClockStart?.();\n            toast.success(\"Clock Started!\");\n        } catch (error) {\n            setIsLoading(false);\n            toast.error(\"Failed to start clock\");\n        }\n    };\n\n    const handleStopClock = () => {\n        toast.promise(stopClock(), {\n            loading: \"Stopping Clock...\",\n            success: () => {\n                setIsClockRunning(false);\n                return \"Clock Stopped\";\n            },\n            error: \"Failed to stop clock\",\n        });\n    };\n\n    const updateSetting = (key: string, value: string) => {\n        return updateClockSetting(key, value);\n    };\n\n    // Handle clock face change\n    const handleFaceChange = async (changes: any) => {\n        const face = changes.value;\n        const newSettings = { ...settings, clockFace: face };\n        setSettings(newSettings);\n        updateSetting(\"clockFace\", face);\n\n        // Auto-restart if running\n        if (isClockRunning) {\n            try {\n                await startClock(\n                    face,\n                    newSettings.clockUse12Hour,\n                    newSettings.clockShowSeconds\n                );\n            } catch (error) {\n                console.error(\"Failed to restart clock\", error);\n            }\n        }\n    };\n\n    // Handle 12-hour toggle\n    const handleUse12HourChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const use12Hour = event.target.checked;\n        const newSettings = { ...settings, clockUse12Hour: use12Hour };\n        setSettings(newSettings);\n        updateSetting(\"clockUse12Hour\", use12Hour ? \"yes\" : \"no\");\n\n        // Auto-restart if running\n        if (isClockRunning) {\n            try {\n                await startClock(\n                    newSettings.clockFace,\n                    use12Hour,\n                    newSettings.clockShowSeconds\n                );\n            } catch (error) {\n                console.error(\"Failed to restart clock\", error);\n            }\n        }\n    };\n\n    // Handle show seconds toggle\n    const handleShowSecondsChange = async (event: React.ChangeEvent<HTMLInputElement>) => {\n        const showSeconds = event.target.checked;\n        const newSettings = { ...settings, clockShowSeconds: showSeconds };\n        setSettings(newSettings);\n        updateSetting(\"clockShowSeconds\", showSeconds ? \"yes\" : \"no\");\n\n        // Auto-restart if running\n        if (isClockRunning) {\n            try {\n                await startClock(\n                    newSettings.clockFace,\n                    newSettings.clockUse12Hour,\n                    showSeconds\n                );\n            } catch (error) {\n                console.error(\"Failed to restart clock\", error);\n            }\n        }\n    };\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <Schedule style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                Clock Settings\n            </h3>\n\n            {/* Clock Face Selection */}\n            <div className=\"setting-row\">\n                <label className=\"setting-label\">Clock Face</label>\n                <Select\n                    key={`clock-face-${settingsLoaded}-${settings.clockFace}`}\n                    selectedValue={settings.clockFace}\n                    name=\"clockFace\"\n                    options={clockFaceOptions}\n                    caretIcon={<CaretIcon />}\n                    modalCloseButton={<ModalCloseButton />}\n                    onChange={handleFaceChange}\n                />\n            </div>\n\n            {/* Settings Grid */}\n            <div className=\"settings-grid\" style={{ gridTemplateColumns: \"repeat(2, 1fr)\" }}>\n                {/* Time Format Toggle */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Time Format</label>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={settings.clockUse12Hour}\n                                onChange={handleUse12HourChange}\n                                color=\"primary\"\n                            />\n                        }\n                        label={settings.clockUse12Hour ? \"12-Hour\" : \"24-Hour\"}\n                        style={{ color: \"#fff\", marginLeft: 0 }}\n                    />\n                </div>\n\n                {/* Seconds Display Toggle */}\n                <div className=\"setting-item\">\n                    <label className=\"setting-label\">Seconds Display</label>\n                    <FormControlLabel\n                        control={\n                            <Switch\n                                checked={settings.clockShowSeconds}\n                                onChange={handleShowSecondsChange}\n                                color=\"primary\"\n                            />\n                        }\n                        label={settings.clockShowSeconds ? \"Show Seconds\" : \"Hide Seconds\"}\n                        style={{ color: \"#fff\", marginLeft: 0 }}\n                    />\n                </div>\n            </div>\n\n            {/* Start Button */}\n            <Button\n                variant=\"contained\"\n                onClick={isClockRunning ? handleStopClock : handleStartClock}\n                disabled={isLoading}\n                className={`start-button ${isClockRunning ? \"stop\" : \"\"}`}\n            >\n                {isLoading ? (\n                    <CircularProgress size={24} style={{ color: \"#fff\", marginRight: 8 }} />\n                ) : isClockRunning ? (\n                    <Stop />\n                ) : (\n                    <PlayArrow />\n                )}\n                {isLoading ? \"PLEASE WAIT...\" : isClockRunning ? \"STOP CLOCK\" : \"START CLOCK\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default ClockWidget;\n","import React, { useState, useEffect } from \"react\";\nimport { Button, CircularProgress, Switch, FormControlLabel } from \"@material-ui/core\";\nimport { PlayArrow, Stop, Slideshow, Favorite } from \"@material-ui/icons\";\nimport toast from \"react-hot-toast\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { readSettings, updateSetting } from \"../../services/settings\";\nimport {\n    startSlideshow,\n    stopSlideshow,\n    getSlideshowStatus,\n    getSlideshowFavorites,\n} from \"../../services\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\n\ntype SlideshowSettings = {\n    slideshowInterval: number;\n    slideshowIncludeVideos: boolean;\n};\n\n// Interval options\nconst intervalOptions = [\n    { text: \"1 second\", value: \"1\" },\n    { text: \"3 seconds\", value: \"3\" },\n    { text: \"5 seconds\", value: \"5\" },\n    { text: \"10 seconds\", value: \"10\" },\n    { text: \"20 seconds\", value: \"20\" },\n    { text: \"30 seconds\", value: \"30\" },\n    { text: \"1 minute\", value: \"60\" },\n    { text: \"5 minutes\", value: \"300\" },\n];\n\ninterface SlideshowWidgetProps {\n    onSlideshowStart?: () => void;\n}\n\nconst SlideshowWidget: React.FC<SlideshowWidgetProps> = ({ onSlideshowStart }) => {\n    const [settings, setSettings] = useState<SlideshowSettings>({\n        slideshowInterval: 3,\n        slideshowIncludeVideos: false,\n    });\n    const [isSlideshowRunning, setIsSlideshowRunning] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const [settingsLoaded, setSettingsLoaded] = useState<boolean>(false);\n    const [favoritesCount, setFavoritesCount] = useState<number>(0);\n\n    // Load settings and favorites count on mount\n    useEffect(() => {\n        readSettings()\n            .then((data: any) => {\n                if (data) {\n                    setSettings({\n                        slideshowInterval: data.slideshowInterval || 3,\n                        slideshowIncludeVideos: data.slideshowIncludeVideos === true,\n                    });\n                    setSettingsLoaded(true);\n                }\n            })\n            .catch(console.error);\n\n        // Check slideshow status\n        getSlideshowStatus()\n            .then((data: any) => {\n                setIsSlideshowRunning(data.running || false);\n                setFavoritesCount(data.favoritesCount || 0);\n            })\n            .catch(() => setIsSlideshowRunning(false));\n\n        // Load favorites count\n        getSlideshowFavorites()\n            .then((favorites: string[]) => {\n                setFavoritesCount(favorites.length);\n            })\n            .catch(() => {});\n\n        // Listen for other tickers starting - reset our button state\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'slideshow') {\n                setIsSlideshowRunning(false);\n            }\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const handleStartSlideshow = async () => {\n        if (favoritesCount === 0) {\n            toast.error(\"No favorites selected. Add favorites using the  button on marquees.\");\n            return;\n        }\n\n        setIsLoading(true);\n\n        try {\n            const result = await startSlideshow(\n                settings.slideshowInterval,\n                settings.slideshowIncludeVideos ? \"yes\" : \"no\"\n            );\n\n            if (result.status === \"error\") {\n                toast.error(result.message || \"Failed to start slideshow\");\n                setIsLoading(false);\n                return;\n            }\n\n            setIsSlideshowRunning(true);\n            setIsLoading(false);\n            dispatchTickerStarted('slideshow');\n            onSlideshowStart?.();\n            toast.success(\"Slideshow Started!\");\n        } catch (error) {\n            setIsLoading(false);\n            toast.error(\"Failed to start slideshow\");\n        }\n    };\n\n    const handleStopSlideshow = () => {\n        toast.promise(stopSlideshow(), {\n            loading: \"Stopping Slideshow...\",\n            success: () => {\n                setIsSlideshowRunning(false);\n                return \"Slideshow Stopped\";\n            },\n            error: \"Failed to stop slideshow\",\n        });\n    };\n\n    // Handle interval change\n    const handleIntervalChange = (changes: any) => {\n        const interval = parseInt(changes.value, 10);\n        setSettings({ ...settings, slideshowInterval: interval });\n        updateSetting(\"slideshowInterval\", String(interval));\n    };\n\n    // Handle include videos change\n    const handleIncludeVideosChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const includeVideos = event.target.checked;\n        setSettings({ ...settings, slideshowIncludeVideos: includeVideos });\n        updateSetting(\"slideshowIncludeVideos\", includeVideos ? \"yes\" : \"no\");\n    };\n\n    return (\n        <div className=\"widget-section\">\n            <h3 className=\"section-title\">\n                <Slideshow style={{ marginRight: 8, verticalAlign: \"middle\" }} />\n                Slideshow Settings\n            </h3>\n\n            {/* Favorites Count */}\n            <div className=\"setting-row\" style={{ marginBottom: 16 }}>\n                <div style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 8,\n                    padding: \"12px 16px\",\n                    backgroundColor: favoritesCount > 0 ? \"rgba(239, 68, 68, 0.2)\" : \"rgba(255,255,255,0.1)\",\n                    borderRadius: 8,\n                    border: favoritesCount > 0 ? \"1px solid rgba(239, 68, 68, 0.5)\" : \"1px solid rgba(255,255,255,0.2)\",\n                }}>\n                    <Favorite style={{ color: favoritesCount > 0 ? \"#ef4444\" : \"#888\" }} />\n                    <span style={{ color: \"#fff\" }}>\n                        {favoritesCount > 0\n                            ? `${favoritesCount} favorite${favoritesCount !== 1 ? 's' : ''} selected`\n                            : \"No favorites selected\"}\n                    </span>\n                </div>\n                <p style={{\n                    fontSize: 12,\n                    color: \"#888\",\n                    marginTop: 8,\n                    marginBottom: 0\n                }}>\n                    Use the  button on marquees in Browse to add favorites\n                </p>\n            </div>\n\n            {/* Interval Selection */}\n            <div className=\"setting-row\">\n                <label className=\"setting-label\">Interval</label>\n                <Select\n                    key={`slideshow-interval-${settingsLoaded}-${settings.slideshowInterval}`}\n                    selectedValue={String(settings.slideshowInterval)}\n                    name=\"slideshowInterval\"\n                    options={intervalOptions}\n                    caretIcon={<CaretIcon />}\n                    modalCloseButton={<ModalCloseButton />}\n                    onChange={handleIntervalChange}\n                />\n            </div>\n\n            {/* Include Videos Toggle */}\n            <div className=\"setting-row\">\n                <FormControlLabel\n                    control={\n                        <Switch\n                            checked={settings.slideshowIncludeVideos}\n                            onChange={handleIncludeVideosChange}\n                            color=\"primary\"\n                        />\n                    }\n                    label=\"Include Video Marquees\"\n                    style={{ color: \"#fff\", marginLeft: 0 }}\n                />\n                <p style={{\n                    fontSize: 12,\n                    color: \"#888\",\n                    marginTop: 4,\n                    marginBottom: 0\n                }}>\n                    When enabled, video marquees play once then advance to the next slide\n                </p>\n            </div>\n\n            {/* Start Button */}\n            <Button\n                variant=\"contained\"\n                onClick={isSlideshowRunning ? handleStopSlideshow : handleStartSlideshow}\n                disabled={isLoading || (favoritesCount === 0 && !isSlideshowRunning)}\n                className={`start-button ${isSlideshowRunning ? \"stop\" : \"\"}`}\n            >\n                {isLoading ? (\n                    <CircularProgress size={24} style={{ color: \"#fff\", marginRight: 8 }} />\n                ) : isSlideshowRunning ? (\n                    <Stop />\n                ) : (\n                    <PlayArrow />\n                )}\n                {isLoading ? \"PLEASE WAIT...\" : isSlideshowRunning ? \"STOP SLIDESHOW\" : \"START SLIDESHOW\"}\n            </Button>\n        </div>\n    );\n};\n\nexport default SlideshowWidget;\n","import React, { ReactElement } from \"react\";\nimport SportsTickerWidget from \"./SportsTickerWidget\";\nimport StockTickerWidget from \"./StockTickerWidget\";\nimport WeatherWidget from \"./WeatherWidget\";\nimport NewsWidget from \"./NewsWidget\";\nimport ClockWidget from \"./ClockWidget\";\nimport SlideshowWidget from \"./SlideshowWidget\";\n\nimport \"react-responsive-select/dist/react-responsive-select.css\";\nimport \"./styles.css\";\n\nconst WidgetSettings = (): ReactElement => {\n    return (\n        <div className=\"widget-settings-page\">\n            <div className=\"widget-content\">\n                {/* Sports Ticker Widget - First */}\n                <SportsTickerWidget />\n\n                {/* Stock Ticker Widget - Second */}\n                <StockTickerWidget />\n\n                {/* Weather Widget - Third */}\n                <WeatherWidget />\n\n                {/* News Widget - Fourth */}\n                <NewsWidget />\n\n                {/* Clock Widget - Fifth */}\n                <ClockWidget />\n\n                {/* Slideshow Widget - Sixth (Last) */}\n                <SlideshowWidget />\n            </div>\n        </div>\n    );\n};\n\nexport default WidgetSettings;\n","import { Button } from \"@material-ui/core\";\nimport React, { useEffect, useState, ReactElement } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { checkForUpdates } from \"../../services\";\nimport { updateFirmware } from \"../../services/settings\";\nimport \"./styles.css\";\n\nconst UpdatePage = (): ReactElement => {\n  const [updateInfo, setUpdateInfo] = useState<any>(null);\n  const [checkingUpdate, setCheckingUpdate] = useState(true);\n  const [checkFailed, setCheckFailed] = useState(false);\n  const [isUpdating, setIsUpdating] = useState(false);\n\n  const handleCheckForUpdates = async () => {\n    setCheckingUpdate(true);\n    setCheckFailed(false);\n    try {\n      const info = await checkForUpdates();\n      setUpdateInfo(info);\n    } catch (error) {\n      console.error(error);\n      setCheckFailed(true);\n    } finally {\n      setCheckingUpdate(false);\n    }\n  };\n\n  useEffect(() => {\n    handleCheckForUpdates();\n  }, []);\n\n  const updateSystem = (beta: boolean) => {\n    setIsUpdating(true);\n    toast.promise(\n      updateFirmware(beta),\n      {\n        loading: beta ? \"Pixelcade LCD Beta Update Started\" : \"Pixelcade LCD Update Started\",\n        success: () => {\n          return `Please wait until you see the Update Complete message on your Pixelcade before doing anything else.`;\n        },\n        error: \"Failed to start update\",\n      },\n      { duration: 10000 }\n    );\n  };\n\n  // Check if beta is available and different from stable\n  const betaAvailable = updateInfo?.betaFirmwareVersion &&\n    updateInfo.betaFirmwareVersion !== updateInfo.latestFirmwareVersion;\n\n  return (\n    <div className=\"fade-in update-page\">\n      <div className=\"update-container\">\n        <h1 className=\"update-title\">System Updates</h1>\n\n        {checkingUpdate ? (\n          <div className=\"update-status checking\">\n            <div className=\"spinner\"></div>\n            <p>Checking for updates...</p>\n          </div>\n        ) : checkFailed ? (\n          // USB-only connectivity - can't check for updates\n          <div className=\"update-status usb-only\">\n            <div className=\"usb-icon\">USB</div>\n            <h2>USB Connection Only</h2>\n            <p>WiFi connectivity is required for updates.</p>\n            <p className=\"usb-instructions\">\n              Since you are connected via USB only, you can still update by following these instructions:\n            </p>\n            <a\n              href=\"https://pixelcade.org/lcdgen3/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"usb-link\"\n            >\n              pixelcade.org/lcdgen3\n            </a>\n          </div>\n        ) : updateInfo ? (\n          <>\n            {updateInfo.updateAvailable ? (\n              <div className=\"update-status available\">\n                <div className=\"update-badge\">\n                  <span className=\"badge-icon\">!</span>\n                </div>\n                <h2>Updates Available</h2>\n\n                <div className=\"update-details\">\n                  {updateInfo.firmwareUpdateAvailable && (\n                    <div className=\"update-item\">\n                      <span className=\"update-label\">Firmware</span>\n                      <span className=\"update-versions\">\n                        <span className=\"version-current\">{updateInfo.currentFirmwareVersion}</span>\n                        <span className=\"version-arrow\"></span>\n                        <span className=\"version-new\">{updateInfo.latestFirmwareVersion}</span>\n                      </span>\n                    </div>\n                  )}\n                  {updateInfo.artworkUpdateAvailable && (\n                    <div className=\"update-item\">\n                      <span className=\"update-label\">Artwork</span>\n                      <span className=\"update-versions\">\n                        <span className=\"version-current\">v{updateInfo.currentArtworkVersion}</span>\n                        <span className=\"version-arrow\"></span>\n                        <span className=\"version-new\">v{updateInfo.latestArtworkVersion}</span>\n                      </span>\n                    </div>\n                  )}\n                </div>\n\n                {(updateInfo.releaseNotesList?.length > 0 || updateInfo.releaseNotes || updateInfo.releaseDate) && (\n                  <div className=\"release-notes\">\n                    <h3>What's New</h3>\n                    {updateInfo.releaseDate && (\n                      <p className=\"release-date\">Release Date: {updateInfo.releaseDate}</p>\n                    )}\n                    {updateInfo.releaseNotesList?.length > 0 ? (\n                      <ul className=\"release-notes-list\">\n                        {updateInfo.releaseNotesList.map((note: string, index: number) => (\n                          <li key={index}>{note}</li>\n                        ))}\n                      </ul>\n                    ) : updateInfo.releaseNotes && (\n                      <p className=\"release-notes-text\">{updateInfo.releaseNotes}</p>\n                    )}\n                  </div>\n                )}\n\n                <div className=\"update-actions\">\n                  <Button\n                    variant=\"contained\"\n                    className=\"install-button\"\n                    onClick={() => updateSystem(false)}\n                    disabled={isUpdating}\n                    style={{ backgroundColor: \"#4caf50\", color: \"#fff\" }}\n                  >\n                    {isUpdating ? \"Update Started...\" : \"Install Update\"}\n                  </Button>\n                </div>\n\n                <p className=\"update-warning\">\n                  Updates can take up to 15 minutes or more depending on your Internet connection.\n                  Please wait until you see the Update Complete message on your Pixelcade.\n                </p>\n              </div>\n            ) : (\n              <div className=\"update-status up-to-date\">\n                <div className=\"checkmark\"></div>\n                <h2>You're Up to Date!</h2>\n                <p>Your Pixelcade is running the latest stable version.</p>\n              </div>\n            )}\n\n            {/* Beta section - show if beta is available or user is running beta */}\n            {(betaAvailable || updateInfo.isRunningBeta) && (\n              <div className={`beta-section ${updateInfo.isRunningBeta ? 'running-beta' : ''}`}>\n                <h3>\n                  {updateInfo.isRunningBeta\n                    ? (updateInfo.betaUpdateAvailable ? \"Beta Update Available\" : \"You're Running Beta\")\n                    : \"Beta Version Available\"}\n                </h3>\n                <div className=\"beta-version-info\">\n                  <span className=\"beta-label\">\n                    {updateInfo.isRunningBeta ? \"Current Beta:\" : \"Beta Firmware:\"}\n                  </span>\n                  <span className=\"beta-version\">\n                    {updateInfo.isRunningBeta\n                      ? updateInfo.currentFirmwareVersion\n                      : updateInfo.betaFirmwareVersion}\n                  </span>\n                  {updateInfo.isRunningBeta && updateInfo.betaUpdateAvailable && (\n                    <>\n                      <span className=\"version-arrow\" style={{ margin: '0 8px' }}></span>\n                      <span className=\"beta-version\">{updateInfo.betaFirmwareVersion}</span>\n                    </>\n                  )}\n                </div>\n\n                {/* Beta release notes */}\n                {updateInfo.betaReleaseNotes?.length > 0 && (\n                  <div className=\"beta-release-notes\">\n                    <h4>{updateInfo.isRunningBeta ? \"Beta Features\" : \"What's in Beta\"}</h4>\n                    <ul className=\"release-notes-list\">\n                      {updateInfo.betaReleaseNotes.map((note: string, index: number) => (\n                        <li key={index}>{note}</li>\n                      ))}\n                    </ul>\n                  </div>\n                )}\n\n                {!updateInfo.isRunningBeta && (\n                  <p className=\"beta-description\">\n                    Get access to pre-release versions with the latest features and improvements.\n                    Beta versions may contain bugs.\n                  </p>\n                )}\n\n                {(updateInfo.betaUpdateAvailable || !updateInfo.isRunningBeta) && (\n                  <Button\n                    variant=\"contained\"\n                    className=\"beta-button\"\n                    onClick={() => updateSystem(true)}\n                    disabled={isUpdating}\n                  >\n                    {isUpdating ? \"Update Started...\" : updateInfo.isRunningBeta ? \"Update Beta\" : \"Install Beta\"}\n                  </Button>\n                )}\n              </div>\n            )}\n\n            <div className=\"current-versions\">\n              <h3>Current Versions</h3>\n              <div className=\"version-info\">\n                <span className=\"version-label\">Firmware:</span>\n                <span className=\"version-value\">{updateInfo.currentFirmwareVersion}</span>\n              </div>\n              <div className=\"version-info\">\n                <span className=\"version-label\">Artwork:</span>\n                <span className=\"version-value\">v{updateInfo.currentArtworkVersion}</span>\n              </div>\n            </div>\n          </>\n        ) : (\n          <div className=\"update-status error\">\n            <p>Unable to check for updates. Please check your network connection.</p>\n          </div>\n        )}\n\n        <div className=\"update-actions\" style={{ marginTop: \"2rem\" }}>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleCheckForUpdates}\n            disabled={checkingUpdate}\n          >\n            {checkingUpdate ? \"Checking...\" : \"Check Again\"}\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UpdatePage;\n","import React, { useEffect, useState } from \"react\";\nimport { Button } from \"@material-ui/core\";\nimport toast from \"react-hot-toast\";\nimport { toggleDebugMode, readSettings } from \"../../services/settings\";\nimport \"./styles.css\";\n\nconst LogViewer: React.FC = () => {\n  const [logContent, setLogContent] = useState<string>(\"\");\n  const [autoScroll, setAutoScroll] = useState<boolean>(true);\n  const [debugMode, setDebugMode] = useState<boolean>(false);\n  const hostname = localStorage.getItem(\"hostname\") || window.location.hostname;\n\n  // Fetch current debug mode setting\n  useEffect(() => {\n    readSettings()\n      .then((data) => {\n        setDebugMode(data.debug || false);\n      })\n      .catch(() => {\n        // Settings not available, keep default\n      });\n  }, []);\n\n  const handleDebugToggle = () => {\n    const newValue = !debugMode;\n    toast.promise(\n      toggleDebugMode(newValue),\n      {\n        loading: \"Updating Debug Mode\",\n        success: () => {\n          setDebugMode(newValue);\n          return `Debug Mode ${newValue ? 'enabled' : 'disabled'}`;\n        },\n        error: \"Failed to update debug mode\",\n      },\n      { duration: 4000 }\n    );\n  };\n\n  useEffect(() => {\n    const fetchLogFile = async () => {\n      try {\n        const response = await fetch(`http://${hostname}:8080/v2/log`);\n        const text = await response.text();\n        setLogContent(text);\n      } catch (error) {\n        setLogContent(\"Error loading log file: \" + (error instanceof Error ? error.message : String(error)));\n      }\n    };\n\n    fetchLogFile();\n\n    // Auto-refresh every 5 seconds\n    const interval = setInterval(fetchLogFile, 5000);\n\n    return () => clearInterval(interval);\n  }, [hostname]);\n\n  useEffect(() => {\n    if (autoScroll) {\n      const logContainer = document.getElementById(\"log-content\");\n      if (logContainer) {\n        logContainer.scrollTop = logContainer.scrollHeight;\n      }\n    }\n  }, [logContent, autoScroll]);\n\n  const handleDownload = () => {\n    const blob = new Blob([logContent], { type: \"text/plain\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"pixelcadelcd.log\";\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(logContent);\n      toast.success(\"Log copied to clipboard\");\n    } catch {\n      // Fallback for older browsers\n      const textArea = document.createElement(\"textarea\");\n      textArea.value = logContent;\n      textArea.style.position = \"fixed\";\n      textArea.style.left = \"-999999px\";\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand(\"copy\");\n      document.body.removeChild(textArea);\n      toast.success(\"Log copied to clipboard\");\n    }\n  };\n\n  return (\n    <div className=\"log-viewer-container fade-in\">\n      <div className=\"log-header\">\n        <h2>Pixelcade LCD Log</h2>\n        <span className=\"log-subtitle\">Auto-updates every 5 seconds</span>\n      </div>\n\n      <div className=\"log-controls\">\n        <div className=\"log-checkboxes\">\n          <label className=\"auto-scroll-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={autoScroll}\n              onChange={(e) => setAutoScroll(e.target.checked)}\n            />\n            Auto-scroll to bottom\n          </label>\n          <label className=\"auto-scroll-toggle\">\n            <input\n              type=\"checkbox\"\n              checked={debugMode}\n              onChange={handleDebugToggle}\n            />\n            Debug logging\n          </label>\n        </div>\n        <div className=\"log-buttons\">\n          <Button\n            variant=\"contained\"\n            onClick={handleCopy}\n            disabled={!logContent}\n            size=\"small\"\n            style={{ marginRight: 8, backgroundColor: \"#444\", color: \"#fff\" }}\n          >\n            Copy Log\n          </Button>\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            onClick={handleDownload}\n            disabled={!logContent}\n            size=\"small\"\n          >\n            Download Log\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"log-content-wrapper\">\n        <pre id=\"log-content\" className=\"log-content\">\n          {logContent || \"Loading log...\"}\n        </pre>\n      </div>\n    </div>\n  );\n};\n\nexport default LogViewer;\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport toast from \"react-hot-toast\";\nimport { Button, FormControlLabel, Checkbox, Radio, RadioGroup, TextField, Select, MenuItem, FormControl, Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions, CircularProgress } from \"@material-ui/core\";\nimport { CloudUpload, Add, Refresh, Delete } from \"@material-ui/icons\";\nimport { refreshCache } from \"../../services\";\nimport \"./styles.css\";\n\ninterface StorageStatus {\n    usbMounted: boolean;\n    internalAvailable: boolean;\n    usbPath: string;\n    internalPath: string;\n    usbFreeBytes: number;\n    usbTotalBytes: number;\n    internalFreeBytes: number;\n    internalTotalBytes: number;\n    screenWidth: number;\n    screenHeight: number;\n}\n\ninterface ConsoleInfo {\n    id: string;\n    name: string;\n    manufacturer: string;\n}\n\n// Helper to format bytes to human readable\nconst formatBytes = (bytes: number): string => {\n    if (bytes === 0) return \"0 B\";\n    const k = 1024;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n};\n\nconst UploadArtwork: React.FC = () => {\n    const location = useLocation();\n    const [storageStatus, setStorageStatus] = useState<StorageStatus | null>(null);\n    const [consoles, setConsoles] = useState<ConsoleInfo[]>([]);\n    const [customSystems, setCustomSystems] = useState<string[]>([]);\n    const [selectedStorage, setSelectedStorage] = useState<string>(\"auto\");\n    const [selectedSystem, setSelectedSystem] = useState<string>(\"\");\n    const [newSystemName, setNewSystemName] = useState<string>(\"\");\n    const [showNewSystemInput, setShowNewSystemInput] = useState<boolean>(false);\n    const [uploading, setUploading] = useState<boolean>(false);\n    const [dragActive, setDragActive] = useState<boolean>(false);\n    const [uploadResults, setUploadResults] = useState<{name: string, status: string, error?: string, info?: string}[]>([]);\n    const [stretchToFill, setStretchToFill] = useState<boolean>(true);\n    const [refreshingCache, setRefreshingCache] = useState<boolean>(false);\n\n    // Delete custom system state\n    const [deleteDialogOpen, setDeleteDialogOpen] = useState<boolean>(false);\n    const [systemToDelete, setSystemToDelete] = useState<string>(\"\");\n    const [deletePreview, setDeletePreview] = useState<{ jpgCount: number; mp4Count: number; totalFiles: number } | null>(null);\n    const [loadingDeletePreview, setLoadingDeletePreview] = useState<boolean>(false);\n    const [deleting, setDeleting] = useState<boolean>(false);\n\n    const hostname = window.location.hostname;\n\n    // Read system from URL query parameter (e.g., ?system=mame)\n    useEffect(() => {\n        const params = new URLSearchParams(location.search);\n        const systemParam = params.get(\"system\");\n        if (systemParam) {\n            setSelectedSystem(systemParam);\n        }\n    }, [location.search]);\n\n    // Fetch storage status\n    const fetchStorageStatus = async () => {\n        try {\n            const response = await fetch(`http://${hostname}:8080/v2/storage/status`);\n            if (response.ok) {\n                const data = await response.json();\n                setStorageStatus(data);\n                // Set default storage based on availability\n                if (data.usbMounted) {\n                    setSelectedStorage(\"usb\");\n                } else if (data.internalAvailable) {\n                    setSelectedStorage(\"internal\");\n                }\n            }\n        } catch (error) {\n            console.error(\"Error fetching storage status:\", error);\n        }\n    };\n\n    // Fetch console list\n    const fetchConsoles = async () => {\n        try {\n            const response = await fetch(`http://${hostname}:8080/v2/metadata/consoles`);\n            if (response.ok) {\n                const data = await response.json();\n                setConsoles(data.consoles || []);\n                setCustomSystems(data.customSystems || []);\n            }\n        } catch (error) {\n            console.error(\"Error fetching consoles:\", error);\n        }\n    };\n\n    useEffect(() => {\n        fetchStorageStatus();\n        fetchConsoles();\n    }, []);\n\n    // Parse filename to extract system, game name, and extension\n    const parseFilename = (filename: string): { system: string; gameName: string; extension: string; error?: string } => {\n        const lower = filename.toLowerCase();\n\n        // Check extension\n        if (!lower.endsWith('.jpg') && !lower.endsWith('.jpeg') && !lower.endsWith('.png') && !lower.endsWith('.mp4')) {\n            return { system: \"\", gameName: \"\", extension: \"\", error: \"File must be .jpg, .png, or .mp4\" };\n        }\n\n        const extension = lower.endsWith('.mp4') ? 'mp4' : 'jpg'; // PNG will be converted to jpg on server\n        const baseName = filename.replace(/\\.(jpg|jpeg|png|mp4)$/i, '');\n\n        // Check for system-name format\n        const dashIndex = baseName.indexOf('-');\n        if (dashIndex === -1) {\n            // No system prefix - return just the game name\n            return { system: \"\", gameName: baseName, extension };\n        }\n\n        const system = baseName.substring(0, dashIndex).toLowerCase();\n        const gameName = baseName.substring(dashIndex + 1);\n\n        return { system, gameName, extension };\n    };\n\n    // Build the target filename with correct system prefix\n    const buildTargetFilename = (parsed: { system: string; gameName: string; extension: string }, targetSystem: string): string => {\n        const system = targetSystem.toLowerCase();\n        const ext = parsed.extension === 'mp4' ? '.mp4' : '.jpg';\n        // Replace hyphens in game name with underscores to avoid ambiguity with system-gamename format\n        const safeName = parsed.gameName.replace(/-/g, '_');\n        return `${system}-${safeName}${ext}`;\n    };\n\n    // Check if a system exists in consoles or custom systems\n    const isValidSystem = (system: string): boolean => {\n        const sysLower = system.toLowerCase();\n        // Check built-in consoles\n        if (consoles.some(c => c.id.toLowerCase() === sysLower)) {\n            return true;\n        }\n        // Check custom systems\n        if (customSystems.some(cs => cs.toLowerCase() === sysLower)) {\n            return true;\n        }\n        return false;\n    };\n\n    // Handle file upload\n    const uploadFiles = async (files: FileList | File[]) => {\n        if (!selectedStorage || selectedStorage === \"auto\") {\n            if (storageStatus?.usbMounted) {\n                setSelectedStorage(\"usb\");\n            } else {\n                setSelectedStorage(\"internal\");\n            }\n        }\n\n        const storage = selectedStorage === \"auto\"\n            ? (storageStatus?.usbMounted ? \"usb\" : \"internal\")\n            : selectedStorage;\n\n        setUploading(true);\n        const results: {name: string, status: string, error?: string, info?: string}[] = [];\n\n        for (const file of Array.from(files)) {\n            const parsed = parseFilename(file.name);\n\n            // Check for extension errors\n            if (parsed.error) {\n                results.push({ name: file.name, status: \"error\", error: parsed.error });\n                continue;\n            }\n\n            // Must have a game name\n            if (!parsed.gameName) {\n                results.push({ name: file.name, status: \"error\", error: \"Could not determine game name from filename\" });\n                continue;\n            }\n\n            // Determine the target system\n            let targetSystem = \"\";\n            let renamed = false;\n\n            if (selectedSystem) {\n                // User selected a system - use it and rename file if needed\n                targetSystem = selectedSystem.toLowerCase();\n                if (parsed.system !== targetSystem) {\n                    renamed = true;\n                }\n            } else if (parsed.system) {\n                // File has a system prefix - validate it exists\n                if (!isValidSystem(parsed.system)) {\n                    results.push({\n                        name: file.name,\n                        status: \"error\",\n                        error: `Unknown system \"${parsed.system}\". Select a system from the dropdown or add it as a custom system.`\n                    });\n                    continue;\n                }\n                targetSystem = parsed.system;\n            } else {\n                // No system selected and no system in filename\n                results.push({\n                    name: file.name,\n                    status: \"error\",\n                    error: \"No system specified. Select a system from the dropdown or name file as system-gamename.jpg\"\n                });\n                continue;\n            }\n\n            // Build the target filename (only if we're renaming)\n            // If not renaming, use original filename to preserve user's naming\n            const targetFilename = renamed ? buildTargetFilename(parsed, targetSystem) : file.name.replace(/\\.(png)$/i, '.jpg');\n\n            // Create a new File object with the correct name if renamed or PNG converted\n            const needsNewFile = renamed || file.name.toLowerCase().endsWith('.png');\n            const uploadFile = needsNewFile ? new File([file], targetFilename, { type: file.type }) : file;\n\n            const formData = new FormData();\n            formData.append(\"file\", uploadFile);\n            formData.append(\"storage\", storage);\n            formData.append(\"system\", targetSystem);\n            formData.append(\"type\", parsed.extension);\n            formData.append(\"resizeMode\", stretchToFill ? \"stretch\" : \"fit\");\n\n            try {\n                const response = await fetch(`http://${hostname}:8080/v2/artwork/upload`, {\n                    method: \"POST\",\n                    body: formData,\n                });\n\n                if (response.ok) {\n                    const data = await response.json();\n                    const infoMessages: string[] = [];\n                    if (needsNewFile && targetFilename !== file.name) {\n                        infoMessages.push(`Saved as ${targetFilename}`);\n                    }\n                    if (data.resized) {\n                        infoMessages.push(\"Resized to fit display\");\n                    }\n                    results.push({\n                        name: file.name,\n                        status: \"success\",\n                        info: infoMessages.length > 0 ? infoMessages.join(\", \") : undefined\n                    });\n                } else {\n                    const errorText = await response.text();\n                    results.push({ name: file.name, status: \"error\", error: errorText });\n                }\n            } catch (error) {\n                results.push({ name: file.name, status: \"error\", error: String(error) });\n            }\n        }\n\n        setUploadResults(results);\n        setUploading(false);\n\n        const successCount = results.filter(r => r.status === \"success\").length;\n        const errorCount = results.filter(r => r.status === \"error\").length;\n\n        if (successCount > 0 && errorCount === 0) {\n            toast.success(`Successfully uploaded ${successCount} file(s)`);\n        } else if (successCount > 0 && errorCount > 0) {\n            toast(`Uploaded ${successCount} file(s), ${errorCount} failed`, { icon: \"\" });\n        } else if (errorCount > 0) {\n            toast.error(`Failed to upload ${errorCount} file(s)`);\n        }\n\n        // Refresh cache after successful uploads so new files show up immediately\n        if (successCount > 0) {\n            try {\n                await refreshCache();\n                console.log(\"Cache refreshed after upload\");\n            } catch (err) {\n                console.error(\"Failed to refresh cache:\", err);\n            }\n        }\n    };\n\n    // Manual cache refresh\n    const handleRefreshCache = async () => {\n        setRefreshingCache(true);\n        try {\n            const result = await refreshCache();\n            toast.success(`Cache refreshed: ${result.jpg_count} JPG, ${result.mp4_count} MP4 files`);\n        } catch (err) {\n            toast.error(\"Failed to refresh cache\");\n        }\n        setRefreshingCache(false);\n    };\n\n    // Handle adding new custom system\n    const handleAddCustomSystem = async () => {\n        const systemName = newSystemName.trim().toLowerCase();\n\n        if (!systemName) {\n            toast.error(\"Please enter a system name\");\n            return;\n        }\n\n        // Validate format\n        if (!/^[a-z0-9_-]+$/.test(systemName)) {\n            toast.error(\"System name can only contain lowercase letters, numbers, hyphens, and underscores\");\n            return;\n        }\n\n        // Check if already exists\n        const existingConsole = consoles.find(c => c.id.toLowerCase() === systemName);\n        if (existingConsole) {\n            toast.error(`System \"${systemName}\" already exists as \"${existingConsole.name}\"`);\n            return;\n        }\n\n        if (customSystems.includes(systemName)) {\n            toast.error(`Custom system \"${systemName}\" already exists`);\n            return;\n        }\n\n        try {\n            const response = await fetch(`http://${hostname}:8080/v2/metadata/custom-systems`, {\n                method: \"POST\",\n                headers: { \"Content-Type\": \"application/json\" },\n                body: JSON.stringify({ system: systemName }),\n            });\n\n            if (response.ok) {\n                toast.success(`Custom system \"${systemName}\" added`);\n                setCustomSystems([...customSystems, systemName]);\n                setSelectedSystem(systemName);\n                setNewSystemName(\"\");\n                setShowNewSystemInput(false);\n            } else {\n                const error = await response.text();\n                toast.error(error);\n            }\n        } catch (error) {\n            toast.error(\"Failed to add custom system\");\n        }\n    };\n\n    // Handle opening delete confirmation dialog\n    const handleDeleteCustomSystemClick = async (system: string) => {\n        setSystemToDelete(system);\n        setDeletePreview(null);\n        setLoadingDeletePreview(true);\n        setDeleteDialogOpen(true);\n\n        try {\n            const response = await fetch(`http://${hostname}:8080/v2/metadata/custom-systems?system=${encodeURIComponent(system)}`);\n            if (response.ok) {\n                const data = await response.json();\n                setDeletePreview({\n                    jpgCount: data.jpgCount || 0,\n                    mp4Count: data.mp4Count || 0,\n                    totalFiles: data.totalFiles || 0,\n                });\n            } else {\n                toast.error(\"Failed to get file count\");\n                setDeleteDialogOpen(false);\n            }\n        } catch (error) {\n            toast.error(\"Failed to preview deletion\");\n            setDeleteDialogOpen(false);\n        } finally {\n            setLoadingDeletePreview(false);\n        }\n    };\n\n    // Handle confirming deletion\n    const handleConfirmDelete = async () => {\n        setDeleting(true);\n        try {\n            const response = await fetch(`http://${hostname}:8080/v2/metadata/custom-systems?system=${encodeURIComponent(systemToDelete)}`, {\n                method: \"DELETE\",\n            });\n\n            if (response.ok) {\n                const data = await response.json();\n                const totalDeleted = (data.deletedJpg || 0) + (data.deletedMp4 || 0);\n                toast.success(`Deleted \"${systemToDelete}\" and ${totalDeleted} file(s)`);\n                setCustomSystems(customSystems.filter(s => s !== systemToDelete));\n                if (selectedSystem === systemToDelete) {\n                    setSelectedSystem(\"\");\n                }\n            } else {\n                const error = await response.text();\n                toast.error(error);\n            }\n        } catch (error) {\n            toast.error(\"Failed to delete custom system\");\n        } finally {\n            setDeleting(false);\n            setDeleteDialogOpen(false);\n            setSystemToDelete(\"\");\n            setDeletePreview(null);\n        }\n    };\n\n    // Handle canceling deletion\n    const handleCancelDelete = () => {\n        setDeleteDialogOpen(false);\n        setSystemToDelete(\"\");\n        setDeletePreview(null);\n    };\n\n    // Drag and drop handlers\n    const handleDrag = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        if (e.type === \"dragenter\" || e.type === \"dragover\") {\n            setDragActive(true);\n        } else if (e.type === \"dragleave\") {\n            setDragActive(false);\n        }\n    }, []);\n\n    const handleDrop = useCallback((e: React.DragEvent) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setDragActive(false);\n\n        if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\n            uploadFiles(e.dataTransfer.files);\n        }\n    }, [selectedStorage, selectedSystem, storageStatus, consoles, customSystems]);\n\n    const handleFileInput = (e: React.ChangeEvent<HTMLInputElement>) => {\n        if (e.target.files && e.target.files.length > 0) {\n            uploadFiles(e.target.files);\n        }\n    };\n\n    const getStorageLabel = () => {\n        if (!storageStatus) return \"Loading...\";\n        if (storageStatus.usbMounted) {\n            return \"USB drive detected - files will upload to USB by default\";\n        }\n        return \"No USB drive - files will upload to Internal storage\";\n    };\n\n    return (\n        <div className=\"upload-artwork-container fade-in\">\n            <div className=\"upload-header\">\n                <h2>Upload Custom Artwork</h2>\n            </div>\n\n            <div className=\"upload-storage-status\">\n                <span className={`storage-indicator ${storageStatus?.usbMounted ? 'usb-active' : 'internal-active'}`}>\n                    {getStorageLabel()}\n                </span>\n            </div>\n\n            <div className=\"upload-options\">\n                <div className=\"option-group\">\n                    <h3>Storage Destination</h3>\n                    <RadioGroup\n                        value={selectedStorage}\n                        onChange={(e) => setSelectedStorage(e.target.value)}\n                        row\n                    >\n                        {storageStatus?.usbMounted && (\n                            <FormControlLabel\n                                value=\"usb\"\n                                control={<Radio color=\"primary\" />}\n                                label={`USB Drive (${formatBytes(storageStatus.usbFreeBytes)} free)`}\n                            />\n                        )}\n                        {storageStatus?.internalAvailable && (\n                            <FormControlLabel\n                                value=\"internal\"\n                                control={<Radio color=\"primary\" />}\n                                label={`Internal Storage (${formatBytes(storageStatus.internalFreeBytes)} free)`}\n                            />\n                        )}\n                    </RadioGroup>\n                </div>\n\n                <div className=\"option-group\">\n                    <h3>System/Console</h3>\n                    <p className=\"option-hint\">\n                        Select a system to automatically prefix uploaded files with that system (e.g., \"pacman.jpg\" becomes \"mame-pacman.jpg\").\n                        Files that already have the correct prefix won't be renamed.\n                        Leave as \"Select System/Console\" to use the system from each filename.\n                    </p>\n\n                    <FormControl variant=\"outlined\" className=\"system-select\">\n                        <Select\n                            value={selectedSystem}\n                            onChange={(e) => setSelectedSystem(e.target.value as string)}\n                            displayEmpty\n                        >\n                            <MenuItem value=\"\">\n                                <em>Select System/Console</em>\n                            </MenuItem>\n                            {customSystems.length > 0 && (\n                                <MenuItem disabled className=\"menu-divider\">\n                                     Custom Systems \n                                </MenuItem>\n                            )}\n                            {customSystems.map((sys) => (\n                                <MenuItem key={sys} value={sys}>\n                                    <strong>{sys}</strong>&nbsp;(custom)\n                                </MenuItem>\n                            ))}\n                            {consoles.length > 0 && (\n                                <MenuItem disabled className=\"menu-divider\">\n                                     Built-in Systems \n                                </MenuItem>\n                            )}\n                            {consoles.map((console) => (\n                                <MenuItem key={console.id} value={console.id}>\n                                    <strong>{console.id}</strong>&nbsp; {console.name}\n                                </MenuItem>\n                            ))}\n                        </Select>\n                    </FormControl>\n\n                    <div className=\"add-system-section\">\n                        {!showNewSystemInput ? (\n                            <Button\n                                variant=\"contained\"\n                                size=\"small\"\n                                startIcon={<Add />}\n                                onClick={() => setShowNewSystemInput(true)}\n                                style={{ backgroundColor: '#3b82f6', color: '#fff' }}\n                            >\n                                Add Custom System\n                            </Button>\n                        ) : (\n                            <div className=\"new-system-input\">\n                                <TextField\n                                    size=\"small\"\n                                    variant=\"outlined\"\n                                    placeholder=\"e.g., myarcade\"\n                                    value={newSystemName}\n                                    onChange={(e) => setNewSystemName(e.target.value.toLowerCase().replace(/[^a-z0-9_-]/g, ''))}\n                                    onKeyPress={(e) => e.key === 'Enter' && handleAddCustomSystem()}\n                                />\n                                <Button\n                                    variant=\"contained\"\n                                    color=\"primary\"\n                                    size=\"small\"\n                                    onClick={handleAddCustomSystem}\n                                >\n                                    Add\n                                </Button>\n                                <Button\n                                    variant=\"outlined\"\n                                    size=\"small\"\n                                    onClick={() => {\n                                        setShowNewSystemInput(false);\n                                        setNewSystemName(\"\");\n                                    }}\n                                    style={{ color: '#fff', borderColor: 'rgba(255,255,255,0.5)' }}\n                                >\n                                    Cancel\n                                </Button>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Custom systems list with delete buttons */}\n                    {customSystems.length > 0 && (\n                        <div className=\"custom-systems-list\" style={{ marginTop: \"16px\" }}>\n                            <p style={{ fontSize: \"12px\", color: \"#888\", marginBottom: \"8px\" }}>\n                                Your custom systems (click to delete):\n                            </p>\n                            <div style={{ display: \"flex\", flexWrap: \"wrap\", gap: \"8px\" }}>\n                                {customSystems.map((sys) => (\n                                    <div\n                                        key={sys}\n                                        style={{\n                                            display: \"flex\",\n                                            alignItems: \"center\",\n                                            backgroundColor: \"rgba(59, 130, 246, 0.2)\",\n                                            border: \"1px solid rgba(59, 130, 246, 0.4)\",\n                                            borderRadius: \"4px\",\n                                            padding: \"4px 8px\",\n                                        }}\n                                    >\n                                        <span style={{ marginRight: \"8px\", fontWeight: 500 }}>{sys}</span>\n                                        <button\n                                            onClick={() => handleDeleteCustomSystemClick(sys)}\n                                            style={{\n                                                background: \"transparent\",\n                                                border: \"none\",\n                                                color: \"#ef4444\",\n                                                cursor: \"pointer\",\n                                                padding: \"2px\",\n                                                display: \"flex\",\n                                                alignItems: \"center\",\n                                            }}\n                                            title={`Delete ${sys} and all its marquees`}\n                                        >\n                                            <Delete fontSize=\"small\" />\n                                        </button>\n                                    </div>\n                                ))}\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                <div className=\"option-group\">\n                    <h3>Image Resize</h3>\n                    <p className=\"option-hint\">\n                        Target resolution: <code>{storageStatus ? `${storageStatus.screenWidth}x${storageStatus.screenHeight}` : \"1920x360\"}</code>.\n                        Images already at this resolution will not be resized.\n                    </p>\n                    <FormControlLabel\n                        control={\n                            <Checkbox\n                                checked={stretchToFill}\n                                onChange={(e) => setStretchToFill(e.target.checked)}\n                                color=\"primary\"\n                            />\n                        }\n                        label=\"Stretch to fill (may distort image if aspect ratio doesn't match)\"\n                    />\n                    <p className=\"option-hint\" style={{ marginTop: \"4px\" }}>\n                        When unchecked, images will be centered with black bars to preserve aspect ratio.\n                    </p>\n                </div>\n            </div>\n\n            <div\n                className={`upload-dropzone ${dragActive ? 'drag-active' : ''} ${uploading ? 'uploading' : ''}`}\n                onDragEnter={handleDrag}\n                onDragLeave={handleDrag}\n                onDragOver={handleDrag}\n                onDrop={handleDrop}\n            >\n                <CloudUpload className=\"upload-icon\" />\n                <p className=\"dropzone-text\">\n                    {uploading ? 'Uploading...' : 'Drag & drop files here, or click to browse'}\n                </p>\n                <p className=\"dropzone-hint\">\n                    Accepts .jpg, .png, and .mp4 files\n                </p>\n                <input\n                    type=\"file\"\n                    multiple\n                    accept=\".jpg,.jpeg,.png,.mp4\"\n                    onChange={handleFileInput}\n                    className=\"file-input\"\n                    disabled={uploading}\n                />\n            </div>\n\n            {uploadResults.length > 0 && (\n                <div className=\"upload-results\">\n                    <h3>Upload Results</h3>\n                    <div className=\"results-list\">\n                        {uploadResults.map((result, index) => (\n                            <div key={index} className={`result-item ${result.status}`}>\n                                <span className=\"result-icon\">\n                                    {result.status === 'success' ? '' : ''}\n                                </span>\n                                <span className=\"result-name\">{result.name}</span>\n                                {result.error && (\n                                    <span className=\"result-error\">{result.error}</span>\n                                )}\n                                {result.info && (\n                                    <span className=\"result-info\">{result.info}</span>\n                                )}\n                            </div>\n                        ))}\n                    </div>\n                    <Button\n                        variant=\"outlined\"\n                        size=\"small\"\n                        onClick={() => setUploadResults([])}\n                        style={{ color: '#fff', borderColor: 'rgba(255,255,255,0.5)' }}\n                    >\n                        Clear Results\n                    </Button>\n                </div>\n            )}\n\n            {/* Cache refresh section */}\n            <div className=\"cache-refresh-section\" style={{ marginTop: \"2rem\", padding: \"16px\", backgroundColor: \"rgba(59, 130, 246, 0.1)\", borderRadius: \"8px\", border: \"1px solid rgba(59, 130, 246, 0.3)\" }}>\n                <div style={{ display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\", flexWrap: \"wrap\", gap: \"12px\" }}>\n                    <div>\n                        <p style={{ margin: 0, fontWeight: \"bold\" }}>Lookup Cache</p>\n                        <p style={{ margin: \"4px 0 0 0\", fontSize: \"0.9em\", color: \"#aaa\" }}>\n                            Cache is refreshed automatically after uploads. If you copy files via SFTP or network share, click refresh manually.\n                        </p>\n                    </div>\n                    <Button\n                        variant=\"contained\"\n                        startIcon={<Refresh />}\n                        onClick={handleRefreshCache}\n                        disabled={refreshingCache}\n                        style={{ backgroundColor: '#3b82f6', color: '#fff' }}\n                    >\n                        {refreshingCache ? \"Refreshing...\" : \"Refresh Cache\"}\n                    </Button>\n                </div>\n            </div>\n\n            <div className=\"upload-instructions\" style={{ marginTop: \"2rem\" }}>\n                <p><strong>Tips & Guidelines</strong></p>\n                <ul>\n                    <li>\n                        <strong>Naming:</strong> Files should be named <code>system-gamename.jpg</code>, <code>.png</code>, or <code>.mp4</code>.\n                        If you select a system above, files will be <strong>automatically renamed</strong> with the correct prefix\n                        (unless they already have the correct prefix).\n                    </li>\n                    <li>Example: <code>mame-pacman.jpg</code>, <code>mame-galaga.png</code>, <code>nes-mario.mp4</code></li>\n                    <li>\n                        <strong>PNG files:</strong> Will be automatically converted to JPEG for optimal display.\n                    </li>\n                    <li>\n                        <strong>Resolution:</strong> Target resolution is{\" \"}\n                        <code>{storageStatus ? `${storageStatus.screenWidth}x${storageStatus.screenHeight}` : \"1920x360\"}</code> pixels.\n                        Images will be <strong>automatically resized</strong> if they don't match.\n                    </li>\n                    <li>\n                        <strong>Video recommendations:</strong> ~7 seconds recommended (no hard limit).\n                        Bitrate should not exceed <strong>6 Mbps</strong> to avoid choppy playback.\n                    </li>\n                    <li>You can upload to an existing console/system or create your own custom system</li>\n                    <li>After uploading, find your artwork in <strong>Browse Marquees</strong> under the system you uploaded to</li>\n                </ul>\n                {storageStatus && !storageStatus.usbMounted && (\n                    <div style={{ marginTop: \"12px\", padding: \"10px\", backgroundColor: \"rgba(59, 130, 246, 0.1)\", borderRadius: \"4px\", border: \"1px solid rgba(59, 130, 246, 0.3)\" }}>\n                        <p style={{ margin: 0 }}>\n                            <strong>Want to use USB storage?</strong> Plug in a USB drive and go to{\" \"}\n                            <a href=\"/files/#/settings\" style={{ color: \"#60a5fa\" }}>Settings</a> to format it for Pixelcade.\n                        </p>\n                    </div>\n                )}\n            </div>\n\n            {/* Delete confirmation dialog */}\n            <Dialog\n                open={deleteDialogOpen}\n                onClose={handleCancelDelete}\n                PaperProps={{\n                    style: {\n                        backgroundColor: '#1e1e2e',\n                        color: '#fff',\n                    }\n                }}\n            >\n                <DialogTitle style={{ color: '#ef4444' }}>\n                    Delete Custom System \"{systemToDelete}\"?\n                </DialogTitle>\n                <DialogContent>\n                    {loadingDeletePreview ? (\n                        <div style={{ display: 'flex', alignItems: 'center', gap: '12px', padding: '20px 0' }}>\n                            <CircularProgress size={24} style={{ color: '#fff' }} />\n                            <span>Checking files...</span>\n                        </div>\n                    ) : deletePreview ? (\n                        <DialogContentText style={{ color: '#ccc' }}>\n                            {deletePreview.totalFiles > 0 ? (\n                                <>\n                                    This will permanently delete:\n                                    <ul style={{ margin: '12px 0', paddingLeft: '20px' }}>\n                                        <li>The custom system \"{systemToDelete}\"</li>\n                                        {deletePreview.jpgCount > 0 && (\n                                            <li><strong>{deletePreview.jpgCount}</strong> JPG/PNG image file(s)</li>\n                                        )}\n                                        {deletePreview.mp4Count > 0 && (\n                                            <li><strong>{deletePreview.mp4Count}</strong> MP4 video file(s)</li>\n                                        )}\n                                    </ul>\n                                    <strong style={{ color: '#ef4444' }}>This action cannot be undone!</strong>\n                                </>\n                            ) : (\n                                <>\n                                    This will delete the custom system \"{systemToDelete}\".\n                                    <br /><br />\n                                    No marquee files were found for this system.\n                                </>\n                            )}\n                        </DialogContentText>\n                    ) : null}\n                </DialogContent>\n                <DialogActions style={{ padding: '16px' }}>\n                    <Button\n                        onClick={handleCancelDelete}\n                        style={{ color: '#888' }}\n                        disabled={deleting}\n                    >\n                        Cancel\n                    </Button>\n                    <Button\n                        onClick={handleConfirmDelete}\n                        variant=\"contained\"\n                        disabled={loadingDeletePreview || deleting}\n                        style={{\n                            backgroundColor: '#ef4444',\n                            color: '#fff',\n                        }}\n                    >\n                        {deleting ? (\n                            <>\n                                <CircularProgress size={16} style={{ color: '#fff', marginRight: 8 }} />\n                                Deleting...\n                            </>\n                        ) : (\n                            'Delete'\n                        )}\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default UploadArtwork;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n    Button,\n    CircularProgress,\n} from \"@material-ui/core\";\nimport {\n    PlayArrow,\n    Stop,\n    Favorite,\n    Close,\n    Videocam,\n} from \"@material-ui/icons\";\nimport { Select, CaretIcon, ModalCloseButton } from \"react-responsive-select\";\nimport { Switch, FormControlLabel } from \"@material-ui/core\";\nimport toast from \"react-hot-toast\";\nimport {\n    getDeviceUrl,\n    getSlideshowFavorites,\n    removeSlideshowFavorite,\n    getSlideshowStatus,\n    startSlideshow,\n    stopSlideshow,\n    updateMarquee,\n} from \"../../services\";\nimport { readSettings, updateSetting } from \"../../services/settings\";\nimport { dispatchTickerStarted, onTickerStarted } from \"../../services/tickerEvents\";\nimport \"./styles.css\";\n\ntype FavoriteItem = {\n    key: string;      // system-game format\n    system: string;\n    game: string;\n    hasVideo?: boolean;\n};\n\n// Interval options\nconst intervalOptions = [\n    { text: \"1 second\", value: \"1\" },\n    { text: \"3 seconds\", value: \"3\" },\n    { text: \"5 seconds\", value: \"5\" },\n    { text: \"10 seconds\", value: \"10\" },\n    { text: \"20 seconds\", value: \"20\" },\n    { text: \"30 seconds\", value: \"30\" },\n    { text: \"1 minute\", value: \"60\" },\n    { text: \"5 minutes\", value: \"300\" },\n];\n\nconst Favorites: React.FC = () => {\n    const nav = useNavigate();\n    const [favorites, setFavorites] = useState<FavoriteItem[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [isSlideshowRunning, setIsSlideshowRunning] = useState(false);\n    const [isStarting, setIsStarting] = useState(false);\n    const [currentMarquee, setCurrentMarquee] = useState<string>(\"\");\n    const [settingsLoaded, setSettingsLoaded] = useState(false);\n    const [slideshowSettings, setSlideshowSettings] = useState({\n        interval: 3,\n        includeVideos: false,\n    });\n\n    // Parse a favorite key into system and game\n    const parseFavoriteKey = (key: string): FavoriteItem => {\n        const firstDash = key.indexOf('-');\n        if (firstDash === -1) {\n            return { key, system: key, game: key };\n        }\n        return {\n            key,\n            system: key.substring(0, firstDash),\n            game: key.substring(firstDash + 1),\n        };\n    };\n\n    // Load favorites and slideshow status\n    const loadData = useCallback(async () => {\n        try {\n            const [favs, status, settings, videoListResponse] = await Promise.all([\n                getSlideshowFavorites(),\n                getSlideshowStatus(),\n                readSettings(),\n                fetch(`${getDeviceUrl(\"\")}/list/video`).then(r => r.json()).catch(() => ({ files: [] })),\n            ]);\n\n            // Build a set of video basenames (lowercase, without extension)\n            const videoSet = new Set<string>();\n            if (videoListResponse.files) {\n                videoListResponse.files.forEach((filename: string) => {\n                    // Remove .mp4 extension and lowercase\n                    const basename = filename.replace(/\\.mp4$/i, \"\").toLowerCase();\n                    videoSet.add(basename);\n                });\n            }\n\n            // Parse favorites and check for video availability\n            const parsedFavorites = favs.map((key: string) => {\n                const item = parseFavoriteKey(key);\n                // Check if video exists: try system-game first, then just game\n                item.hasVideo = videoSet.has(item.key.toLowerCase()) || videoSet.has(item.game.toLowerCase());\n                return item;\n            });\n\n            setFavorites(parsedFavorites);\n            setIsSlideshowRunning(status.running || false);\n            setCurrentMarquee(status.currentMarquee || \"\");\n\n            if (settings) {\n                setSlideshowSettings({\n                    interval: settings.slideshowInterval || 3,\n                    // Handle both boolean (from API) and string (legacy) values\n                    includeVideos: settings.slideshowIncludeVideos === true || settings.slideshowIncludeVideos === \"yes\",\n                });\n                setSettingsLoaded(true);\n            }\n        } catch (err) {\n            console.error(\"Failed to load favorites:\", err);\n        } finally {\n            setLoading(false);\n        }\n    }, []);\n\n    // Handle interval change\n    const handleIntervalChange = (changes: any) => {\n        const newInterval = parseInt(changes.value, 10);\n        setSlideshowSettings(prev => ({ ...prev, interval: newInterval }));\n        updateSetting(\"slideshowInterval\", String(newInterval)).catch(() => {\n            toast.error(\"Failed to save interval setting\");\n        });\n    };\n\n    // Handle include videos toggle\n    const handleIncludeVideosChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const newValue = event.target.checked;\n        setSlideshowSettings(prev => ({ ...prev, includeVideos: newValue }));\n        updateSetting(\"slideshowIncludeVideos\", newValue ? \"yes\" : \"no\").catch(() => {\n            toast.error(\"Failed to save video setting\");\n        });\n    };\n\n    useEffect(() => {\n        loadData();\n\n        // Listen for other tickers starting\n        const unsubscribe = onTickerStarted((tickerType) => {\n            if (tickerType !== 'slideshow') {\n                setIsSlideshowRunning(false);\n            }\n        });\n\n        // Poll status while slideshow is running\n        const interval = setInterval(async () => {\n            try {\n                const status = await getSlideshowStatus();\n                setIsSlideshowRunning(status.running || false);\n                setCurrentMarquee(status.currentMarquee || \"\");\n            } catch {\n                // Ignore polling errors\n            }\n        }, 2000);\n\n        return () => {\n            unsubscribe();\n            clearInterval(interval);\n        };\n    }, [loadData]);\n\n    // Remove a favorite\n    const handleRemoveFavorite = async (favorite: FavoriteItem) => {\n        try {\n            await removeSlideshowFavorite(favorite.key);\n            setFavorites(prev => prev.filter(f => f.key !== favorite.key));\n            toast.success(\"Removed from favorites\");\n        } catch {\n            toast.error(\"Failed to remove favorite\");\n        }\n    };\n\n    // Start slideshow\n    const handleStartSlideshow = async () => {\n        if (favorites.length === 0) {\n            toast.error(\"No favorites to display\");\n            return;\n        }\n\n        setIsStarting(true);\n        try {\n            const result = await startSlideshow(\n                slideshowSettings.interval,\n                slideshowSettings.includeVideos ? \"yes\" : \"no\"\n            );\n\n            if (result.status === \"error\") {\n                toast.error(result.message || \"Failed to start slideshow\");\n                setIsStarting(false);\n                return;\n            }\n\n            setIsSlideshowRunning(true);\n            dispatchTickerStarted('slideshow');\n            toast.success(\"Slideshow Started!\");\n        } catch {\n            toast.error(\"Failed to start slideshow\");\n        } finally {\n            setIsStarting(false);\n        }\n    };\n\n    // Stop slideshow\n    const handleStopSlideshow = () => {\n        toast.promise(stopSlideshow(), {\n            loading: \"Stopping...\",\n            success: () => {\n                setIsSlideshowRunning(false);\n                setCurrentMarquee(\"\");\n                return \"Slideshow Stopped\";\n            },\n            error: \"Failed to stop slideshow\",\n        });\n    };\n\n    // Display a specific marquee\n    const handleDisplayMarquee = (favorite: FavoriteItem) => {\n        toast.promise(\n            updateMarquee(favorite.system, favorite.game, true),\n            {\n                loading: \"Displaying...\",\n                success: \"Marquee displayed\",\n                error: \"Failed to display marquee\",\n            },\n            { id: \"marquee-update\" }\n        );\n    };\n\n    if (loading) {\n        return (\n            <div className=\"favorites-page fade-in\">\n                <div className=\"favorites-loading\">\n                    <CircularProgress style={{ color: \"#fff\" }} />\n                    <p>Loading favorites...</p>\n                </div>\n            </div>\n        );\n    }\n\n    return (\n        <div className=\"favorites-page fade-in\">\n            {/* Header */}\n            <div className=\"favorites-header\">\n                <h2>\n                    <Favorite style={{ marginRight: 8, color: \"#ef4444\", verticalAlign: \"middle\" }} />\n                    Favorites ({favorites.length})\n                </h2>\n            </div>\n\n            {/* Slideshow Controls */}\n            <div className=\"slideshow-controls\">\n                <Button\n                    variant=\"contained\"\n                    onClick={isSlideshowRunning ? handleStopSlideshow : handleStartSlideshow}\n                    disabled={isStarting || (favorites.length === 0 && !isSlideshowRunning)}\n                    className={`slideshow-button ${isSlideshowRunning ? \"stop\" : \"start\"}`}\n                >\n                    {isStarting ? (\n                        <CircularProgress size={20} style={{ color: \"#fff\", marginRight: 8 }} />\n                    ) : isSlideshowRunning ? (\n                        <Stop style={{ marginRight: 8 }} />\n                    ) : (\n                        <PlayArrow style={{ marginRight: 8 }} />\n                    )}\n                    {isStarting ? \"Starting...\" : isSlideshowRunning ? \"Stop Slideshow\" : \"Start Slideshow\"}\n                </Button>\n\n                {settingsLoaded && (\n                    <div className=\"slideshow-settings\">\n                        <div className=\"setting-item\">\n                            <label>Interval:</label>\n                            <Select\n                                name=\"interval\"\n                                options={intervalOptions}\n                                selectedValue={String(slideshowSettings.interval)}\n                                onChange={handleIntervalChange}\n                                caretIcon={<CaretIcon />}\n                                modalCloseButton={<ModalCloseButton />}\n                            />\n                        </div>\n                        <FormControlLabel\n                            control={\n                                <Switch\n                                    checked={slideshowSettings.includeVideos}\n                                    onChange={handleIncludeVideosChange}\n                                    color=\"primary\"\n                                />\n                            }\n                            label=\"Include Videos\"\n                            className=\"videos-toggle\"\n                        />\n                    </div>\n                )}\n\n                {isSlideshowRunning && currentMarquee && (\n                    <div className=\"now-playing\">\n                        Now showing: <strong>{currentMarquee}</strong>\n                    </div>\n                )}\n            </div>\n\n            {/* Favorites Grid */}\n            {favorites.length === 0 ? (\n                <div className=\"no-favorites\">\n                    <Favorite style={{ fontSize: 64, color: \"#444\", marginBottom: 16 }} />\n                    <p>No favorites yet</p>\n                    <p className=\"hint\">\n                        Browse marquees and tap the heart icon to add favorites\n                    </p>\n                    <Button\n                        variant=\"contained\"\n                        onClick={() => nav(\"/consoles\")}\n                        style={{ marginTop: 16 }}\n                    >\n                        Browse Marquees\n                    </Button>\n                </div>\n            ) : (\n                <div className=\"favorites-grid\">\n                    {favorites.map((favorite) => (\n                        <div\n                            key={favorite.key}\n                            className={`favorite-item ${currentMarquee === favorite.key ? \"active\" : \"\"}`}\n                        >\n                            <img\n                                src={`${getDeviceUrl(\"\")}/thumbnail/${favorite.system}/${favorite.game}.jpg`}\n                                alt={favorite.game}\n                                onClick={() => handleDisplayMarquee(favorite)}\n                                onError={(e) => {\n                                    const img = e.target as HTMLImageElement;\n                                    const baseUrl = getDeviceUrl(\"\");\n                                    // Fallback order: game.jpg -> game.png -> default-system.jpg\n                                    if (img.src.includes(`/${favorite.system}/${favorite.game}.jpg`)) {\n                                        img.src = `${baseUrl}/thumbnail/${favorite.system}/${favorite.game}.png`;\n                                    } else if (img.src.includes(`/${favorite.system}/${favorite.game}.png`)) {\n                                        // Try game name without system prefix\n                                        img.src = `${baseUrl}/thumbnail/${favorite.game}.jpg`;\n                                    } else if (img.src.includes(`/thumbnail/${favorite.game}.jpg`)) {\n                                        // Fall back to default system marquee\n                                        img.src = `${baseUrl}/thumbnail/default-${favorite.system}.jpg`;\n                                    }\n                                }}\n                            />\n                            <div className=\"favorite-info\">\n                                <span className=\"game-name\" title={favorite.game}>\n                                    {favorite.game}\n                                </span>\n                                <span className=\"system-name\">{favorite.system}</span>\n                            </div>\n                            <button\n                                className=\"remove-button\"\n                                onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleRemoveFavorite(favorite);\n                                }}\n                                title=\"Remove from favorites\"\n                            >\n                                <Close fontSize=\"small\" />\n                            </button>\n                            {favorite.hasVideo && (\n                                <div className=\"video-indicator\" title=\"Has video marquee\">\n                                    <Videocam fontSize=\"small\" />\n                                </div>\n                            )}\n                            {currentMarquee === favorite.key && (\n                                <div className=\"playing-indicator\">\n                                    <PlayArrow fontSize=\"small\" />\n                                </div>\n                            )}\n                        </div>\n                    ))}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default Favorites;\n","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport { HashRouter, Route, Routes } from \"react-router-dom\";\nimport Header from \"./components/Header\";\nimport ConsoleList from \"./components/ConsoleList\";\nimport MarqueeList from \"./components/MarqueeList\";\nimport StickyBox from \"react-sticky-box\";\nimport MainMenu from \"./components/MainMenu\";\nimport DefaultMarquee from \"./components/DefaultMarquee\";\nimport DeviceSettings from \"./components/DeviceSettings\";\nimport SendText from \"./components/SendText\";\nimport WidgetsMenu from \"./components/WidgetsMenu\";\nimport WidgetSettings from \"./components/WidgetSettings\";\nimport UpdatePage from \"./components/UpdatePage\";\nimport LogViewer from \"./components/LogViewer\";\nimport UploadArtwork from \"./components/UploadArtwork\";\nimport Favorites from \"./components/Favorites\";\n\nexport type ContextType = {\n    streamImages: boolean;\n    setStreamImages: Function;\n};\n\nexport const ApplicationContext = React.createContext<ContextType>(\n    {} as ContextType\n);\nexport const useAppSettings = () => React.useContext(ApplicationContext);\n\nconst App: React.FC = () => {\n    const [streamImages, setStreamImages] = useState<boolean>(false);\n\n    const state = {\n        streamImages,\n        setStreamImages,\n    };\n    return (\n        <ApplicationContext.Provider value={state}>\n            <HashRouter>\n                <StickyBox style={{ zIndex: 100 }}>\n                    <Header />\n                </StickyBox>\n                <Routes>\n                    <Route path=\"/\" element={<MainMenu />} />,\n                    <Route path=\"/consoles\" element={<ConsoleList />} />\n                    ,\n                    <Route path=\"/marquees/:system\" element={<MarqueeList />} />\n                    ,\n                    <Route\n                        path=\"/default-marquee\"\n                        element={<DefaultMarquee />}\n                    />\n                    ,\n                    <Route path=\"/settings\" element={<DeviceSettings />} />\n                    ,\n                    <Route path=\"/text\" element={<SendText />} />\n                    <Route path=\"/upload-artwork\" element={<UploadArtwork />} />\n                    <Route path=\"/widgets\" element={<WidgetsMenu />} />\n                    <Route path=\"/widget-settings\" element={<WidgetSettings />} />\n                    <Route path=\"/log\" element={<LogViewer />} />\n                    <Route path=\"/update\" element={<UpdatePage />} />\n                    <Route path=\"/favorites\" element={<Favorites />} />\n                </Routes>\n            </HashRouter>\n        </ApplicationContext.Provider>\n    );\n};\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}